{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Grizzly - <code>/\u02c8\u0261\u0279\u026azli/</code>","text":"<p>"},{"location":"#project-status","title":"Project status","text":""},{"location":"#framework","title":"Framework","text":""},{"location":"#command-line-interface","title":"Command Line Interface","text":""},{"location":"#editor-support-language-server","title":"Editor Support / Language Server","text":""},{"location":"#editor-support-visual-studio-code-extension","title":"Editor Support / Visual Studio Code Extension","text":"<p>Grizzly is a framework to be able to easily define load scenarios, and is primarily built on-top of two other frameworks.</p> <p>Locust: Define user behaviour with Python code, and swarm your system with millions of simultaneous users.</p> <p>Behave: Uses tests written in a natural language style, backed up by Python code.</p> <p><code>behave</code> is abused for being able to define <code>locust</code> load test scenarios using gherkin. A feature can contain more than one scenario and all scenarios will run in parallell. This makes it possible to implement load test scenarios without knowing python or how to use <code>locust</code>.</p> <p>Locust are a group of certain species of short-horned grasshoppers in the family Arcididae that have a swarming phase.</p> <p>The name grizzly was chosen based on the grasshopper Melanoplus punctulatus, also known as grizzly spur-throat grasshopper. This species prefers living in trees over grass, which is a hint to Biometria<sup>1</sup>, where <code>grizzly</code> originally was created.</p> <p><sup>1</sup> Biometria is a member owned and central actor within the swedish forestry that performs unbiased measurement of lumber flowing between forest and industry so that all of Swedens forest owners can feel confident selling their lumber.</p>"},{"location":"#documentation","title":"Documentation","text":"<p>More detailed documentation can be found here and the easiest way to get started is to check out the example.</p>"},{"location":"#features","title":"Features","text":"<p>A number of features that we thought <code>locust</code> was missing out-of-the-box has been implemented in <code>grizzly</code>.</p>"},{"location":"#test-data","title":"Test data","text":"<p>Support for synchronous handling of test data (variables). This is extra important when running <code>locust</code> distributed and there is a need for each worker and user to have unique test data, that cannot be re-used.</p> <p>The solution is heavily inspired by Karol Brejnas locust experiments - feeding the locust. A producer is running on the master (or local) node and keeps track of what has been sent to the consumer running on a worker (or local) node. Communication is done with asynchronous custom locust messages, over it's ZeroMQ based RPC connection between nodes.</p> <p>When the consumer wants new test data, it sends a message to the server that it is available and for which scenario it is going to run. The producer then responds with unique test data that can be used.</p>"},{"location":"#load-users","title":"Load users","text":"<p><code>locust</code> comes with a range of different load users. Grizzly has it's own though, and it is not possible to use pure locust user implementations.</p> <ul> <li><code>RestApiUser</code>: send requests to REST API endpoinds, supports authentication with username+password or client secret</li> <li><code>ServiceBusUser</code>: send to and receive from Azure Service Bus queues and topics</li> <li><code>MessageQueueUser</code>: send and receive from IBM MQ queues</li> <li><code>BlobStorageUser</code>: send and receive files to Azure Blob Storage</li> <li><code>IotHubUser</code>: send/put files to Azure IoT Hub</li> </ul>"},{"location":"#installation","title":"Installation","text":"<pre><code>python -m pip install grizzly-loadtester\npython -m pip install grizzly-loadtester-cli\n</code></pre> <p>Do not forget to try the example which also serves as a boilerplate scenario project, or create a new grizzly project with:</p> <pre><code>grizzly-cli init my-grizzly-project\n</code></pre>"},{"location":"#development","title":"Development","text":"<p>The easiest way to start contributing to this project is to have Visual Studio Code (with \"Remote - Containers\" extension) and docker installed. The project comes with a <code>devcontainer</code>, which encapsulates everything needed for a development environment.</p> <p>It is also possible to use a python virtual environment, but then you would have to manually download and install <code>uv</code> and IBM MQ libraries.</p> <pre><code>wget -qO- https://astral.sh/uv/install.sh | sh\nsudo mkdir /opt/mqm &amp;&amp; cd /opt/mqm &amp;&amp; wget https://ibm.biz/IBM-MQC-Redist-LinuxX64targz -O - | tar xzf -\nexport LD_LIBRARY_PATH=\"/opt/mqm/lib64:${LD_LIBRARY_PATH}\"\ncd ~/\ngit clone https://github.com/Biometria-se/grizzly.git\ncd grizzly/\nuv sync --locked --all-packages --all-extras --all-groups\n</code></pre>"},{"location":"example/","title":"Example","text":""},{"location":"example/#example_1","title":"Example","text":"<p>The directory <code>example/</code> is an working project that sends requests to public REST API endpoints, please do not abuse these.</p>"},{"location":"example/#structure","title":"Structure","text":"<p>The project must have the follwoing structure:</p> <pre><code>.\n\u2514\u2500\u2500 features\n \u00a0\u00a0 \u251c\u2500\u2500 environment.py\n \u00a0\u00a0 \u251c\u2500\u2500 test.feature\n \u00a0\u00a0 \u251c\u2500\u2500 requests\n \u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 ...\n \u00a0\u00a0 \u2514\u2500\u2500 steps\n \u00a0\u00a0     \u2514\u2500\u2500 steps.py\n</code></pre> <p>In this example there are two <code>requirements*.txt</code> files. The reason is that <code>requirements.txt</code> will be copied and installed in the container image if <code>grizzly-cli</code> is used. The container image should not contain <code>grizzly-cli</code> and should be installed where scenarios are started from.</p> <p>After installing <code>grizzly-cli</code> the easiest way to get a correct project structure is to use the builtin <code>init</code> subcommand:</p> <pre><code>grizzly-cli init my-grizzly-project\ncd my-grizzly-project/\n</code></pre>"},{"location":"example/#environment","title":"Environment","text":"<p><code>features/environment.py</code> must contain:</p> <pre><code>from grizzly.environment import *\n</code></pre> <p>This file can contain overloading of <code>behave</code> hooks to trigger events that should happen during different stages of running a feature file.</p> <pre><code>from grizzly.environment import before_feature as grizzly_before_feature\nfrom grizzly.environment import after_feature as grizzly_after_feature\nfrom grizzly.environment import before_scenario, after_scenario, before_step\n\ndef before_feature(context: Context, *args: Tuple[Any, ...], **kwargs: Dict[str, Any]) -&gt; None:\n    # custom code that should run before feature file is started, e.g. notify something that a test\n    # is started\n\n    grizzly_before_feature(context, *args, **kwargs)\n\n\ndef after_feature(context: Context, feature: Feature, *args: Tuple[Any, ...], **kwargs: Dict[str, Any]) -&gt; None:\n    grizzly_after_feature(context, feature, *args, **kwargs)\n\n    # custom code that should run before feature file is started, e.g. notify something that a test\n    # is finished\n</code></pre>"},{"location":"example/#steps","title":"Steps","text":"<p><code>features/steps/steps.py</code> must contain:</p> <pre><code>from grizzly.steps import *\n</code></pre> <p>This is where custom step implementation can be added, then should look something like:</p> <pre><code>from grizzly.types.behave import Context, then\nfrom grizzly.steps import *\nfrom grizzly.context import GrizzlyContext\n\n\n@then('this custom step should be executed')\ndef step_custom_the_custom_step(context: Context) -&gt; None:\n    grizzly = cast(GrizzlyContext, context.grizzly)\n\n    # custom step implementation\n</code></pre>"},{"location":"example/#request-templates","title":"Request templates","text":"<p><code>features/requests</code> can contain jinja2 templates used in requests. E.g., if the feature file contains the following step:</p> <pre><code>Then send request \"payload.j2.json\"\n</code></pre> <p>Then <code>features/requests/payload.j2.json</code> needs to exist.</p>"},{"location":"example/#get","title":"Get","text":"<p>First do a sparse checkout of the <code>example/</code> directory in the repository.</p> <p>If you have <code>git</code> older than <code>2.25.0</code>, follow these instructions on stackoverflow.com.</p> BashPowerShell <pre><code>mkdir grizzly-example\ncd grizzly-example\ngit init\ngit remote add -f origin https://github.com/Biometria-se/grizzly.git\ngit sparse-checkout init\ngit sparse-checkout set example/\ngit pull origin main\nrm -rf .git/\ncd example/\n</code></pre> <pre><code>mkdir grizzly-example\ncd .\\grizzly-example\\\ngit init\ngit remote add -f origin https://github.com/Biometria-se/grizzly.git\ngit sparse-checkout init\ngit sparse-checkout set example/\ngit pull origin main\nrm -Recurse -Force .\\.git\\\ncd .\\example\\\n</code></pre> <p>Create an python virtual environment and install dependencies:</p> BashPowerShell <pre><code>python3 -m venv .env\nsource .env/bin/activate\npip3 install -r requirements.txt\npip3 install grizzly-loadtester-cli\n</code></pre> <pre><code>python3 -m venv .env\n.\\.env\\Scripts\\activate\npip3 install -r .\\requirements.txt\npip3 install grizzly-loadtester-cli\n</code></pre> <p>If you do not already have an working \"IBM MQ\" client setup and run <code>grizzly-cli</code> in local mode you will not be able to use <code>MessageQueueUser</code>. See <code>grizzly-cli/static/Containerfile</code> on how to get these. When that is done you need to install the extra dependencies:</p> <pre><code>python3 -m pip install grizzly-loadtester[mq]\n</code></pre>"},{"location":"example/#run","title":"Run","text":"<p><code>grizzly</code> has some runtime features which is easiliest handled by using the <code>grizzly-cli</code>. It provides a simple command line interface wrapping the <code>behave</code> command, for providing initial variable values, configuration etc.</p> <p>To run the example, in local mode:</p> BashPowerShell <pre><code>grizzly-cli local run -e environments/example.yaml features/example.feature\n</code></pre> <pre><code>grizzly-cli local run -e .\\environments\\example.yaml .\\features\\example.feature\n</code></pre> <p>And in distributed mode (requires <code>docker</code> and <code>docker-compose</code> in <code>PATH</code>):</p> BashPowerShell <pre><code>grizzly-cli dist run -e environments/example.yaml features/example.feature\n</code></pre> <pre><code>grizzly-cli dist run -e .\\environments\\example.yaml .\\features\\example.feature\n</code></pre>"},{"location":"example/#develop","title":"Develop","text":"<p>If you have Visual Studio Code installed, you can also install the grizzly extension to make your life easier when developing scenarios!</p> <pre><code>python3 -m pip install grizzly-loadtester-ls\ncode --install-extension biometria-se.grizzly-loadtester-vscode\n</code></pre>"},{"location":"command-line-interface/changelog/","title":"Changelog","text":""},{"location":"command-line-interface/changelog/#v3227-legacy","title":"v3.2.27 legacy","text":"<ul> <li><code>b5c5eae9</code>: pinned packaging version incompatible with grizzly@main (#114)</li> </ul>"},{"location":"command-line-interface/changelog/#v3226","title":"v3.2.26","text":"<ul> <li><code>b97ce3a2</code>: pin pyyaml version that is compatible with grizzly (#113)</li> </ul>"},{"location":"command-line-interface/changelog/#v3225","title":"v3.2.25","text":"<ul> <li><code>c466cdda</code>: if <code>--validate-config</code> is supplied, always return even when it was a success (#112)</li> <li><code>4e247a2f</code>: update jinja2 and requests, to fix CVE's</li> </ul>"},{"location":"command-line-interface/changelog/#v3224","title":"v3.2.24","text":"<ul> <li><code>cba03fda</code>: replaced pylint+flake8 with ruff (#110)</li> </ul>"},{"location":"command-line-interface/changelog/#v3223","title":"v3.2.23","text":"<ul> <li><code>6869b3f1</code>: keyvault improvements (#109)</li> </ul>"},{"location":"command-line-interface/changelog/#v3222","title":"v3.2.22","text":"<ul> <li><code>da3aee8c</code>: reference keyvault certificates in environment configuration (#108)</li> </ul>"},{"location":"command-line-interface/changelog/#v3221","title":"v3.2.21","text":"<ul> <li><code>fdd3fdb1</code>: get_context_root should look for the \"closest\" environment.py</li> </ul>"},{"location":"command-line-interface/changelog/#v3220","title":"v3.2.20","text":"<ul> <li><code>213f71e6</code>: temporary file permissions (#106)</li> </ul>"},{"location":"command-line-interface/changelog/#v3219","title":"v3.2.19","text":"<ul> <li><code>3e8aab14</code>: keyvault configuration bugs (#105)</li> </ul>"},{"location":"command-line-interface/changelog/#v3218","title":"v3.2.18","text":"<ul> <li><code>fe712400</code>: new subcommand for keyvault</li> </ul>"},{"location":"command-line-interface/changelog/#v3217","title":"v3.2.17","text":"<ul> <li><code>90bb3699</code>: remove support for python 3.8</li> <li><code>9aebbf2b</code>: store environment configuration in an azure keyvault, as secrets</li> </ul>"},{"location":"command-line-interface/changelog/#v3216","title":"v3.2.16","text":"<ul> <li><code>bace6906</code>: strange behavior between github runner py 3.12.9 and devcontainer py 3.12.6</li> <li><code>4d7dd700</code>: show which environment file is used, if specified</li> </ul>"},{"location":"command-line-interface/changelog/#v3215","title":"v3.2.15","text":"<ul> <li><code>ebbe24e8</code>: problems with mq redist 9.4.1.0 which is linked by the short-url.</li> </ul>"},{"location":"command-line-interface/changelog/#v3214","title":"v3.2.14","text":"<ul> <li><code>47811737</code>: strange locust error when trying to write stats to CSV file, skip it in E2E test for now.</li> <li><code>3559c352</code>: fix unit tests</li> <li><code>406346a3</code>: values used to calculate user distribution can contain variables</li> </ul>"},{"location":"command-line-interface/changelog/#v3213","title":"v3.2.13","text":"<ul> <li><code>b0ee7c14</code>: update jinja2 to patch cve-2024-22195</li> <li><code>8f36acaf</code>: fix for failing unit tests py &lt; 3.10</li> <li><code>199402f4</code>: fixed bug Biometria-se/grizzly#347</li> </ul>"},{"location":"command-line-interface/changelog/#v3212","title":"v3.2.12","text":"<ul> <li><code>ac2ed000</code>: new arguments to get more information from building</li> </ul>"},{"location":"command-line-interface/changelog/#v3211","title":"v3.2.11","text":"<ul> <li><code>3ebd7d66</code>: inherit parent feature-file correctly</li> <li><code>34f858c1</code>: remove if-statements containing grizzly variables in \"root\" feature-file.</li> <li><code>0200a5c3</code>: extract scenario scenario from feature file before rendering</li> <li><code>3e4e1316</code>: fixed bug where the conents/body of a if-statement block would be rendered, even though it shouldn't at this point</li> </ul>"},{"location":"command-line-interface/changelog/#v3210","title":"v3.2.10","text":"<ul> <li><code>ed93a78f</code>: support for <code>if</code>-statements in templates</li> </ul>"},{"location":"command-line-interface/changelog/#v329","title":"v3.2.9","text":"<ul> <li><code>2503b791</code>: possible fix for conflict between setup-python action and homebrew formulas.</li> <li><code>32706775</code>: handle relative paths in nested scenario-tags correctly.</li> </ul>"},{"location":"command-line-interface/changelog/#v328","title":"v3.2.8","text":"<ul> <li><code>99fac3a2</code>: allow nested <code>{% scenario .. %}</code> tags and special tag variables (<code>{$ .. $}</code>) (#94)</li> <li><code>733e7886</code>: bump devcontainer and dist image to python 3.12 (#93)</li> </ul>"},{"location":"command-line-interface/changelog/#v327","title":"v3.2.7","text":"<ul> <li><code>26555784</code>: remove top-level version element in compose.yaml (#92)</li> <li><code>e2949eb0</code>: implementation of <code>--dry-run</code> in <code>run</code> command (#91)</li> </ul>"},{"location":"command-line-interface/changelog/#v326","title":"v3.2.6","text":"<ul> <li><code>2496d9ee</code>: support for relative upstream paths for feature files in scenario tag (#90)</li> </ul>"},{"location":"command-line-interface/changelog/#v325","title":"v3.2.5","text":"<ul> <li><code>2fa1dd39</code>: create temporary .lock.feature file</li> </ul>"},{"location":"command-line-interface/changelog/#v324","title":"v3.2.4","text":"<ul> <li><code>dcf742ae</code>: remove <code>--stop</code> argument for behave</li> <li><code>8163280d</code>: new user step that sets user type, host, fixed count</li> <li><code>6157e7a6</code>: handle step expressions that assign users to a scenario with a tag</li> <li><code>89959fd8</code>: fixed bug for missing step text and table</li> <li><code>169e1afa</code>: bug with included steps fixed</li> <li><code>1629fab1</code>: adaptations to grizzly version that supports the new locust dispatcher</li> <li><code>151de2a0</code>: Scenario tag fix, copying variable substrings to preserve whitespacing (#87)</li> <li><code>9ebf592a</code>: remove norwegian debugging statements</li> <li><code>87db970a</code>: remove level classvar</li> <li><code>71833170</code>: no need for temporary files</li> <li><code>af9f753a</code>: windows cannot open a file twice</li> <li><code>0c62cea1</code>: anything outside of <code>{% scenario ...%}</code> should be treated as data, e.g. plain text.</li> <li><code>d46da898</code>: custom jinja2 tag to include all steps from a scenario in another feature file</li> <li><code>17fecd62</code>: fix for auto-completing \"partial\" directories and exact file matches</li> <li><code>f42ef166</code>: error detection in distribution_of_users_per_scenario</li> </ul>"},{"location":"command-line-interface/changelog/#v323","title":"v3.2.3","text":"<ul> <li><code>a5530234</code>: included missed output in log file when <code>-l/--log-file</code> is used</li> </ul>"},{"location":"command-line-interface/changelog/#v322","title":"v3.2.2","text":"<ul> <li><code>0a1eb899</code>: change flask version</li> <li><code>b21ef107</code>: updated URL to IBM MQ dependencies</li> </ul>"},{"location":"command-line-interface/changelog/#v321","title":"v3.2.1","text":"<ul> <li><code>42403257</code>: fixed E2E tests</li> <li><code>b01702d9</code>: stateless authenticator \"app\"</li> <li><code>6c0a0b61</code>: add support for sub log directories in <code>requests/logs</code></li> </ul>"},{"location":"command-line-interface/changelog/#v320","title":"v3.2.0","text":"<ul> <li><code>01221bb2</code>: add python 3.11 support (#78)</li> <li><code>ef90eb6d</code>: special case for mac os also in log file</li> <li><code>983cb64e</code>: add run argument to save all output to log file</li> <li><code>c37efac1</code>: fixed node numbering for workers</li> <li><code>ac617717</code>: install wheel package in venv</li> <li><code>12b7747d</code>: prefix missed output with master node name, as it would've been done in the <code>docker compose up</code> output</li> <li><code>e0379bac</code>: do not look for grizzly.returncode= in output</li> <li><code>c0aa586c</code>: wrap results from <code>run_command</code> in a dataclass</li> <li><code>8aa3ea3a</code>: find output that docker compose hide when aborting a dist run</li> <li><code>562ab958</code>: cleaner implementation of handling sig traps</li> <li><code>4f21bf37</code>: add signal handler that terminates process</li> </ul>"},{"location":"command-line-interface/changelog/#v318","title":"v3.1.8","text":"<ul> <li><code>b43f5c6b</code>: added missing e2e test for Biometria-se/grizzly#232 (#75)</li> <li><code>48064a43</code>: fixes Biometria-se/grizzly#232 (#74)</li> </ul>"},{"location":"command-line-interface/changelog/#v317","title":"v3.1.7","text":"<ul> <li><code>0ed37c06</code>: do not create a default requirements.txt if it doesn't exist</li> <li><code>633fb212</code>: use compose v2 via <code>docker compose</code> instead of <code>docker-compose</code> (#72)</li> </ul>"},{"location":"command-line-interface/changelog/#v316","title":"v3.1.6","text":"<ul> <li><code>f193a1e3</code>: pip-licenses 4.2.0 is broken, exclude (#71)</li> <li><code>89abf922</code>: change constraints for tomli dependency to avoid dependency problems with other dependencies</li> <li><code>6ab6be02</code>: removed duplicated packaging dependency</li> <li><code>ad49973b</code>: colima docker install needs buildx plugin</li> <li><code>c3a65880</code>: fixed mypy errors, due to updated mypy version</li> <li><code>78e0b36b</code>: adaptations for Biometria-se/grizzly#205.</li> </ul>"},{"location":"command-line-interface/changelog/#v315","title":"v3.1.5","text":"<ul> <li><code>08d9fb08</code>: fixes Biometria-se/grizzly#186</li> <li><code>7cbcc531</code>: Update README.md</li> <li><code>81484ea7</code>: updated action versions to get rid of warnings (#66)</li> </ul>"},{"location":"command-line-interface/changelog/#v314","title":"v3.1.4","text":"<ul> <li><code>0cfd9e9f</code>: implemented support for <code>--csv*</code> arguments (#65)</li> </ul>"},{"location":"command-line-interface/changelog/#v313","title":"v3.1.3","text":"<ul> <li><code>e211442c</code>: grizzly support templating for user weight</li> </ul>"},{"location":"command-line-interface/changelog/#v312","title":"v3.1.2","text":"<ul> <li><code>8c7b8915</code>: annotate notices in feature metadata (comments) that grizzly-cli will show</li> </ul>"},{"location":"command-line-interface/changelog/#v311","title":"v3.1.1","text":"<ul> <li><code>4df22703</code>: check for return code in command output</li> <li><code>da9c0f0d</code>: add <code>wheel</code> as dev dependency</li> </ul>"},{"location":"command-line-interface/changelog/#v310","title":"v3.1.0","text":"<ul> <li><code>f0a6b13b</code>: fixed copy-paste error in publish package step</li> <li><code>40b83dc5</code>: fixed indentation for inputs in release workflow (#61)</li> <li><code>34235b59</code>: fixed warnings from coverage when running e2e tests (#60)</li> <li><code>771eb3e1</code>: implementation of issue #159</li> <li><code>a9f6982c</code>: ::set-output deprecated (#58)</li> </ul>"},{"location":"command-line-interface/changelog/#v3011","title":"v3.0.11","text":"<ul> <li><code>159b313a</code>: v3.0.10 comes after v3.0.1, so latest is v3.0.9 (lexicographic order) -- use <code>sort -r --version-sort</code> (#57)</li> <li><code>5404d7ae</code>: assume a remote branch if git cat-file fails</li> </ul>"},{"location":"command-line-interface/changelog/#v3010","title":"v3.0.10","text":"<ul> <li><code>fb1f2608</code>: set LANG and LC_ALL to C.UTF-8 instead of C</li> <li><code>bdd0f7a3</code>: improved grizzly version crawling</li> <li><code>238a989c</code>: oooh man... encoding on the windows-latest runner :S</li> <li><code>924486e6</code>: make End2EndFixture windows compatible</li> <li><code>35b3b18b</code>: remove user and group in grizzly image, if they exists</li> <li><code>f2f20240</code>: update versions of github actions checkout and setup-python</li> <li><code>bf4050e2</code>: e2e test of grizzly-cli init</li> <li><code>e96ee349</code>: e2e test for grizzly init</li> <li><code>9af2236c</code>: restructure of tests and added e2e tests</li> <li><code>0032002c</code>: fixed unit tests for windows</li> <li><code>086df974</code>: optimization of listing files for bash completion</li> </ul>"},{"location":"command-line-interface/changelog/#v309","title":"v3.0.9","text":"<ul> <li><code>d91ba37e</code>: workdir changed, correct entrypoint script path (#51)</li> </ul>"},{"location":"command-line-interface/changelog/#v308","title":"v3.0.8","text":"<ul> <li><code>61f8699e</code>: simplified format_text for md-help (#50)</li> <li><code>13c3e809</code>: set workdir to /srv/grizzly</li> </ul>"},{"location":"command-line-interface/changelog/#v307","title":"v3.0.7","text":"<ul> <li><code>84590d5c</code>: implementation of grizzly-cli dist clean (#48)</li> <li><code>05c628fb</code>: changes for being able to use in E2E tests (#47)</li> </ul>"},{"location":"command-line-interface/changelog/#v306","title":"v3.0.6","text":"<ul> <li><code>215522a1</code>: possibility to inject grizzly-cli command arguments via metadata specified in feature file</li> <li><code>140f7484</code>: argument to increase how long the master will wait for worker report</li> </ul>"},{"location":"command-line-interface/changelog/#v305","title":"v3.0.5","text":"<ul> <li><code>7c3bb2f6</code>: change version of IBM MQ Redist, and allow it to be overriden</li> </ul>"},{"location":"command-line-interface/changelog/#v304","title":"v3.0.4","text":"<ul> <li><code>75690e56</code>: pkg-resources is some kind of meta package, ignore in license table (#44)</li> </ul>"},{"location":"command-line-interface/changelog/#v303","title":"v3.0.3","text":"<ul> <li><code>6df5c857</code>: update script that generates licenses information (#43)</li> </ul>"},{"location":"command-line-interface/changelog/#v302","title":"v3.0.2","text":"<ul> <li><code>bb270a82</code>: changed <code>grizzly_cli.SCENARIOS</code> to a list to get guaranteed insertion order (#42)</li> </ul>"},{"location":"command-line-interface/changelog/#v301","title":"v3.0.1","text":"<ul> <li><code>df5a4902</code>: --yes argument to automagically answer yes on any questions</li> <li><code>0b57d739</code>: subcommand is not set for command <code>init</code></li> <li><code>43ccba6b</code>: do not sort scenarios by name, iterate in the order they are defined</li> <li><code>dd4b5e7b</code>: adaptations for Biometria-se/grizzly#71</li> </ul>"},{"location":"command-line-interface/changelog/#v300","title":"v3.0.0","text":"<ul> <li><code>267ee8df</code>: restructuring commands</li> <li><code>c1170417</code>: step expression for number of users can be singular (#37)</li> </ul>"},{"location":"command-line-interface/changelog/#v216","title":"v2.1.6","text":"<ul> <li><code>803b3f3a</code>: users per scenario is calculated incorrectly (#36)</li> <li><code>065b1e5c</code>: documentation of IBM_MQ_LIB_HOST environment variable (#35)</li> <li><code>e73174b2</code>: make sure that it is possible to generate licenses documentation (#34)</li> <li><code>a574b5c4</code>: github action action-push-tag@v1 is broken (#33)</li> </ul>"},{"location":"command-line-interface/changelog/#v215","title":"v2.1.5","text":"<ul> <li><code>e3eb9073</code>: no smoothed timeline in test summary</li> <li><code>2d706e0f</code>: --add-host if overridden IBM_MQ_LIB_HOST is using host.docker.internal (#31)</li> </ul>"},{"location":"command-line-interface/changelog/#v214","title":"v2.1.4","text":"<ul> <li><code>220924f6</code>: fix failing tests</li> <li><code>45fc7718</code>: possible to override host where IBM MQ lib redist package should be downloaded from</li> <li><code>d34ebbf8</code>: script for generating a license summary (#29)</li> </ul>"},{"location":"command-line-interface/changelog/#v213","title":"v2.1.3","text":"<ul> <li><code>49116c42</code>: check if container image should be built with or without mq libraries</li> <li><code>50ec4869</code>: check if grizzly-loadtester is installed with any extras</li> <li><code>447f677e</code>: Containerfile updated to have MQ libraries as optional</li> <li><code>64b2131a</code>: unable to use cache functionality of setup-python@v2</li> <li><code>241bdb22</code>: fix for Biometria-se/grizzly#73</li> <li><code>340cfd18</code>: only run code quality workflow on 3.10 on windows</li> <li><code>e11c1b09</code>: docker-compose v2 and v1 compatible in instructions</li> <li><code>1db75e0b</code>: base on 3.10-slim instead of alpine</li> <li><code>a7dc5ce6</code>: add --no-tty argument to run dist</li> <li><code>8d3d83ee</code>: more dynamic creation of sub command parsers</li> <li><code>03652ae8</code>: build package based on metadata only</li> </ul>"},{"location":"command-line-interface/changelog/#v212","title":"v2.1.2","text":"<ul> <li><code>344bc53b</code>: remove debug prints that fell through quality control</li> </ul>"},{"location":"command-line-interface/changelog/#v211","title":"v2.1.1","text":"<ul> <li><code>d41cde5c</code>: added missing dependency (#24)</li> </ul>"},{"location":"command-line-interface/changelog/#v210","title":"v2.1.0","text":"<ul> <li><code>4feb4ec5</code>: build grizzly container image based on locust container image version that the project depends on</li> <li><code>4e3ec441</code>: implementation of getting dependencies version</li> <li><code>4ffc4535</code>: WIP: get grizzly and locust version from project</li> <li><code>64b5eaef</code>: Feature/spring 2022 cleanup (#22)</li> </ul>"},{"location":"command-line-interface/changelog/#v204","title":"v2.0.4","text":"<ul> <li><code>c9c0c24b</code>: fix tty size in container (#20)</li> </ul>"},{"location":"command-line-interface/changelog/#v203","title":"v2.0.3","text":"<ul> <li><code>234e9c05</code>: getattr retrives value of registry in args, but if it is None (#19)</li> </ul>"},{"location":"command-line-interface/changelog/#v202","title":"v2.0.2","text":"<ul> <li><code>37da0e73</code>: Feature/build parser (#18)</li> <li><code>7c64bd0b</code>: added arguments for controlling compose health checks (#17)</li> </ul>"},{"location":"command-line-interface/changelog/#v201","title":"v2.0.1","text":"<ul> <li><code>83b08112</code>: build broken for 2.0.0 (#16)</li> </ul>"},{"location":"command-line-interface/changelog/#v200","title":"v2.0.0","text":"<ul> <li><code>d624baa7</code>: Feature/run windows 57 (#15)</li> <li><code>f20dccfa</code>: too greedy gitignore rule resulted in missing new workflow (#14)</li> <li><code>724bd70e</code>: Feature/argument refactor (#13)</li> <li><code>97ab0e45</code>: refreshed devcontainer (#12)</li> </ul>"},{"location":"command-line-interface/changelog/#v111","title":"v1.1.1","text":"<ul> <li><code>ae46c7a6</code>: do not expose locust webui port (8089) in compose file (#11)</li> </ul>"},{"location":"command-line-interface/changelog/#v110","title":"v1.1.0","text":"<ul> <li><code>9be8b64b</code>: Feature/validate iterations prompt (#10)</li> </ul>"},{"location":"command-line-interface/changelog/#v109","title":"v1.0.9","text":"<ul> <li><code>2cd470ae</code>: remove locust user (uid 1000) when building grizzly container image (#9)</li> </ul>"},{"location":"command-line-interface/changelog/#v108","title":"v1.0.8","text":"<ul> <li><code>cca24c6b</code>: create a user with uid/gid matching user that executes grizzly-cli (#8)</li> </ul>"},{"location":"command-line-interface/changelog/#v107","title":"v1.0.7","text":"<ul> <li><code>4bee4c7b</code>: get IBM MQ client logs when running distributed (#7)</li> </ul>"},{"location":"command-line-interface/changelog/#v106","title":"v1.0.6","text":"<ul> <li><code>746d7219</code>: expose internal environment variables in execution context (#6)</li> </ul>"},{"location":"command-line-interface/changelog/#v105","title":"v1.0.5","text":"<ul> <li><code>824f163d</code>: lock locust image version to version of locust used by grizzly</li> </ul>"},{"location":"command-line-interface/changelog/#v104","title":"v1.0.4","text":"<ul> <li><code>f8fd5c9d</code>: ask for value expression can have more than one keyword (#5)</li> </ul>"},{"location":"command-line-interface/changelog/#v103","title":"v1.0.3","text":"<ul> <li><code>c0eacc1a</code>: set MTU in docker-compose network to the same value as the default bridge has</li> <li><code>964e6993</code>: updated pylint configuration</li> </ul>"},{"location":"command-line-interface/changelog/#v102","title":"v1.0.2","text":"<ul> <li><code>0d5ec1ba</code>: also get tags</li> <li><code>ffd52159</code>: change development version to 0.0.0</li> </ul>"},{"location":"command-line-interface/changelog/#v101","title":"v1.0.1","text":"<ul> <li><code>7fc1fa1b</code>: set ulimit nofile to min recommended value for locust</li> </ul>"},{"location":"command-line-interface/licenses/","title":"Licenses","text":""},{"location":"command-line-interface/licenses/#package","title":"Package","text":""},{"location":"command-line-interface/licenses/#the-mit-license-mit","title":"The MIT License (MIT)","text":"<p>Copyright \u00a9 2021 Biometria Ekonomiska F\u00f6rening</p> <p>Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \u201cSoftware\u201d), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:</p> <p>The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.</p> <p>THE SOFTWARE IS PROVIDED \u201cAS IS\u201d, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</p>"},{"location":"command-line-interface/licenses/#package-dependencies","title":"Package dependencies","text":"Name Version License azure-core 1.35.0 MIT License azure-identity 1.24.0 MIT License azure-keyvault-secrets 4.10.0 MIT License behave 1.3.1 BSD-2-Clause certifi 2025.8.3 Mozilla Public License 2.0 (MPL 2.0) cffi 1.17.1 MIT License charset-normalizer 3.4.3 MIT colorama 0.4.6 BSD License cryptography 45.0.6 Apache-2.0 OR BSD-3-Clause cucumber-expressions 18.0.1 MIT License cucumber-tag-expressions 6.2.0 MIT License idna 3.10 BSD License isodate 0.7.2 BSD License Jinja2 3.1.6 BSD License jinja2-simple-tags 0.6.1 BSD License jsonpath-ng 1.7.0 Apache Software License lxml 6.0.1 BSD License MarkupSafe 3.0.2 BSD License msal 1.33.0 MIT License msal-extensions 1.3.1 MIT License parse 1.20.2 MIT License parse_type 0.6.6 MIT ply 3.11 BSD progress 1.6.1 ISC pycparser 2.22 BSD License pyotp 2.9.0 MIT License python-dateutil 2.9.0.post0 Apache Software License; BSD License PyYAML 6.0.2 MIT License requests 2.32.5 Apache Software License six 1.17.0 MIT License typing_extensions 4.14.1 PSF-2.0 tzdata 2025.2 Apache Software License urllib3 2.5.0 MIT"},{"location":"command-line-interface/usage/","title":"<code>grizzly-cli</code>","text":"<p>the command line interface for grizzly, which makes it easer to start a test with all features of grizzly wrapped up nicely. installing it is a matter of: pip install grizzly-loadtester-cli enable bash completion by adding the following to your shell profile: eval \"$(grizzly-cli --bash-completion)\"</p>"},{"location":"command-line-interface/usage/#usage","title":"Usage","text":"<pre><code>grizzly-cli [-h] [--version [{all}]] {init,local,auth,dist,keyvault} ...\n</code></pre>"},{"location":"command-line-interface/usage/#positional-arguments","title":"Positional arguments","text":"argument default help <code>command</code>"},{"location":"command-line-interface/usage/#optional-arguments","title":"Optional arguments","text":"argument default help <code>--version</code> print version of command line interface, and exit. add argument <code>all</code> to getversions of dependencies"},{"location":"command-line-interface/usage/#grizzly-cli-init","title":"<code>grizzly-cli init</code>","text":"<p>create a skeleton project with required structure and files.</p>"},{"location":"command-line-interface/usage/#usage_1","title":"Usage","text":"<pre><code>grizzly-cli init [-h] [--grizzly-version GRIZZLY_VERSION] [--with-mq] [-y]\n                 project\n</code></pre>"},{"location":"command-line-interface/usage/#positional-arguments_1","title":"Positional arguments","text":"argument default help <code>project</code> project name, a directory will be created with this name"},{"location":"command-line-interface/usage/#optional-arguments_1","title":"Optional arguments","text":"argument default help <code>--grizzly-version</code> specify which grizzly version to use for project, default is latest <code>--with-mq</code> <code>False</code> if grizzly should be installed with IBM MQ support (external dependenciesexcluded) <code>-y, --yes</code> <code>False</code> automagically answer yes on any questions"},{"location":"command-line-interface/usage/#grizzly-cli-local","title":"<code>grizzly-cli local</code>","text":"<p>commands for running grizzly in local mode.</p>"},{"location":"command-line-interface/usage/#usage_2","title":"Usage","text":"<pre><code>grizzly-cli local [-h] {run} ...\n</code></pre>"},{"location":"command-line-interface/usage/#positional-arguments_2","title":"Positional arguments","text":"argument default help <code>subcommand</code>"},{"location":"command-line-interface/usage/#grizzly-cli-local-run","title":"<code>grizzly-cli local run</code>","text":"<p>execute load test scenarios specified in a feature file.</p>"},{"location":"command-line-interface/usage/#usage_3","title":"Usage","text":"<pre><code>grizzly-cli local run [-h] [--verbose] [-T TESTDATA_VARIABLE] [-y]\n                      [-e ENVIRONMENT_FILE] [--csv-prefix [CSV_PREFIX]]\n                      [--csv-interval CSV_INTERVAL]\n                      [--csv-flush-interval CSV_FLUSH_INTERVAL] [-l LOG_FILE]\n                      [--log-dir LOG_DIR] [--dump [DUMP]] [--dry-run]\n                      [--profile]\n                      file [file ...]\n</code></pre>"},{"location":"command-line-interface/usage/#positional-arguments_3","title":"Positional arguments","text":"argument default help <code>file</code> path to feature file with one or more scenarios"},{"location":"command-line-interface/usage/#optional-arguments_2","title":"Optional arguments","text":"argument default help <code>--verbose</code> <code>False</code> changes the log level to <code>DEBUG</code>, regardless of what it says in the featurefile. gives more verbose logging that can be useful when troubleshooting aproblem with a scenario. <code>-T, --testdata-variable</code> specified in the format <code>&lt;name&gt;=&lt;value&gt;</code>. avoids being asked for an initialvalue for a scenario variable. <code>-y, --yes</code> <code>False</code> answer yes on any questions that would require confirmation <code>-e, --environment-file</code> configuration file with environment specificinformation <code>--csv-prefix</code> write log statistics to CSV files with specified prefix, if no value isspecified the description of the gherkin Feature tag will be used, suffixed withtimestamp <code>--csv-interval</code> interval that statistics is collected for CSV files, can only be used incombination with <code>--csv-prefix</code> <code>--csv-flush-interval</code> interval that CSV statistics is flushed to disk, can only be used in combinationwith <code>--csv-prefix</code> <code>-l, --log-file</code> save all <code>grizzly-cli</code> run output in specified log file <code>--log-dir</code> log directory suffix (relative to <code>requests/logs</code>) to save log files generatedin a scenario <code>--dump</code> Dump parsed contents of file, can be useful when including scenarios from otherfeature files. If no argument is specified it will be dumped to stdout, theargument is treated as a filename <code>--dry-run</code> <code>False</code> Will setup and run anything up until when locust should start. Useful fordebugging feature files when developing new tests <code>--profile</code> <code>False</code> Enable profiling of grizzly execution, generates a .hprof file upon completion"},{"location":"command-line-interface/usage/#grizzly-cli-auth","title":"<code>grizzly-cli auth</code>","text":"<p>grizzly stateless authenticator application</p>"},{"location":"command-line-interface/usage/#usage_4","title":"Usage","text":"<pre><code>grizzly-cli auth [-h] [input]\n</code></pre>"},{"location":"command-line-interface/usage/#positional-arguments_4","title":"Positional arguments","text":"argument default help <code>input</code> where to read OTP secret, nothing specified means environment variableOTP_SECRET, <code>-</code> means stdin and anything else is considered a file"},{"location":"command-line-interface/usage/#grizzly-cli-dist","title":"<code>grizzly-cli dist</code>","text":"<p>commands for running grizzly i distributed mode.</p>"},{"location":"command-line-interface/usage/#usage_5","title":"Usage","text":"<pre><code>grizzly-cli dist [-h] [--workers WORKERS] [--id ID]\n                 [--limit-nofile LIMIT_NOFILE]\n                 [--health-retries HEALTH_RETRIES]\n                 [--health-timeout HEALTH_TIMEOUT]\n                 [--health-interval HEALTH_INTERVAL] [--registry REGISTRY]\n                 [--tty] [--wait-for-worker WAIT_FOR_WORKER]\n                 [--project-name PROJECT_NAME] [--force-build | --build |\n                 --validate-config]\n                 {build,clean,run} ...\n</code></pre>"},{"location":"command-line-interface/usage/#positional-arguments_5","title":"Positional arguments","text":"argument default help <code>subcommand</code>"},{"location":"command-line-interface/usage/#optional-arguments_3","title":"Optional arguments","text":"argument default help <code>--workers</code> <code>1</code> how many instances of the <code>workers</code> container that should be created <code>--id</code> unique identifier suffixed to compose project, should be used when the same userneeds to run more than one instance of <code>grizzly-cli</code> <code>--limit-nofile</code> <code>10001</code> set system limit \"number of open files\" <code>--health-retries</code> <code>3</code> set number of retries for health check of master container <code>--health-timeout</code> <code>3</code> set timeout in seconds for health check of master container <code>--health-interval</code> <code>5</code> set interval in seconds between health checks of master container <code>--registry</code> push built image to this registry, if the registry has authentication you needto login first <code>--tty</code> <code>False</code> start containers with a TTY enabled <code>--wait-for-worker</code> sets enviroment variable LOCUST_WAIT_FOR_WORKERS_REPORT_AFTER_RAMP_UP, whichtells master to wait this amount of time for worker report <code>--project-name</code> override project name, which otherwise would be the name of the directory wherecommand is executed in <code>--force-build</code> <code>False</code> force rebuild the grizzly projects container image (no cache) <code>--build</code> <code>False</code> rebuild the grizzly projects container images (with cache) <code>--validate-config</code> <code>False</code> validate and print compose project file"},{"location":"command-line-interface/usage/#grizzly-cli-dist-build","title":"<code>grizzly-cli dist build</code>","text":"<p>build grizzly compose project container image before running test. if worker nodes runs on different physical computers, it is mandatory to build the images before hand and push to a registry.</p> <p>if image includes IBM MQ native dependencies, the build time increases due to download times. it is possible to self- host the archive and override the download host with environment variable <code>IBM_MQ_LIB_HOST</code>.</p>"},{"location":"command-line-interface/usage/#usage_6","title":"Usage","text":"<pre><code>grizzly-cli dist build [-h] [--no-cache] [--registry REGISTRY] [--no-progress]\n                       [--verbose]\n</code></pre>"},{"location":"command-line-interface/usage/#optional-arguments_4","title":"Optional arguments","text":"argument default help <code>--no-cache</code> <code>False</code> build container image with out cache (full build) <code>--registry</code> push built image to this registry, if the registry has authentication you needto login first <code>--no-progress</code> <code>False</code> do not show a progress spinner while building <code>--verbose</code> <code>False</code> show more information"},{"location":"command-line-interface/usage/#grizzly-cli-dist-clean","title":"<code>grizzly-cli dist clean</code>","text":"<p>clean all grizzly compose project resources; containers, images, networks and volumes</p>"},{"location":"command-line-interface/usage/#usage_7","title":"Usage","text":"<pre><code>grizzly-cli dist clean [-h] [--no-images] [--no-networks]\n</code></pre>"},{"location":"command-line-interface/usage/#optional-arguments_5","title":"Optional arguments","text":"argument default help <code>--no-images</code> <code>True</code> do not remove images <code>--no-networks</code> <code>True</code> do not remove networks"},{"location":"command-line-interface/usage/#grizzly-cli-dist-run","title":"<code>grizzly-cli dist run</code>","text":"<p>execute load test scenarios specified in a feature file.</p>"},{"location":"command-line-interface/usage/#usage_8","title":"Usage","text":"<pre><code>grizzly-cli dist run [-h] [--verbose] [-T TESTDATA_VARIABLE] [-y]\n                     [-e ENVIRONMENT_FILE] [--csv-prefix [CSV_PREFIX]]\n                     [--csv-interval CSV_INTERVAL]\n                     [--csv-flush-interval CSV_FLUSH_INTERVAL] [-l LOG_FILE]\n                     [--log-dir LOG_DIR] [--dump [DUMP]] [--dry-run]\n                     [--profile]\n                     file [file ...]\n</code></pre>"},{"location":"command-line-interface/usage/#positional-arguments_6","title":"Positional arguments","text":"argument default help <code>file</code> path to feature file with one or more scenarios"},{"location":"command-line-interface/usage/#optional-arguments_6","title":"Optional arguments","text":"argument default help <code>--verbose</code> <code>False</code> changes the log level to <code>DEBUG</code>, regardless of what it says in the featurefile. gives more verbose logging that can be useful when troubleshooting aproblem with a scenario. <code>-T, --testdata-variable</code> specified in the format <code>&lt;name&gt;=&lt;value&gt;</code>. avoids being asked for an initialvalue for a scenario variable. <code>-y, --yes</code> <code>False</code> answer yes on any questions that would require confirmation <code>-e, --environment-file</code> configuration file with environment specificinformation <code>--csv-prefix</code> write log statistics to CSV files with specified prefix, if no value isspecified the description of the gherkin Feature tag will be used, suffixed withtimestamp <code>--csv-interval</code> interval that statistics is collected for CSV files, can only be used incombination with <code>--csv-prefix</code> <code>--csv-flush-interval</code> interval that CSV statistics is flushed to disk, can only be used in combinationwith <code>--csv-prefix</code> <code>-l, --log-file</code> save all <code>grizzly-cli</code> run output in specified log file <code>--log-dir</code> log directory suffix (relative to <code>requests/logs</code>) to save log files generatedin a scenario <code>--dump</code> Dump parsed contents of file, can be useful when including scenarios from otherfeature files. If no argument is specified it will be dumped to stdout, theargument is treated as a filename <code>--dry-run</code> <code>False</code> Will setup and run anything up until when locust should start. Useful fordebugging feature files when developing new tests <code>--profile</code> <code>False</code> Enable profiling of grizzly execution, generates a .hprof file upon completion"},{"location":"command-line-interface/usage/#grizzly-cli-keyvault","title":"<code>grizzly-cli keyvault</code>","text":"<p>grizzly keyvault integration</p>"},{"location":"command-line-interface/usage/#usage_9","title":"Usage","text":"<pre><code>grizzly-cli keyvault [-h] -f ENV_FILE [--vault-name URL]\n                     {import,export,diff} ...\n</code></pre>"},{"location":"command-line-interface/usage/#positional-arguments_7","title":"Positional arguments","text":"argument default help <code>subcommand</code>"},{"location":"command-line-interface/usage/#optional-arguments_7","title":"Optional arguments","text":"argument default help <code>-f, --file</code> path to the grizzly environment configuration file <code>--vault-name</code> keyvault url"},{"location":"command-line-interface/usage/#grizzly-cli-keyvault-import","title":"<code>grizzly-cli keyvault import</code>","text":"<p>import grizzly environment configuration from keyvault secrets</p>"},{"location":"command-line-interface/usage/#usage_10","title":"Usage","text":"<pre><code>grizzly-cli keyvault import [-h] [--verbose] [--dry-run] [-k KEYS]\n</code></pre>"},{"location":"command-line-interface/usage/#optional-arguments_8","title":"Optional arguments","text":"argument default help <code>--verbose</code> <code>False</code> enable verbose output <code>--dry-run</code> <code>False</code> do not write to keyvault <code>-k, --key</code> filter on specified keys"},{"location":"command-line-interface/usage/#grizzly-cli-keyvault-export","title":"<code>grizzly-cli keyvault export</code>","text":"<p>export grizzly environment configuration to keyvault secrets</p>"},{"location":"command-line-interface/usage/#usage_11","title":"Usage","text":"<pre><code>grizzly-cli keyvault export [-h] [-g KEY] [--verbose] [--dry-run] [-k KEYS]\n</code></pre>"},{"location":"command-line-interface/usage/#optional-arguments_9","title":"Optional arguments","text":"argument default help <code>-g, --global</code> <code>[]</code> environment configuration keys that are global <code>--verbose</code> <code>False</code> enable verbose output <code>--dry-run</code> <code>False</code> do not write to keyvault <code>-k, --key</code> filter on specified keys"},{"location":"command-line-interface/usage/#grizzly-cli-keyvault-diff","title":"<code>grizzly-cli keyvault diff</code>","text":"<p>compare two environment configuration files</p>"},{"location":"command-line-interface/usage/#usage_12","title":"Usage","text":"<pre><code>grizzly-cli keyvault diff [-h] orig_file\n</code></pre>"},{"location":"command-line-interface/usage/#positional-arguments_8","title":"Positional arguments","text":"argument default help <code>orig_file</code> file to compare -f/--file with"},{"location":"command-line-interface/usage/metadata/","title":"Metadata","text":"<p>It is possible to add metadata in feature files that <code>grizzly-cli</code> will use. Metadata comments can be added anywhere in the feature file, but it is recommended to add them in the top for readability.</p>"},{"location":"command-line-interface/usage/metadata/#arguments","title":"Arguments","text":"<p>Inject <code>grizzly-cli</code> arguments via metadata comments. When executing a feature file, <code>grizzly-cli</code> will add the specified arguments automagically, if they match the command being executed.</p> <p>This makes it possible to add arguments needed for a specific feature file to be documented in the feature file itself, and one does not have to remember all combinations in memory.</p>"},{"location":"command-line-interface/usage/metadata/#format","title":"Format","text":"<pre><code># grizzly-cli &lt;[sub]parser&gt; &lt;argument&gt;\n</code></pre> <p>No validation is done that an argument actually exists in the subparser, other than that <code>grizzly-cli</code> will fail with an argument error. Which is solved by checking {@link command-line-interface.usage} and correct the metadata comments.</p>"},{"location":"command-line-interface/usage/metadata/#examples","title":"Examples","text":"<p>E.g., the <code>run</code> subparser is used by both <code>dist</code> and <code>local</code>, so when specifying an metadata comment for <code>run</code> arguments it should be:</p> example.feature<pre><code># grizzly-cli run --verbose\nFeature: Example Feature\n  Scenario: Example Scenario\n    ...\n</code></pre> <p>This means that executing <code>example.feature</code> either in mode <code>local</code> or <code>dist</code>, the argument <code>--verbose</code> will be injected unless already manually specified.</p> <pre><code>grizzly-cli local run example.feature -&gt; grizzly-cli local run example.feature --verbose\ngrizzly-cli dist run example.feature -&gt; grizzly-cli dist run example.feature --verbose\n</code></pre> <p>If metadata comments adds arguments for a subparser that is not used when executing the feature file the following message will be seen when executing <code>grizzly-cli</code>:</p> <pre><code>?? ignoring &lt;arguments&gt;\n</code></pre> <p>Given the following feature file:</p> example-dist.feature<pre><code># grizzly-cli dist --health-retries 999\n# grizzly-cli dist --workers 6\n# grizzly-cli run --verbose\nFeature: Example Feature\n  Scenario: Example Scenario\n    ...\n</code></pre> <p>When executed with <code>grizzly-cli local run example-dist.feature</code>, the output will contain:</p> <pre><code>?? ignoring dist --health-retries 999\n?? ignoring dist --workers 6\n</code></pre> <p>And the command that is actually executed is <code>grizzly local run example-dist.feature --verbose</code>.</p>"},{"location":"command-line-interface/usage/metadata/#notices","title":"Notices","text":"<p>It is possible to tell <code>grizzly-cli</code> show confirmation notices with metadata in a a feature file.</p> <p>This is useful to remind the user about manual steps och checks that should be done before running the feature.</p>"},{"location":"command-line-interface/usage/metadata/#format_1","title":"Format","text":"<pre><code># grizzly-cli:notice &lt;message&gt;\n</code></pre> <p>Everything after <code># grizzly-cli:notice</code> (notice the space) will be displayed in the confirmation prompt.</p>"},{"location":"command-line-interface/usage/metadata/#examples_1","title":"Examples","text":"example.feature<pre><code># grizzly-cli:notice have you piped the fork in a loop?\nFeature: Example Feature\n  Scenario: Example Scenario\n    ...\n</code></pre> <p>Running <code>example.feature</code> will in additional to the normal <code>grizzly-cli</code> input/output also trigger the following prompt:</p> <pre><code>have you piped the fork in a loop? [y/n]\n</code></pre> <p>If <code>run</code> argument <code>-y/--yes</code> is provided, it will only print the message and not ask for confirmation.</p>"},{"location":"development/code_of_conduct/","title":"Contributor Covenant Code of Conduct","text":""},{"location":"development/code_of_conduct/#our-pledge","title":"Our Pledge","text":"<p>We as members, contributors, and leaders pledge to make participation in our community a harassment-free experience for everyone, regardless of age, body size, visible or invisible disability, ethnicity, sex characteristics, gender identity and expression, level of experience, education, socio-economic status, nationality, personal appearance, race, religion, or sexual identity and orientation.</p> <p>We pledge to act and interact in ways that contribute to an open, welcoming, diverse, inclusive, and healthy community.</p>"},{"location":"development/code_of_conduct/#our-standards","title":"Our Standards","text":"<p>Examples of behavior that contributes to a positive environment for our community include:</p> <ul> <li>Demonstrating empathy and kindness toward other people</li> <li>Being respectful of differing opinions, viewpoints, and experiences</li> <li>Giving and gracefully accepting constructive feedback</li> <li>Accepting responsibility and apologizing to those affected by our mistakes,   and learning from the experience</li> <li>Focusing on what is best not just for us as individuals, but for the   overall community</li> </ul> <p>Examples of unacceptable behavior include:</p> <ul> <li>The use of sexualized language or imagery, and sexual attention or   advances of any kind</li> <li>Trolling, insulting or derogatory comments, and personal or political attacks</li> <li>Public or private harassment</li> <li>Publishing others' private information, such as a physical or email   address, without their explicit permission</li> <li>Other conduct which could reasonably be considered inappropriate in a   professional setting</li> </ul>"},{"location":"development/code_of_conduct/#enforcement-responsibilities","title":"Enforcement Responsibilities","text":"<p>Community leaders are responsible for clarifying and enforcing our standards of acceptable behavior and will take appropriate and fair corrective action in response to any behavior that they deem inappropriate, threatening, offensive, or harmful.</p> <p>Community leaders have the right and responsibility to remove, edit, or reject comments, commits, code, wiki edits, issues, and other contributions that are not aligned to this Code of Conduct, and will communicate reasons for moderation decisions when appropriate.</p>"},{"location":"development/code_of_conduct/#scope","title":"Scope","text":"<p>This Code of Conduct applies within all community spaces, and also applies when an individual is officially representing the community in public spaces. Examples of representing our community include using an official e-mail address, posting via an official social media account, or acting as an appointed representative at an online or offline event.</p>"},{"location":"development/code_of_conduct/#enforcement","title":"Enforcement","text":"<p>Instances of abusive, harassing, or otherwise unacceptable behavior may be reported to the community leaders responsible for enforcement at opensource@biometria.se. All complaints will be reviewed and investigated promptly and fairly.</p> <p>All community leaders are obligated to respect the privacy and security of the reporter of any incident.</p>"},{"location":"development/code_of_conduct/#enforcement-guidelines","title":"Enforcement Guidelines","text":"<p>Community leaders will follow these Community Impact Guidelines in determining the consequences for any action they deem in violation of this Code of Conduct:</p>"},{"location":"development/code_of_conduct/#1-correction","title":"1. Correction","text":"<p>Community Impact: Use of inappropriate language or other behavior deemed unprofessional or unwelcome in the community.</p> <p>Consequence: A private, written warning from community leaders, providing clarity around the nature of the violation and an explanation of why the behavior was inappropriate. A public apology may be requested.</p>"},{"location":"development/code_of_conduct/#2-warning","title":"2. Warning","text":"<p>Community Impact: A violation through a single incident or series of actions.</p> <p>Consequence: A warning with consequences for continued behavior. No interaction with the people involved, including unsolicited interaction with those enforcing the Code of Conduct, for a specified period of time. This includes avoiding interactions in community spaces as well as external channels like social media. Violating these terms may lead to a temporary or permanent ban.</p>"},{"location":"development/code_of_conduct/#3-temporary-ban","title":"3. Temporary Ban","text":"<p>Community Impact: A serious violation of community standards, including sustained inappropriate behavior.</p> <p>Consequence: A temporary ban from any sort of interaction or public communication with the community for a specified period of time. No public or private interaction with the people involved, including unsolicited interaction with those enforcing the Code of Conduct, is allowed during this period. Violating these terms may lead to a permanent ban.</p>"},{"location":"development/code_of_conduct/#4-permanent-ban","title":"4. Permanent Ban","text":"<p>Community Impact: Demonstrating a pattern of violation of community standards, including sustained inappropriate behavior,  harassment of an individual, or aggression toward or disparagement of classes of individuals.</p> <p>Consequence: A permanent ban from any sort of public interaction within the community.</p>"},{"location":"development/code_of_conduct/#attribution","title":"Attribution","text":"<p>This Code of Conduct is adapted from the Contributor Covenant, version 2.0, available at https://www.contributor-covenant.org/version/2/0/code_of_conduct.html.</p> <p>Community Impact Guidelines were inspired by Mozilla's code of conduct enforcement ladder.</p> <p>For answers to common questions about this code of conduct, see the FAQ at https://www.contributor-covenant.org/faq. Translations are available at https://www.contributor-covenant.org/translations.</p>"},{"location":"development/guide/","title":"Development Guide","text":"<p>This guide covers everything you need to know to develop in the grizzly repository.</p>"},{"location":"development/guide/#repository-structure","title":"Repository Structure","text":"<p>This is a monorepo for all Grizzly-related projects, managed as a uv workspace.</p> <ul> <li>Language: Python</li> <li>Package Manager: uv</li> <li>Build System: hatchling</li> <li>Linting &amp; Formatting: ruff</li> <li>Testing: pytest</li> </ul>"},{"location":"development/guide/#packages","title":"Packages","text":"<ol> <li>grizzly-loadtester-common - Shared code between packages (exceptions, constants, utilities)</li> <li>grizzly-loadtester - Core framework with locust messages, test data producer/consumer, gherkin parser, and load users</li> <li>grizzly-loadtester-cli - Command line interface for running tests, Azure Keyvault integration, TOTP generator, project scaffolding</li> <li>grizzly-loadtester-ls - Language server implementation using LSP protocol</li> <li>vscode extension - Visual Studio Code extension integrating the language server</li> <li>grizzly-docs - MkDocs-based documentation hosted on GitHub Pages</li> </ol>"},{"location":"development/guide/#setting-up-development-environment","title":"Setting Up Development Environment","text":""},{"location":"development/guide/#prerequisites","title":"Prerequisites","text":"<ul> <li>Python 3.10 or higher</li> <li>uv package manager</li> <li>Node.js 24 (for VS Code extension development)</li> <li>Git</li> </ul>"},{"location":"development/guide/#installing-dependencies","title":"Installing Dependencies","text":"<p>Install all dependencies for all packages (preserving the lock file):</p> <pre><code>uv sync --locked -p 3.13 --active --all-packages --all-groups\n</code></pre> <p>Important: Always use <code>--locked</code> to ensure reproducible builds by preserving the dependency lock file.</p>"},{"location":"development/guide/#development-container","title":"Development Container","text":"<p>This repository includes a dev container configuration for VS Code, which provides a pre-configured development environment with all necessary tools.</p>"},{"location":"development/guide/#running-tests","title":"Running Tests","text":"<p>The repository uses <code>hatch</code> environments for running tests across different Python versions.</p>"},{"location":"development/guide/#unit-tests","title":"Unit Tests","text":"<p>Run unit tests for a specific package:</p> <pre><code># Framework\nhatch run test:framework-unit\n\n# CLI\nhatch run test:cli-unit\n\n# Language Server\nhatch run test:ls-unit\n\n# Common\nhatch run test:common-unit\n\n# Docs\nhatch run test:docs-unit\n</code></pre>"},{"location":"development/guide/#end-to-end-tests","title":"End-to-End Tests","text":"<p>Run e2e tests for packages that support them:</p> <pre><code># Framework (local mode)\nhatch run test:framework-e2e-local\n\n# Framework (distributed mode)\nhatch run test:framework-e2e-dist\n\n# Framework (example tests)\nhatch run test:framework-e2e-example\n\n# CLI\nhatch run test:cli-e2e\n\n# Language Server\nhatch run test:ls-e2e\n</code></pre>"},{"location":"development/guide/#all-tests","title":"All Tests","text":"<p>Run all tests (unit + e2e) for a package:</p> <pre><code>hatch run test:framework-all\nhatch run test:cli-all\nhatch run test:ls-all\n</code></pre>"},{"location":"development/guide/#test-matrix","title":"Test Matrix","text":"<p>Tests run across multiple Python versions (3.10, 3.11, 3.12, 3.13). Use the matrix syntax:</p> <pre><code>hatch run +py=3.13 test:framework-unit\n</code></pre>"},{"location":"development/guide/#code-quality","title":"Code Quality","text":""},{"location":"development/guide/#formatting","title":"Formatting","text":"<p>Format all code using ruff:</p> <pre><code>hatch run lint:format\n</code></pre>"},{"location":"development/guide/#type-checking","title":"Type Checking","text":"<p>Run mypy type checking:</p> <pre><code>hatch run lint:types\n</code></pre>"},{"location":"development/guide/#linting","title":"Linting","text":"<p>Run ruff linting checks:</p> <pre><code>hatch run lint:check\n</code></pre>"},{"location":"development/guide/#development-patterns","title":"Development Patterns","text":""},{"location":"development/guide/#code-style","title":"Code Style","text":"<ul> <li>All code should be Pythonic and follow PEP-8</li> <li>Use type hints where appropriate</li> <li>Write descriptive docstrings for public functions and classes</li> </ul>"},{"location":"development/guide/#package-dependencies","title":"Package Dependencies","text":"<ol> <li>Keep shared code in <code>grizzly-loadtester-common</code></li> <li>Don't duplicate code across packages</li> <li> <p>Move common utilities to the common package</p> </li> <li> <p>Use workspace dependencies in <code>pyproject.toml</code> <pre><code>[project]\ndependencies = [\n    \"grizzly-loadtester-common\",\n]\n</code></pre></p> </li> <li> <p>Always preserve <code>uv.lock</code></p> </li> <li>Use <code>uv sync --locked</code> when installing</li> <li>Commit the lock file to ensure reproducible builds</li> </ol>"},{"location":"development/guide/#testing-strategy","title":"Testing Strategy","text":"<ol> <li>Unit Tests: Mock external dependencies, fast execution</li> <li>E2E Tests: Run against real services, validate full functionality</li> <li>Coverage: All code must be covered with unit tests</li> <li>Group Tests: Organize tests by functionality</li> </ol>"},{"location":"development/guide/#adding-a-new-package","title":"Adding a New Package","text":"<p>When adding a new package to the workspace:</p> <ol> <li>Create the package directory with <code>pyproject.toml</code></li> <li>Update root <code>pyproject.toml</code>:</li> <li><code>tool.pytest.ini_options</code></li> <li><code>tool.coverage.path</code></li> <li><code>tool.mypy</code></li> <li>Add test scripts to <code>tool.hatch.envs.test.scripts</code></li> <li>Run <code>uv sync --locked</code> to update the lock file</li> </ol>"},{"location":"development/guide/#release-process","title":"Release Process","text":"<p>Releases are automated via the <code>.github/workflows/release.yaml</code> workflow.</p>"},{"location":"development/guide/#release-triggers","title":"Release Triggers","text":"<p>The release workflow can be triggered in two ways:</p> <ol> <li>Automatic (PR Merge): When a PR is merged to <code>main</code> with one of these labels:</li> <li><code>major</code> - Breaking changes (X.0.0)</li> <li><code>minor</code> - New features (0.X.0)</li> <li> <p><code>patch</code> - Bug fixes (0.0.X)</p> </li> <li> <p>Manual (Workflow Dispatch): Manually trigger the workflow from GitHub Actions UI</p> </li> <li>Specify the PR number</li> <li>Optionally enable dry-run mode (no actual release)</li> </ol>"},{"location":"development/guide/#release-workflow-steps","title":"Release Workflow Steps","text":"<ol> <li>Prerequisites Job</li> <li>Validates the PR and checks for the version bump label</li> <li>Detects which packages changed using <code>.github/changes-filter.yaml</code></li> <li> <p>Maps changes to packages and their dependencies</p> </li> <li> <p>UV Release Job (Python packages)</p> </li> <li>Builds packages using <code>uv build --package &lt;package&gt; --sdist --wheel</code></li> <li>Creates a git tag (e.g., <code>framework@v1.2.3</code>)</li> <li>Publishes to PyPI using trusted publishing (OIDC)</li> <li> <p>Pushes the tag only if all steps succeed</p> </li> <li> <p>NPM Release Job (VS Code extension)</p> </li> <li>Builds the extension using <code>@vscode/vsce package</code></li> <li>Creates a git tag (e.g., <code>vscode-extension@v1.2.3</code>)</li> <li>Publishes to VS Code Marketplace </li> <li> <p>Pushes the tag only if all steps succeed</p> </li> <li> <p>Documentation Job</p> </li> <li>Builds and deploys documentation to GitHub Pages</li> <li>Only runs if previous jobs succeed</li> </ol>"},{"location":"development/guide/#version-management","title":"Version Management","text":"<p>Versions are managed automatically using:</p> <ul> <li> <p>Python packages: <code>hatch-vcs</code> with git tags matching pattern in <code>pyproject.toml</code> <pre><code>[tool.hatch.version]\nsource = \"vcs\"\nraw-options.scm.git.describe_command = \"git describe --tags --match 'framework@v*[0-9]*'\"\n</code></pre></p> </li> <li> <p>NPM packages: <code>package.local.json</code> defines the tag pattern   <pre><code>{\n  \"tag\": {\n    \"pattern\": \"ls/&lt;IDE&gt;@v*[0-9]*\"\n  }\n}\n</code></pre></p> </li> </ul>"},{"location":"development/guide/#release-requirements","title":"Release Requirements","text":"<p>For a package to be releasable:</p> <ol> <li>Python packages must have:</li> <li> <p><code>tool.hatch.version.raw-options.scm.git.describe_command</code> in <code>pyproject.toml</code></p> </li> <li> <p>NPM packages must have:</p> </li> <li> <p><code>tag.pattern</code> in <code>package.local.json</code></p> </li> <li> <p>Workflow files (.github/workflows/) cannot be modified in the same PR</p> </li> <li>The <code>map-changes.py</code> script will fail if workflow changes are detected during release</li> <li>This prevents permission issues with <code>GITHUB_TOKEN</code> when pushing tags</li> </ol>"},{"location":"development/guide/#tag-management","title":"Tag Management","text":"<p>The <code>setup-release</code> action creates tags during the job and manages them in a cleanup phase:</p> <ul> <li>Success: Tag is pushed to the repository</li> <li>Failure: Tag is deleted locally (not pushed)</li> <li>Dry-run: Tag is deleted (no push)</li> </ul>"},{"location":"development/guide/#secrets-required","title":"Secrets Required","text":"<p>Configure these secrets in your GitHub repository:</p> <ol> <li><code>VSCE_TOKEN</code>: Personal Access Token for VS Code Marketplace</li> <li>Required for publishing the VS Code extension</li> <li> <p>Get from Azure DevOps</p> </li> <li> <p><code>GITHUB_TOKEN</code>: Automatically provided by GitHub Actions</p> </li> <li>Used for API access and documentation deployment</li> </ol>"},{"location":"development/guide/#manual-release-example","title":"Manual Release Example","text":"<pre><code># Trigger via GitHub Actions UI\n# 1. Go to Actions \u2192 Release\n# 2. Click \"Run workflow\"\n# 3. Select branch: main\n# 4. Enter PR number: 123\n# 5. Enable dry-run: true (optional)\n# 6. Click \"Run workflow\"\n</code></pre>"},{"location":"development/guide/#dry-run-mode","title":"Dry-Run Mode","text":"<p>Test the release process without actually publishing:</p> <pre><code># In workflow_dispatch, set dry-run: true\n</code></pre> <p>This will: - Create and validate tags - Build packages - Skip actual publishing to PyPI/VS Code Marketplace - Delete tags at the end</p>"},{"location":"development/guide/#vs-code-extension-development","title":"VS Code Extension Development","text":""},{"location":"development/guide/#building-the-extension","title":"Building the Extension","text":"<pre><code>cd editor-support/clients/vscode\nnpm install\nnpm run compile\n</code></pre>"},{"location":"development/guide/#watch-mode","title":"Watch Mode","text":"<p>For active development with auto-rebuild:</p> <pre><code>npm run tsc-watch\n</code></pre> <p>Or use the VS Code task:</p> <pre><code># Press Cmd/Ctrl+Shift+B \u2192 Select \"tsc watch\"\n</code></pre>"},{"location":"development/guide/#testing-the-extension","title":"Testing the Extension","text":"<ol> <li>Open the extension project in VS Code</li> <li>Press <code>F5</code> to launch Extension Development Host</li> <li>The extension will be loaded in a new VS Code window</li> </ol>"},{"location":"development/guide/#important-notes","title":"Important Notes","text":"<ul> <li>VS Code extension requires rebuild after language server changes</li> <li>Always run tests after modifying language server code</li> <li>Extension source is in TypeScript, compiled to JavaScript in <code>dist/</code></li> </ul>"},{"location":"development/guide/#documentation","title":"Documentation","text":"<p>The documentation is built using MkDocs with a custom plugin for API reference generation.</p>"},{"location":"development/guide/#building-documentation","title":"Building Documentation","text":"<pre><code>uv run mkdocs build\n</code></pre>"},{"location":"development/guide/#serving-documentation-locally","title":"Serving Documentation Locally","text":"<pre><code>uv run mkdocs serve\n</code></pre> <p>Then visit http://localhost:8000</p>"},{"location":"development/guide/#documentation-structure","title":"Documentation Structure","text":"<ul> <li><code>docs/site/</code> - Static markdown pages</li> <li><code>docs/build/</code> - Generated output (deployed to GitHub Pages)</li> <li>Custom MkDocs plugin generates API reference from code</li> </ul>"},{"location":"development/guide/#common-gotchas","title":"Common Gotchas","text":"<ol> <li>Always use <code>uv sync --locked</code></li> <li>Preserves dependency locks</li> <li> <p>Ensures reproducible builds</p> </li> <li> <p>E2E tests require additional setup</p> </li> <li>See package-specific READMEs</li> <li> <p>May need external services (IBM MQ, Azure services, etc.)</p> </li> <li> <p>VS Code extension rebuild</p> </li> <li>Required after language server changes</li> <li> <p>Run <code>npm run compile</code> or use watch mode</p> </li> <li> <p>Python version compatibility</p> </li> <li>Test across all supported versions (3.10-3.13)</li> <li> <p>Use <code>hatch</code> matrix environments</p> </li> <li> <p>Workflow file changes</p> </li> <li>Cannot be released in the same PR as package changes</li> <li>Will cause the release workflow to fail</li> <li>Create separate PRs for workflow and package changes</li> </ol>"},{"location":"development/guide/#troubleshooting","title":"Troubleshooting","text":""},{"location":"development/guide/#dependency-issues","title":"Dependency Issues","text":"<p>If you encounter dependency conflicts:</p> <pre><code># Remove the lock file and resync\nrm uv.lock\nuv sync -p 3.13 --active --all-packages --all-groups\n</code></pre>"},{"location":"development/guide/#test-failures","title":"Test Failures","text":"<ol> <li>Check if dependencies are installed: <code>uv sync --locked</code></li> <li>Verify Python version: <code>python --version</code></li> <li>Check for environment-specific issues in package READMEs</li> <li>Run with verbose output: <code>pytest -vv</code></li> </ol>"},{"location":"development/guide/#release-failures","title":"Release Failures","text":"<ol> <li>Check PR has correct version label (major/minor/patch)</li> <li>Verify secrets are configured (VSCE_TOKEN)</li> <li>Ensure workflow files aren't modified in the PR</li> <li>Check GitHub Actions logs for detailed error messages</li> <li>Verify package has release configuration (tag pattern in pyproject.toml or package.local.json)</li> </ol>"},{"location":"development/guide/#contributing","title":"Contributing","text":"<ol> <li>Create a feature branch from <code>main</code></li> <li>Make your changes following the development patterns</li> <li>Write tests for new functionality</li> <li>Run linting and type checking</li> <li>Create a PR with appropriate labels (major/minor/patch for releases)</li> <li>Ensure all CI checks pass</li> </ol>"},{"location":"development/guide/#additional-resources","title":"Additional Resources","text":"<ul> <li>Grizzly Documentation</li> <li>uv Documentation</li> <li>hatch Documentation</li> <li>pytest Documentation</li> <li>ruff Documentation</li> <li>Language Server Protocol</li> </ul>"},{"location":"editor-support/","title":"Language server","text":"<p>It can be hard to remember all the step expressions by heart; that's why <code>grizzly-ls</code> exists! Which is a server implementation of LSP, providing auto-complete of step expressions.</p> <p>The server does not do much by itself, you have to install a client/extension that speaks LSP with your editor.</p> <p>The Language Server Protocol (LSP) defines the protocol used between an editor or IDE and a language server that provides language  features like auto complete, go to definition, find all references etc. The goal of the Language Server Index Format (LSIF, pronounced like \"else if\") is to support rich code navigation in development tools or a Web UI without needing a local copy of the source code, read more.</p> <p>The server has implemented the following features:</p> <ul> <li>Completion (auto-completion of gherkin keywords, step expressions etc.)</li> <li>Hover (show step expression help)</li> <li>Code actions (quick fixes for common problems)</li> <li>Definition (link to requests files in project, grizzly style, or any variable value with prefixed <code>file://</code>)</li> <li>Diagnostics (make sure that a feature file has correct syntax and is runnable)</li> </ul>"},{"location":"editor-support/changelog/","title":"Changelog","text":""},{"location":"editor-support/changelog/#v2120-legacy","title":"v2.1.20 legacy","text":"<ul> <li><code>843f5962</code>: fix conflicinting jinja2 dependency version with grizzly (#73)</li> <li><code>2f3d6fa1</code>: do not fail workspace diagnostics if all open files has been closed (#72)</li> </ul>"},{"location":"editor-support/changelog/#v2119","title":"v2.1.19","text":"<ul> <li><code>e25a6016</code>: better logging when failing to load steps from a path (#71)</li> </ul>"},{"location":"editor-support/changelog/#v2118","title":"v2.1.18","text":"<ul> <li><code>08831eb5</code>: render feature file in cli (#70)</li> </ul>"},{"location":"editor-support/changelog/#v2117","title":"v2.1.17","text":"<ul> <li><code>02408e78</code>: use new interface (if available) to get what values to permutate step expressions (#69)</li> </ul>"},{"location":"editor-support/changelog/#v2116","title":"v2.1.16","text":"<ul> <li><code>c9357adc</code>: fix build (#68)</li> </ul>"},{"location":"editor-support/changelog/#v2115","title":"v2.1.15","text":"<ul> <li><code>1e053bf5</code>: update packages to fix a couple of CVEs (#67)</li> <li><code>af74e592</code>: fixed rendering bugs (#66)</li> </ul>"},{"location":"editor-support/changelog/#v2114","title":"v2.1.14","text":"<ul> <li><code>ee0f1735</code>: conditional steps render (#65)</li> </ul>"},{"location":"editor-support/changelog/#v2113","title":"v2.1.13","text":"<ul> <li><code>b5839584</code>: better test coverage for new features (#64)</li> </ul>"},{"location":"editor-support/changelog/#v2112","title":"v2.1.12","text":"<ul> <li><code>704210e1</code>: fixed sanatizing bug related to empty lines (#63)</li> </ul>"},{"location":"editor-support/changelog/#v2111","title":"v2.1.11","text":"<ul> <li><code>2e869b0a</code>: error handling and fixes (#62)</li> </ul>"},{"location":"editor-support/changelog/#v2110","title":"v2.1.10","text":"<ul> <li><code>d78fb528</code>: support grizzly-cli#94 (#61)</li> </ul>"},{"location":"editor-support/changelog/#v219","title":"v2.1.9","text":"<ul> <li><code>0201da95</code>: Removed duplicate logging</li> <li><code>1eff9775</code>: Update after review + server startup error msg</li> <li><code>576c01e2</code>: debugpy typing stub</li> <li><code>c9d813fc</code>: Improved support for relative paths + debugging</li> </ul>"},{"location":"editor-support/changelog/#v218","title":"v2.1.8","text":"<ul> <li><code>1424bf70</code>: fix relative feature-file paths in scenario tag (#59)</li> </ul>"},{"location":"editor-support/changelog/#v217","title":"v2.1.7","text":"<ul> <li><code>a37beb0d</code>: fixed bug related to variable completion (#58)</li> <li><code>e59e8152</code>: typo for black line-length</li> <li><code>89ec6cb4</code>: some projects wraps behave step decorators</li> <li><code>bffe03f1</code>: debug step definition for implementation</li> </ul>"},{"location":"editor-support/changelog/#v216","title":"v2.1.6","text":"<ul> <li><code>f2cbabcd</code>: handle the slow mac os github runners</li> <li><code>62ee03a2</code>: make sure file locations are absolute paths</li> </ul>"},{"location":"editor-support/changelog/#v215","title":"v2.1.5","text":"<ul> <li><code>2d7abe69</code>: Typing</li> <li><code>6eb3a6f1</code>: Updated after review</li> <li><code>2cc6f34a</code>: Updated after review and put path matching in separate method</li> <li><code>c273dd6e</code>: Added settings for ignoring source files</li> </ul>"},{"location":"editor-support/changelog/#v214","title":"v2.1.4","text":"<ul> <li><code>0a7d8f4d</code>: support for grizzly <code>{% scenario ... %}</code> tag (#54)</li> <li><code>d6ec56a6</code>: validate gherkin/feature-files via cli (#53)</li> <li><code>bf6bc72e</code>: clear diagnostics for a file when it is closed (#52)</li> </ul>"},{"location":"editor-support/changelog/#v213","title":"v2.1.3","text":"<ul> <li><code>3ba0c764</code>: completion improvements (#51)</li> <li><code>30ca84e6</code>: better information load step loading fails (#50)</li> </ul>"},{"location":"editor-support/changelog/#v212","title":"v2.1.2","text":"<ul> <li><code>0db16c50</code>: bug fixes related to comments, freetext and tables (#49)</li> </ul>"},{"location":"editor-support/changelog/#v211","title":"v2.1.1","text":"<ul> <li><code>391485ca</code>: fixed diagnostics bugs (#48)</li> </ul>"},{"location":"editor-support/changelog/#v210","title":"v2.1.0","text":"<ul> <li><code>f0c3a6bc</code>: major refactoring (#47)</li> <li><code>80853b14</code>: implement <code>textDocument/diagnostic</code> (#46)</li> <li><code>adab2fce</code>: \"go to definition\" brings up the step implementation (#45)</li> <li><code>bdb7dadc</code>: use <code>text_edit</code> instead of <code>insert_text</code> in <code>CompletionItem</code> (#44)</li> <li><code>5841a74d</code>: complete partial variable names (#43)</li> <li><code>b84296d1</code>: normalize and extra validate <code>grizzly.variable_pattern</code> client settings (#42)</li> <li><code>e5217820</code>: better logic on which directories to check for step implementations (#41)</li> <li><code>05f32366</code>: fix broken <code>--version</code> (#40)</li> </ul>"},{"location":"editor-support/changelog/#v200","title":"v2.0.0","text":"<ul> <li><code>229272e7</code>: fixed workflow syntax error (#39)</li> <li><code>65aeefd0</code>: add activationEvents again (#38)</li> <li><code>d45635e3</code>: general behave support (#37)</li> <li><code>caf2b07b</code>: complete variable names (#36)</li> <li><code>9c28a8e3</code>: removed git dependency (#34)</li> <li><code>fd15b6de</code>: add python 3.11 support (#33)</li> </ul>"},{"location":"editor-support/changelog/#v101","title":"v1.0.1","text":"<ul> <li><code>47629704</code>: Bump json5 from 1.0.1 to 1.0.2 in /client/vscode (#29)</li> <li><code>d0293d8a</code>: pip-licenses 4.2.0 is broken, exclude (#32)</li> <li><code>24018074</code>: fixes Biometria-se/grizzly#220 (#31)</li> <li><code>85e7a37b</code>: refreshed devcontainer, so it builds (#30)</li> </ul>"},{"location":"editor-support/changelog/#v100","title":"v1.0.0","text":"<ul> <li><code>e174a6d7</code>: upgrade to pygls 1.0.0 (#28)</li> </ul>"},{"location":"editor-support/changelog/#v009","title":"v0.0.9","text":"<ul> <li><code>08f3a4f6</code>: updated action versions to get rid of warnings (#27)</li> </ul>"},{"location":"editor-support/changelog/#v008","title":"v0.0.8","text":"<ul> <li><code>1ca7171d</code>: return snippet strings for step expressions containing variables (#26)</li> <li><code>29c03082</code>: step completion improvements (#25)</li> </ul>"},{"location":"editor-support/changelog/#v007","title":"v0.0.7","text":"<ul> <li><code>b082f8af</code>: fix hover help for alias step keywords (#24)</li> <li><code>abb3c607</code>: provide <code>name</code> and <code>version</code> in <code>LanguageServer</code> constructor (#23)</li> </ul>"},{"location":"editor-support/changelog/#v006","title":"v0.0.6","text":"<ul> <li><code>a4f553ed</code>: only try to find help text if keyword is valid (#22)</li> </ul>"},{"location":"editor-support/changelog/#v005","title":"v0.0.5","text":"<ul> <li><code>0b734bc1</code>: map step implementation docs to correct normalized step expression (#21)</li> <li><code>71e5773c</code>: add link to vscode marketplace in extension readme (#20)</li> </ul>"},{"location":"editor-support/changelog/#v004","title":"v0.0.4","text":"<ul> <li><code>b658074b</code>: help on hover (#19)</li> <li><code>82fbd485</code>: packages metadata (#18)</li> </ul>"},{"location":"editor-support/changelog/#v003","title":"v0.0.3","text":"<ul> <li><code>375eb605</code>: client vscode icon (#17)</li> <li><code>5d3e3da8</code>: documentation and bugs (#16)</li> <li><code>1c913841</code>: added missing project description (#15)</li> </ul>"},{"location":"editor-support/changelog/#v002","title":"v0.0.2","text":"<ul> <li><code>38ada912</code>: metadata update (#14)</li> <li><code>1de67efc</code>: action-push-tag@v1 is broken (#13)</li> </ul>"},{"location":"editor-support/licenses/","title":"Licenses","text":""},{"location":"editor-support/licenses/#package","title":"Package","text":""},{"location":"editor-support/licenses/#the-mit-license-mit","title":"The MIT License (MIT)","text":"<p>Copyright \u00a9 2021 Biometria Ekonomiska F\u00f6rening</p> <p>Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \u201cSoftware\u201d), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:</p> <p>The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.</p> <p>THE SOFTWARE IS PROVIDED \u201cAS IS\u201d, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</p>"},{"location":"editor-support/licenses/#package-dependencies","title":"Package dependencies","text":"Name Version License attrs 25.3.0 MIT autopep8 2.3.2 MIT License azure-core 1.35.0 MIT License behave 1.3.1 BSD-2-Clause cattrs 25.2.0 MIT License certifi 2025.8.3 Mozilla Public License 2.0 (MPL 2.0) charset-normalizer 3.4.3 MIT colorama 0.4.6 BSD License cucumber-expressions 18.0.1 MIT License cucumber-tag-expressions 6.2.0 MIT License idna 3.10 BSD License iniconfig 2.1.0 MIT License Jinja2 3.1.6 BSD License jinja2-simple-tags 0.6.1 BSD License jsonpath-ng 1.7.0 Apache Software License lsprotocol 2023.0.1 MIT License lxml 6.0.1 BSD License MarkupSafe 3.0.2 BSD License ordered-set 4.1.0 MIT License packaging 25.0 Apache Software License; BSD License parse 1.20.2 MIT License parse_type 0.6.6 MIT pluggy 1.6.0 MIT License ply 3.11 BSD pycodestyle 2.14.0 MIT pygls 1.3.1 Apache Software License Pygments 2.19.2 BSD License pyotp 2.9.0 MIT License pytest 8.4.1 MIT License python-dateutil 2.9.0.post0 Apache Software License; BSD License PyYAML 6.0.2 MIT License random_word 1.0.13 MIT License requests 2.32.5 Apache Software License six 1.17.0 MIT License typing_extensions 4.14.1 PSF-2.0 tzdata 2025.2 Apache Software License urllib3 2.5.0 MIT"},{"location":"editor-support/editors/vscode/","title":"grizzly-vscode","text":"<p>The <code>grizzly-loadtester</code> Visual Studio Code extension that makes it easier to develop load test scenarios by providing auto-complete of step expressions!</p> <p></p> <p></p> <p></p> <p></p> <p>Download the extension from Visual Studio Marketplace.</p> <p>For the extension to work, you have to install the language server <code>grizzly-loadtester-ls</code> which is published on pypi.org.</p> <p>Install it with:</p> <pre><code>python -m pip install grizzly-loadtester-ls\n</code></pre> <p>And make sure it's in a directory that is part of your <code>PATH</code> environment variable.</p>"},{"location":"editor-support/editors/vscode/changelog/","title":"Changelog","text":""},{"location":"editor-support/editors/vscode/licenses/","title":"Licenses","text":""},{"location":"editor-support/editors/vscode/licenses/#package","title":"Package","text":""},{"location":"editor-support/editors/vscode/licenses/#the-mit-license-mit","title":"The MIT License (MIT)","text":"<p>Copyright \u00a9 2021 Biometria Ekonomiska F\u00f6rening</p> <p>Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \u201cSoftware\u201d), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:</p> <p>The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.</p> <p>THE SOFTWARE IS PROVIDED \u201cAS IS\u201d, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</p>"},{"location":"editor-support/editors/vscode/licenses/#package-dependencies","title":"Package dependencies","text":"Name Version License @esbuild/linux-x64 0.25.10 MIT @eslint-community/eslint-utils 4.9.0 MIT @eslint-community/regexpp 4.12.1 MIT @eslint/eslintrc 2.1.4 MIT @eslint/js 8.57.1 MIT @humanwhocodes/config-array 0.13.0 Apache-2.0 @humanwhocodes/module-importer 1.0.1 Apache-2.0 @humanwhocodes/object-schema 2.0.3 BSD-3-Clause @isaacs/balanced-match 4.0.1 MIT @isaacs/brace-expansion 5.0.0 MIT @isaacs/cliui 8.0.2 ISC @nodelib/fs.scandir 2.1.5 MIT @nodelib/fs.stat 2.0.5 MIT @nodelib/fs.walk 1.2.8 MIT @pkgjs/parseargs 0.11.0 MIT @rtsao/scc 1.1.0 MIT @typescript-eslint/eslint-plugin 7.18.0 MIT @typescript-eslint/parser 7.18.0 BSD-2-Clause @typescript-eslint/scope-manager 7.18.0 MIT @typescript-eslint/type-utils 7.18.0 MIT @typescript-eslint/types 7.18.0 MIT @typescript-eslint/typescript-estree 7.18.0 BSD-2-Clause @typescript-eslint/utils 7.18.0 MIT @typescript-eslint/visitor-keys 7.18.0 MIT @ungap/structured-clone 1.3.0 ISC @vscode/python-extension 1.0.6 MIT @vscode/test-electron 2.5.2 MIT abbrev 1.1.1 ISC acorn 8.15.0 MIT acorn-jsx 5.3.2 MIT agent-base 7.1.4 MIT ajv 6.12.6 MIT ansi-regex 0.2.1 MIT ansi-regex 6.2.2 MIT ansi-regex 5.0.1 MIT ansi-styles 6.2.3 MIT ansi-styles 1.1.0 MIT ansi-styles 3.2.1 MIT ansi-styles 4.3.0 MIT argparse 2.0.1 Python-2.0 array-buffer-byte-length 1.0.2 MIT array-includes 3.1.9 MIT array-union 2.1.0 MIT array.prototype.findlastindex 1.2.6 MIT array.prototype.flat 1.3.3 MIT array.prototype.flatmap 1.3.3 MIT arraybuffer.prototype.slice 1.0.4 MIT asap 2.0.6 MIT async 2.6.4 MIT async-function 1.0.0 MIT available-typed-arrays 1.0.7 MIT balanced-match 1.0.2 MIT brace-expansion 2.0.2 MIT brace-expansion 1.1.12 MIT braces 3.0.3 MIT browser-stdout 1.3.1 ISC call-bind 1.0.8 MIT call-bind-apply-helpers 1.0.2 MIT call-bound 1.0.4 MIT callsites 3.1.0 MIT camelcase 6.3.0 MIT chai 6.0.1 MIT chalk 5.6.2 MIT chalk 2.4.2 MIT chalk 4.1.2 MIT chalk 0.5.1 MIT chokidar 4.0.3 MIT cli-cursor 5.0.0 MIT cli-spinners 2.9.2 MIT cliui 8.0.1 ISC color-convert 2.0.1 MIT color-convert 1.9.3 MIT color-name 1.1.4 MIT color-name 1.1.3 MIT concat-map 0.0.1 MIT core-util-is 1.0.3 MIT cross-spawn 7.0.6 MIT data-view-buffer 1.0.2 MIT data-view-byte-length 1.0.2 MIT data-view-byte-offset 1.0.1 MIT debug 4.4.3 MIT debug 3.2.7 MIT debuglog 1.0.1 MIT decamelize 4.0.0 MIT deep-is 0.1.4 MIT define-data-property 1.1.4 MIT define-properties 1.2.1 MIT dezalgo 1.0.4 ISC diff 7.0.0 BSD-3-Clause dir-glob 3.0.1 MIT doctrine 3.0.0 Apache-2.0 doctrine 2.1.0 Apache-2.0 dunder-proto 1.0.1 MIT eastasianwidth 0.2.0 MIT emoji-regex 10.5.0 MIT emoji-regex 9.2.2 MIT emoji-regex 8.0.0 MIT enhanced-resolve 5.18.3 MIT es-abstract 1.24.0 MIT es-define-property 1.0.1 MIT es-errors 1.3.0 MIT es-object-atoms 1.1.1 MIT es-set-tostringtag 2.1.0 MIT es-shim-unscopables 1.1.0 MIT es-to-primitive 1.3.0 MIT esbuild 0.25.10 MIT escalade 3.2.0 MIT escape-string-regexp 4.0.0 MIT escape-string-regexp 1.0.5 MIT eslint 8.57.1 MIT eslint-compat-utils 0.5.1 MIT eslint-config-love 62.0.1 MIT eslint-import-resolver-node 0.3.9 MIT eslint-module-utils 2.12.1 MIT eslint-plugin-es-x 7.8.0 MIT eslint-plugin-import 2.32.0 MIT eslint-plugin-n 17.23.1 MIT eslint-plugin-promise 7.2.1 ISC eslint-scope 7.2.2 BSD-2-Clause eslint-visitor-keys 3.4.3 Apache-2.0 espree 9.6.1 BSD-2-Clause esquery 1.6.0 BSD-3-Clause esrecurse 4.3.0 BSD-2-Clause estraverse 5.3.0 BSD-2-Clause esutils 2.0.3 BSD-2-Clause fast-deep-equal 3.1.3 MIT fast-glob 3.3.3 MIT fast-json-stable-stringify 2.1.0 MIT fast-levenshtein 2.0.6 MIT fastq 1.19.1 ISC file-entry-cache 6.0.1 MIT fill-range 7.1.1 MIT find-up 5.0.0 MIT flat 5.0.2 BSD-3-Clause flat-cache 3.2.0 MIT flatted 3.3.3 ISC for-each 0.3.5 MIT foreground-child 3.3.1 ISC fs.realpath 1.0.0 ISC function-bind 1.1.2 MIT function.prototype.name 1.1.8 MIT functions-have-names 1.2.3 MIT get-caller-file 2.0.5 ISC get-east-asian-width 1.4.0 MIT get-intrinsic 1.3.0 MIT get-proto 1.0.1 MIT get-symbol-description 1.1.0 MIT get-tsconfig 4.10.1 MIT github-url-from-git 1.5.0 MIT github-url-from-username-repo 1.0.2 BSD-2-Clause glob 5.0.15 ISC glob 11.1.0 BlueOak-1.0.0 glob 10.5.0 ISC glob 7.2.3 ISC glob-parent 5.1.2 ISC glob-parent 6.0.2 ISC globals 13.24.0 MIT globals 15.15.0 MIT globalthis 1.0.4 MIT globby 11.1.0 MIT globrex 0.1.2 MIT gopd 1.2.0 MIT graceful-fs 3.0.12 ISC graceful-fs 4.2.11 ISC graphemer 1.4.0 MIT has-ansi 0.1.0 MIT has-bigints 1.1.0 MIT has-flag 3.0.0 MIT has-flag 4.0.0 MIT has-property-descriptors 1.0.2 MIT has-proto 1.2.0 MIT has-symbols 1.1.0 MIT has-tostringtag 1.0.2 MIT hasown 2.0.2 MIT he 1.2.0 MIT http-proxy-agent 7.0.2 MIT https-proxy-agent 7.0.6 MIT ignore 5.3.2 MIT immediate 3.0.6 MIT import-fresh 3.3.1 MIT imurmurhash 0.1.4 MIT inflight 1.0.6 ISC inherits 2.0.4 ISC internal-slot 1.1.0 MIT is-array-buffer 3.0.5 MIT is-async-function 2.1.1 MIT is-bigint 1.1.0 MIT is-boolean-object 1.2.2 MIT is-callable 1.2.7 MIT is-core-module 2.16.1 MIT is-data-view 1.0.2 MIT is-date-object 1.1.0 MIT is-extglob 2.1.1 MIT is-finalizationregistry 1.1.1 MIT is-fullwidth-code-point 3.0.0 MIT is-generator-function 1.1.0 MIT is-glob 4.0.3 MIT is-interactive 2.0.0 MIT is-map 2.0.3 MIT is-negative-zero 2.0.3 MIT is-number 7.0.0 MIT is-number-object 1.1.1 MIT is-path-inside 3.0.3 MIT is-plain-obj 2.1.0 MIT is-regex 1.2.1 MIT is-set 2.0.3 MIT is-shared-array-buffer 1.0.4 MIT is-string 1.1.1 MIT is-symbol 1.1.1 MIT is-typed-array 1.1.15 MIT is-unicode-supported 2.1.0 MIT is-unicode-supported 0.1.0 MIT is-unicode-supported 1.3.0 MIT is-weakmap 2.0.2 MIT is-weakref 1.1.1 MIT is-weakset 2.0.4 MIT isarray 1.0.0 MIT isarray 2.0.5 MIT isexe 2.0.0 ISC jackspeak 3.4.3 BlueOak-1.0.0 jackspeak 4.1.1 BlueOak-1.0.0 jju 1.4.0 MIT jquery-extend 2.0.3 MIT js-yaml 4.1.1 MIT json-buffer 3.0.1 MIT json-parse-helpfulerror 1.0.3 MIT json-schema-traverse 0.4.1 MIT json-stable-stringify-without-jsonify 1.0.1 MIT json5 1.0.2 MIT jszip 3.10.1 (MIT OR GPL-3.0-or-later) keyv 4.5.4 MIT levn 0.4.1 MIT license-checker 1.0.0 BSD-3-Clause lie 3.3.0 MIT locate-path 6.0.0 MIT lodash 4.17.21 MIT lodash.merge 4.6.2 MIT log-symbols 4.1.0 MIT log-symbols 6.0.0 MIT lru-cache 11.2.1 ISC lru-cache 10.4.3 ISC math-intrinsics 1.1.0 MIT merge2 1.4.1 MIT micromatch 4.0.8 MIT mimic-function 5.0.1 MIT minimatch 3.1.2 ISC minimatch 9.0.5 ISC minimatch 10.1.1 BlueOak-1.0.0 minimatch 5.1.6 ISC minimist 1.2.8 MIT minipass 7.1.2 ISC mkdirp 0.3.5 MIT mkdirp 0.5.6 MIT mocha 11.7.2 MIT ms 2.1.3 MIT natives 1.1.6 ISC natural-compare 1.4.0 MIT nopt 3.0.6 ISC nopt 2.2.1 MIT nopt-defaults 0.0.1 BSD-3-Clause nopt-usage 0.1.0 MIT normalize-package-data 1.0.3 MIT* npm-license-crawler 0.2.1 BSD-3-Clause object-inspect 1.13.4 MIT object-keys 1.1.1 MIT object.assign 4.1.7 MIT object.fromentries 2.0.8 MIT object.groupby 1.0.3 MIT object.values 1.2.1 MIT once 1.4.0 ISC onetime 7.0.0 MIT optionator 0.9.4 MIT ora 8.2.0 MIT own-keys 1.0.1 MIT p-limit 3.1.0 MIT p-locate 5.0.0 MIT package-json-from-dist 1.0.1 BlueOak-1.0.0 pako 1.0.11 (MIT AND Zlib) parent-module 1.0.1 MIT path-exists 4.0.0 MIT path-is-absolute 1.0.1 MIT path-key 3.1.1 MIT path-parse 1.0.7 MIT path-scurry 2.0.0 BlueOak-1.0.0 path-scurry 1.11.1 BlueOak-1.0.0 path-type 4.0.0 MIT picocolors 1.1.1 ISC picomatch 2.3.1 MIT picomatch 4.0.3 MIT possible-typed-array-names 1.1.0 MIT prelude-ls 1.2.1 MIT process-nextick-args 2.0.1 MIT punycode 2.3.1 MIT queue-microtask 1.2.3 MIT randombytes 2.1.0 MIT read-installed 3.1.5 ISC read-package-json 1.3.3 ISC readable-stream 2.3.8 MIT readdir-scoped-modules 1.1.0 ISC readdirp 4.1.2 MIT reflect.getprototypeof 1.0.10 MIT regexp.prototype.flags 1.5.4 MIT require-directory 2.1.1 MIT resolve 1.22.10 MIT resolve-from 4.0.0 MIT resolve-pkg-maps 1.0.0 MIT restore-cursor 5.1.0 MIT reusify 1.1.0 MIT rimraf 3.0.2 ISC run-parallel 1.2.0 MIT safe-array-concat 1.1.3 MIT safe-buffer 5.1.2 MIT safe-push-apply 1.0.0 MIT safe-regex-test 1.1.0 MIT semver 7.7.2 ISC semver 6.3.1 ISC semver 4.3.6 ISC serialize-javascript 6.0.2 BSD-3-Clause set-function-length 1.2.2 MIT set-function-name 2.0.2 MIT set-proto 1.0.0 MIT setimmediate 1.0.5 MIT shebang-command 2.0.0 MIT shebang-regex 3.0.0 MIT side-channel 1.1.0 MIT side-channel-list 1.0.0 MIT side-channel-map 1.0.1 MIT side-channel-weakmap 1.0.2 MIT signal-exit 4.1.0 ISC slash 3.0.0 MIT slide 1.1.6 ISC stdin-discarder 0.2.2 MIT stop-iteration-iterator 1.1.0 MIT string-width 7.2.0 MIT string-width 5.1.2 MIT string-width 4.2.3 MIT string.prototype.trim 1.2.10 MIT string.prototype.trimend 1.0.9 MIT string.prototype.trimstart 1.0.8 MIT string_decoder 1.1.1 MIT strip-ansi 7.1.2 MIT strip-ansi 0.3.0 MIT strip-ansi 6.0.1 MIT strip-bom 3.0.0 MIT strip-json-comments 3.1.1 MIT supports-color 7.2.0 MIT supports-color 0.2.0 MIT supports-color 5.5.0 MIT supports-color 8.1.1 MIT supports-preserve-symlinks-flag 1.0.0 MIT tapable 2.2.3 MIT text-table 0.2.0 MIT to-regex-range 5.0.1 MIT treeify 1.1.0 MIT ts-api-utils 1.4.3 MIT ts-declaration-location 1.0.7 BSD-3-Clause tsconfig-paths 3.15.0 MIT type-check 0.4.0 MIT type-fest 0.20.2 (MIT OR CC0-1.0) typed-array-buffer 1.0.3 MIT typed-array-byte-length 1.0.3 MIT typed-array-byte-offset 1.0.4 MIT typed-array-length 1.0.7 MIT typescript 5.9.2 Apache-2.0 typescript-eslint 7.18.0 MIT unbox-primitive 1.1.0 MIT undici-types 6.21.0 MIT uri-js 4.4.1 BSD-2-Clause util-deprecate 1.0.2 MIT util-extend 1.0.3 MIT vscode-jsonrpc 8.2.0 MIT vscode-languageclient 9.0.1 MIT vscode-languageserver-protocol 3.17.5 MIT vscode-languageserver-types 3.17.5 MIT vscode-uri 3.1.0 MIT which 2.0.2 ISC which-boxed-primitive 1.1.1 MIT which-builtin-type 1.2.1 MIT which-collection 1.0.2 MIT which-typed-array 1.1.19 MIT word-wrap 1.2.5 MIT workerpool 9.3.4 Apache-2.0 wrap-ansi 7.0.0 MIT wrap-ansi 8.1.0 MIT wrappy 1.0.2 ISC y18n 5.0.8 ISC yargs 17.7.2 MIT yargs-parser 21.1.1 ISC yargs-unparser 2.0.0 MIT yocto-queue 0.1.0 MIT"},{"location":"framework/changelog/","title":"Changelog","text":""},{"location":"framework/changelog/#v325-legacy","title":"v3.2.5 legacy","text":"<ul> <li><code>152d0623</code>: revert release workflow to use python 3.12</li> </ul>"},{"location":"framework/changelog/#v324","title":"v3.2.4","text":"<ul> <li><code>66ed9d16</code>: problem building docs in CI workflow</li> </ul>"},{"location":"framework/changelog/#v323","title":"v3.2.3","text":"<ul> <li><code>4e99dc36</code>: use <code>inspect.getmro</code> do determine argument type (#375)</li> </ul>"},{"location":"framework/changelog/#v322","title":"v3.2.2","text":"<ul> <li><code>e21141ef</code>: hanging after test finished (#374)</li> </ul>"},{"location":"framework/changelog/#v321","title":"v3.2.1","text":"<ul> <li><code>a4804922</code>: replace pydoc-markdown with mkdocstrings (#373)</li> <li><code>41147350</code>: dependencies update (#371)</li> <li><code>f56d40fb</code>: retry can raise failure_exception if set (#370)</li> <li><code>e7bc9b81</code>: own identity for TestdataConsumer logger, to avoid confusion, since it's shared between all user instances of the same type running on the same worker. (#369)</li> <li><code>c19a4565</code>: keystore: more ambigous message in <code>RuntimeError</code> when no value is found for key (#368)</li> <li><code>5158f7f5</code>: IotHubUser: remove verbose info logging (#367)</li> <li><code>d0fb8e09</code>: HttpClientTask: paths to client cert and key should be relative to context root (#366)</li> <li><code>8490d6ff</code>: RestApiUser: assume that cert/key files are relative to context root (GRIZZLY_CONTEXT_ROOT) (#365)</li> <li><code>df745b38</code>: request task failure handling + spawning complete synchronization (#364)</li> <li><code>d8da1c4e</code>: bump locust version (#363)</li> <li><code>f02b765b</code>: no http retries (#362)</li> <li><code>fd12f3f2</code>: IotHubUser: <code>allow_already_exist</code> argument for requests (#361)</li> </ul>"},{"location":"framework/changelog/#v320","title":"v3.2.0","text":"<ul> <li><code>71c6aa31</code>: bad PR -- a lot of changes (#360)</li> <li><code>cf9409eb</code>: rewrite of testdata communication, and other improvements (#357)</li> <li><code>f5c079b8</code>: ServiceBus improvements in async-messaged (#356)</li> <li><code>95bbbb87</code>: CSV writers keep files open during test + user events for the writing (#355)</li> </ul>"},{"location":"framework/changelog/#v311","title":"v3.1.1","text":"<ul> <li><code>392efca5</code>: new permutation interface (#354)</li> <li><code>1187653d</code>: Custom failure handling (#353)</li> </ul>"},{"location":"framework/changelog/#v310","title":"v3.1.0","text":"<ul> <li><code>1e902cdb</code>: testdata variable message handlers should run concurrent (#351)</li> <li><code>c19bdfa5</code>: dump include variables in <code>--dry-run</code> (#350)</li> <li><code>e1a01cec</code>: improved handling of abort (ctrl + c) (#349)</li> <li><code>854886bc</code>: Async-messaged fixes; (#348)</li> <li><code>3b98bc39</code>: <code>IotHubUser</code> support for receiving (C2D) messages (#346)</li> <li><code>1c7a89bf</code>: improvements of keystore protocol: <code>push</code>, <code>pop</code> and <code>del</code> (#345)</li> <li><code>cd58490d</code>: sub-render variables if they contain templates in <code>SetVariableTask</code> and <code>HttpClientTask</code> (#344)</li> <li><code>a589ef6a</code>: PUT support in <code>HttpClientTask</code> and file contents when declaring variables (#343)</li> <li><code>95f7a27d</code>: handle <code>Mod</code> nodes in jinja2 templates (#342)</li> <li><code>20bd1104</code>: new atomic variable: <code>AtomicJsonReader</code> (#341)</li> </ul>"},{"location":"framework/changelog/#v300","title":"v3.0.0","text":"<ul> <li><code>982e8d0f</code>: rewrite of variable separation per scenario (#339)</li> <li><code>60c78363</code>: update locust version to a official release (#337)</li> <li><code>69e4c9a6</code>: geventhttpclient does not accept <code>verify</code> in request arguments (#336)</li> <li><code>00338035</code>: variables per scenario (#335)</li> <li><code>96bd4ff2</code>: fix for \"Aborting test can fail when running distributed with MQ\" (#333)</li> <li><code>158e715a</code>: override influxdb event with special named context key-values (#332)</li> <li><code>fd54641d</code>: general improvements (#330)</li> <li><code>c42570d0</code>: increment value in keystore (#327)</li> <li><code>47485f51</code>: merge environment configuration files (#326)</li> <li><code>9dfabf94</code>: jsonpath filter one of, <code>=|</code> (#325)</li> </ul>"},{"location":"framework/changelog/#v2102","title":"v2.10.2","text":"<ul> <li><code>2d0336a7</code>: retry creating a service bus connection if it times out (#322)</li> <li><code>953852b3</code>: fixing stability issues identified during ~5h tests (#321)</li> </ul>"},{"location":"framework/changelog/#v2101","title":"v2.10.1","text":"<ul> <li><code>ed82ea4d</code>: do not touch cookies or authorization headers (#320)</li> </ul>"},{"location":"framework/changelog/#v2100","title":"v2.10.0","text":"<ul> <li><code>16c03465</code>: refresh token bug (#319)</li> <li><code>830abee4</code>: credential support for <code>ServiceBus*</code> and <code>BlobStorage*</code> resources (#318)</li> <li><code>366f0398</code>: AAD refactoring (#317)</li> <li><code>a5969568</code>: <code>ServiceBusUser</code> and <code>IteratorScenario</code> improvements (#316)</li> <li><code>af9b1647</code>: update databind version to 4.5.1 (#315)</li> <li><code>8c561786</code>: dry run (#314)</li> <li><code>82eec240</code>: improved AST parsing of jinja2 templates (#313)</li> <li><code>907cdaf2</code>: set variable task resolve file value (#311)</li> <li><code>aa93dae7</code>: disable sketchy dispatcher unittests (#312)</li> <li><code>e9c5e3e7</code>: azure-servicebus version 7.12.1 (#310)</li> <li><code>5c5b2e54</code>: execute python script step improvements (#309)</li> <li><code>3e067ebe</code>: Execute python script runs at module level (#308)</li> <li><code>a22acea8</code>: fix for incorrect step expression for inline script (#307)</li> <li><code>dfdbd292</code>: initialize variable values from files (#306)</li> </ul>"},{"location":"framework/changelog/#v293","title":"v2.9.3","text":"<ul> <li><code>c74c22d0</code>: influxdb: add additional tags to writes (#305)</li> </ul>"},{"location":"framework/changelog/#v292","title":"v2.9.2","text":"<ul> <li><code>53fe3e35</code>: resolve_variable: allow both environment configuration/variables and jinja variables in an input string (#304)</li> </ul>"},{"location":"framework/changelog/#v291","title":"v2.9.1","text":"<ul> <li><code>12724cf7</code>: execute python scripts during behave phase of grizzly (#303)</li> </ul>"},{"location":"framework/changelog/#v290","title":"v2.9.0","text":"<ul> <li><code>7dfa643e</code>: custom dispatcher logic to be able to isolate user types to workers (#302)</li> <li><code>d68318f0</code>: Support for gzipping payload sent to IoT hub (#301)</li> <li><code>ee162bf7</code>: support templating for <code>WaitBetweenTask</code> (#300)</li> <li><code>73ecf040</code>: change context variables during runtime via <code>SetVariableTask</code> (#292)</li> <li><code>229092f5</code>: handle ENAMETOOLONG when creating a request task with source in context text. (#290)</li> <li><code>45af414e</code>: handle property validation on flat objects (#289)</li> </ul>"},{"location":"framework/changelog/#v280","title":"v2.8.0","text":"<ul> <li><code>02957022</code>: geventhttpclient does not support <code>cookies</code> in <code>request</code> (#288)</li> <li><code>f0c635c2</code>: async-messaged logging refatored (#287)</li> <li><code>55da160b</code>: find used variables in assig expressions <code>{% .. %}</code> (#285)</li> <li><code>ab8b7e20</code>: rewrite of request events (#286)</li> <li><code>05f63241</code>: Update issue templates</li> <li><code>8a44416e</code>: replace pylint+flake8 with ruff (#282)</li> <li><code>b2101ede</code>: service bus client unquote bug (#279)</li> <li><code>7a1f1ecc</code>: BlobStorageUser: support for RECEIVE/GET (#277)</li> <li><code>97869ec3</code>: major documentation overhaul (#276)</li> </ul>"},{"location":"framework/changelog/#v274","title":"v2.7.4","text":"<ul> <li><code>b4987581</code>: update IBM MQ redist URL (#274)</li> </ul>"},{"location":"framework/changelog/#v273","title":"v2.7.3","text":"<ul> <li><code>cd70468a</code>: bump pymqi version (#265)</li> <li><code>cb6eab8b</code>: AAD: check for error message before updating state (#264)</li> <li><code>3116d546</code>: support for templating of <code>expected_matches</code> in response handlers (#263)</li> </ul>"},{"location":"framework/changelog/#v272","title":"v2.7.2","text":"<ul> <li><code>fe4d1d9c</code>: software based TOTP for AAD user authentication (#262)</li> <li><code>37c021c5</code>: keystore -- share testdata between scenarios (#261)</li> <li><code>b97fe65a</code>: do not fire ResponseEvent for exceptions that are <code>StopUser</code> or <code>RestartScenario</code> (#258)</li> <li><code>5e7f4b45</code>: include code of conduct in generated documentation (#257)</li> <li><code>74cd98a8</code>: Create code of conduct (#255)</li> <li><code>7a8d79df</code>: async-messaged: reconnect to MQ queue manager if connection is broken (#253)</li> <li><code>6ac36e6e</code>: add support for ISO 8601-ish format in DateTask (no separators) :( (#254)</li> <li><code>aa91d5dd</code>: add support for sub log directories in <code>requests/logs</code> (#252)</li> </ul>"},{"location":"framework/changelog/#v271","title":"v2.7.1","text":"<ul> <li><code>3e508501</code>: grizzly.auth.aad: flow token in step 2 now changes (#251)</li> </ul>"},{"location":"framework/changelog/#v270","title":"v2.7.0","text":"<ul> <li><code>9a3ca4e4</code>: bump versions (#249)</li> <li><code>47a1201a</code>: Update issue templates (#245)</li> <li><code>15779776</code>: persist flagged variables when test is stopping (#247)</li> <li><code>b40cfcb2</code>: refactoring of handling RequestTask (#246)</li> <li><code>0c2cbab4</code>: do not log <code>scenario.failure_exception</code> in <code>LoopTask</code> (#244)</li> <li><code>52c72d1d</code>: update novella (#243)</li> <li><code>34b30626</code>: refactoring regarding <code>GrizzlyContextScenario</code> references for users (#241)</li> <li><code>a2ea8941</code>: response handlers should execute even though payload/metadata is empty (#242)</li> <li><code>7edebccb</code>: custom jinja2/templating filters (#240)</li> <li><code>c624dcb7</code>: handling of SIGINT/SIGTERM to gracefully stop test (#238)</li> </ul>"},{"location":"framework/changelog/#v265","title":"v2.6.5","text":"<ul> <li><code>10942c9d</code>: only allow writing a complete row at a time in AtomicCsvWriter (#237)</li> <li><code>79a6f3f5</code>: rewrite grizzly.tasks.clients.servicebus to support more than one parent (#236)</li> </ul>"},{"location":"framework/changelog/#v264","title":"v2.6.4","text":"<ul> <li><code>d41a2b15</code>: catch exceptions from task <code>on_stop</code> and log as errors (#235)</li> <li><code>b8bf9e65</code>: AAD authentication improvements (#234)</li> <li><code>df73fdcd</code>: HTTP authentication support outside of <code>RestApiUser</code> (#231)</li> <li><code>e9e62d42</code>: correct handling of return code from behave (#233)</li> <li><code>56dc7531</code>: use docker composer v2 in code-quality workflow (#230)</li> </ul>"},{"location":"framework/changelog/#v263","title":"v2.6.3","text":"<ul> <li><code>a52cfc5c</code>: async messaged improvments (#228)</li> <li><code>fa51b3ce</code>: wrapper tasks implements on_start/stop (#227)</li> <li><code>fd245ca6</code>: support for jsonpath expression filter on \"flat\" objects (#225)</li> <li><code>f289d6d3</code>: prefix subscription name with id of user instance (#224)</li> <li><code>c4e8acf2</code>: docs generate sort version (#223)</li> <li><code>c79b5927</code>: E2E distributed tests takes too long time (#222)</li> <li><code>55fb7060</code>: backing out PR #200, since interfere with logging of other tasks. (#221)</li> <li><code>61db0889</code>: abort if <code>async-messaged</code> process is gone (#219)</li> <li><code>9dbac3e5</code>: metadata is a dict, but when saved in a variable it should be a (json) string (#218)</li> <li><code>c557a6eb</code>: client task implementation for saving response metadata in variable (#217)</li> </ul>"},{"location":"framework/changelog/#v262","title":"v2.6.2","text":"<ul> <li><code>5a00f706</code>: fixed documentation for missing path and fragment variables (#215)</li> <li><code>7d653c53</code>: get current tasks the right way (#214)</li> <li><code>1ac1c4d1</code>: RestApiUser, oauth2 token v2.0 flow (#213)</li> </ul>"},{"location":"framework/changelog/#v261","title":"v2.6.1","text":"<ul> <li><code>d541500e</code>: servicebus client task (#212)</li> </ul>"},{"location":"framework/changelog/#v260","title":"v2.6.0","text":"<ul> <li><code>c01805fb</code>: implementation of AtomicCsvWriter (#211)</li> <li><code>1c2b824d</code>: code maintenance 2023-03 (#209)</li> <li><code>b0e3a68b</code>: task <code>on_start</code> and <code>on_stop</code> functionality (#208)</li> <li><code>16efa80a</code>: grizzly.user implementation of on_start and on_stop (#207)</li> <li><code>8906711a</code>: use packaging.version instead of distutils.version (#206)</li> <li><code>9e6eeec1</code>: rename <code>grizzly.environment</code> to <code>grizzly.behave</code> (#205)</li> <li><code>47a61445</code>: updated locust version (#204)</li> <li><code>69938441</code>: suppress error procuded in wrapped tasks to be logged to the error summary (#203)</li> </ul>"},{"location":"framework/changelog/#v2511","title":"v2.5.11","text":"<ul> <li><code>85650a55</code>: set a fixed time for one iteration of a scenario (#201)</li> <li><code>30c9eadb</code>: do not log internal flow exceptions as errors in conditionals (#200)</li> <li><code>a7e13f04</code>: improvements of information printed when grizzly is running locust (#198)</li> <li><code>5f09a9dc</code>: fixed tags sorted incorrectly (#191)</li> <li><code>8594a4fa</code>: improved UntilTask traceability (#194)</li> </ul>"},{"location":"framework/changelog/#v2510","title":"v2.5.10","text":"<ul> <li><code>da7eb36b</code>: async-messaged: gracefully close handler connections when terminating\u2026 (#190)</li> </ul>"},{"location":"framework/changelog/#v259","title":"v2.5.9","text":"<ul> <li><code>32414118</code>: AtomicServiceBus: add argument <code>consume</code> (#189)</li> </ul>"},{"location":"framework/changelog/#v258","title":"v2.5.8","text":"<ul> <li><code>1334c917</code>: updated shield.io url for github workflow status (#188)</li> <li><code>59560193</code>: IoT hub, error handling (#187)</li> </ul>"},{"location":"framework/changelog/#v257","title":"v2.5.7","text":"<ul> <li><code>fc436358</code>: tag measurements with scenario they belong to (#185)</li> <li><code>67abbb50</code>: write user count per user class name to influx every 5 seconds (#184)</li> </ul>"},{"location":"framework/changelog/#v256","title":"v2.5.6","text":"<ul> <li><code>516b119f</code>: background variable declaration (#183)</li> <li><code>2ae0c0b2</code>: updated workflow actions to remove warnings (#182)</li> </ul>"},{"location":"framework/changelog/#v255","title":"v2.5.5","text":"<ul> <li><code>2a4041eb</code>: csv logging (#181)</li> </ul>"},{"location":"framework/changelog/#v254","title":"v2.5.4","text":"<ul> <li><code>65de8865</code>: concurrency fixes in MQ and SB related code (#180)</li> </ul>"},{"location":"framework/changelog/#v253","title":"v2.5.3","text":"<ul> <li><code>d9c89199</code>: get messages from MQ with SYNCPOINT and configuration of max message size (#179)</li> <li><code>784f6b89</code>: IotHubUser, for uploading files to Azure IoT Hub (#177)</li> <li><code>1a4a826f</code>: improved support for jinja2 expressions (#176)</li> <li><code>c28e52d8</code>: <code>grizzly.tasks.client.messagequeue</code> needs unique worker for each instance of a scenario (#175)</li> <li><code>5cceb577</code>: print returncode of locust to stdout (#174)</li> </ul>"},{"location":"framework/changelog/#v252","title":"v2.5.2","text":"<ul> <li><code>70d1d245</code>: azure.servicebus receiver sometimes returns no message, even if there... (#173)</li> <li><code>7b63d1b6</code>: better handling of arthmetic when parsing out variables from templates (#172)</li> <li><code>caf9693d</code>: on_consumer testdata variables needs information about current scenario (#171)</li> </ul>"},{"location":"framework/changelog/#v251","title":"v2.5.1","text":"<ul> <li><code>599db8eb</code>: instructions in example docs on how to install vscode extension (#169)</li> <li><code>e57eea5d</code>: corrected grizzly-cli run commands in example (#167)</li> <li><code>161af067</code>: async-messaged returns un-encoded RFH2 payload after PUT (#165)</li> <li><code>7d034b26</code>: removed deprecated set-output commands in workflow (#164)</li> <li><code>5a35ffef</code>: more MQ information (#162)</li> </ul>"},{"location":"framework/changelog/#v250","title":"v2.5.0","text":"<ul> <li><code>ef6a4675</code>: move out <code>docs</code> extras from pyproject.toml (#158)</li> <li><code>d4880ee2</code>: env conf inline resolving and \"generic\" <code>UntilRequestTask</code> (#157)</li> <li><code>7285294b</code>: refactoring of get_templates (#156)</li> <li><code>b694acaa</code>: implementation of %g (GUID/UUID) formatter for AtomicRandomString (#152)</li> <li><code>a3854842</code>: Post XML, multipart/form-data and metadata per request (#151)</li> <li><code>10883c87</code>: dependency update 2209 (#150)</li> <li><code>1ce3a43c</code>: persist variable values between runs (override initial value based on previous runs) (#149)</li> <li><code>b39247e8</code>: declared and found variable cross-check (#148)</li> <li><code>e4e353de</code>: fixed broken release workflow (#147)</li> </ul>"},{"location":"framework/changelog/#v246","title":"v2.4.6","text":"<ul> <li><code>1a6e07da</code>: fix missing variables due to filter (pipe) in templates (#145)</li> <li><code>e7e606b7</code>: checkout release tag correctly so edit url in docs is correct (#146)</li> <li><code>cc5bf649</code>: added documentation for editor support (#144)</li> <li><code>c37140aa</code>: correct typings for release workflow inputs (#143)</li> <li><code>c3ed2eb7</code>: document response handler expression arguments (#142)</li> <li><code>3d2aa051</code>: documentation of metadata comments in feature files (#141)</li> <li><code>5db8bfe3</code>: allow templating strings as input to WaitTask (#140)</li> <li><code>e297da03</code>: e2e dist (#139)</li> <li><code>7a491161</code>: run e2e tests distributed (#138)</li> <li><code>b24db98b</code>: create zmq socket for each request (#136)</li> <li><code>9777db82</code>: fix for last task not being executed when user is stopping (#135)</li> </ul>"},{"location":"framework/changelog/#v245","title":"v2.4.5","text":"<ul> <li><code>eba5ba1d</code>: no testdata address, when running distributed (#134)</li> <li><code>606c7a80</code>: changed mq version (#132)</li> </ul>"},{"location":"framework/changelog/#v244","title":"v2.4.4","text":"<ul> <li><code>501b5960</code>: allow an arbritary number of matches (#130)</li> <li><code>d8406a55</code>: loop task (#129)</li> <li><code>a7928eea</code>: TransformerContentType should be permutated in y direction (#128)</li> <li><code>2bb8c045</code>: updated dependencies due to lxml security fix (#127)</li> <li><code>aea3d97b</code>: grizzly implementation of print_percentile_stats (#125)</li> <li><code>4ba8066d</code>: annotate non-enum custom types with <code>__vector__</code> (#124)</li> <li><code>fa4a2b16</code>: annotations for enums used in step expressions (#123)</li> </ul>"},{"location":"framework/changelog/#v243","title":"v2.4.3","text":"<ul> <li><code>27ebe108</code>: mq rfh2 support (#122)</li> <li><code>8b794ad1</code>: create list of tasks for pointer when switching (#121)</li> <li><code>3e16160c</code>: fixed examples for conditional task (#120)</li> </ul>"},{"location":"framework/changelog/#v242","title":"v2.4.2","text":"<ul> <li><code>da3c335d</code>: conditional tasks task (#119)</li> <li><code>cbcb1b8b</code>: new location for logo in repo (#118)</li> </ul>"},{"location":"framework/changelog/#v241","title":"v2.4.1","text":"<ul> <li><code>1ce7f0ad</code>: fix for documentation build and deploy (#117)</li> <li><code>484f8010</code>: changed to novella build backend and improved documentation (#116)</li> </ul>"},{"location":"framework/changelog/#v240","title":"v2.4.0","text":"<ul> <li><code>8e026ad8</code>: updated dependencies (#115)</li> <li><code>5c747f53</code>: request wait task (#114)</li> <li><code>6684c357</code>: <code>TimerTask</code> to measure \"response time\" for a group of tasks (#113)</li> <li><code>5ceca1e2</code>: bug fixes in <code>BlobStorageClient.put</code> and scenario iterator (#112)</li> <li><code>53ed0ad5</code>: remove debug print statement (#111)</li> <li><code>4f0f01f7</code>: sort request statistics per scenario (#110)</li> <li><code>35091c96</code>: <code>grizzly.tasks.client</code> must have a name (#109)</li> </ul>"},{"location":"framework/changelog/#v231","title":"v2.3.1","text":"<ul> <li><code>c754a8aa</code>: support ISO 8601 formated DateTime and Time (#107)</li> <li><code>e33cd941</code>: client task ibm messagequeue (#103)</li> <li><code>eabe7b8f</code>: possibility to implement custom (non-grizzly) atomic variables (#102)</li> <li><code>e4193dd4</code>: possibility to register custom locust message types and handlers (#101)</li> <li><code>13b6c444</code>: scenario statistics (#98)</li> <li><code>ba37b60a</code>: validating response step expression updated (#97)</li> <li><code>89149d9d</code>: \"end to end\" (E2E) test cases (#95)</li> </ul>"},{"location":"framework/changelog/#v230","title":"v2.3.0","text":"<ul> <li><code>b4fc150f</code>: Change scenario hash to numerical index (#94)</li> <li><code>6ecc7ab3</code>: support for parallell tasks (#92)</li> <li><code>2f7025d9</code>: make tests runnable on windows (#91)</li> </ul>"},{"location":"framework/changelog/#v221","title":"v2.2.1","text":"<ul> <li><code>0ae1b373</code>: automagically check pypi for package url if unknown (#90)</li> <li><code>e6ef9d8f</code>: install additional script dependencies correct (#89)</li> <li><code>c0a53532</code>: add support for requirements-script.txt to pip-sync wrapper (#88)</li> <li><code>67f3d269</code>: install and cache script requirements (#87)</li> <li><code>ddd9929c</code>: restructuring of code-quality workflow (#86)</li> </ul>"},{"location":"framework/changelog/#v220","title":"v2.2.0","text":"<ul> <li><code>d45b62d1</code>: github action action-push-tag@v1 is broken (#85)</li> <li><code>283fe3fe</code>: bug fix for iterations to stop when not finishing (#84)</li> <li><code>0ed596f2</code>: Feature/clients tasks (#81)</li> <li><code>6e6496ed</code>: create docs/licenses if it does not exist, before trying to write md file (#79)</li> <li><code>0dd489a3</code>: restructure of documentation (#78)</li> </ul>"},{"location":"framework/changelog/#v210","title":"v2.1.0","text":"<ul> <li><code>c4260a9e</code>: Feature/response handlers (#77)</li> <li><code>8278d17a</code>: step to set user metadata/header key values (#75)</li> <li><code>11de9b7f</code>: clearer job name in code-quality workflow (#70)</li> <li><code>b6845b79</code>: Feature/issue 64 pep518 (#69)</li> <li><code>fbd96cfa</code>: Feature/issue 61 pytz (#68)</li> </ul>"},{"location":"framework/changelog/#v200","title":"v2.0.0","text":"<ul> <li><code>af5e639b</code>: twine: command not found (#67)</li> <li><code>052a5ab9</code>: Feature/dependency update round 2 (#66)</li> <li><code>d4a3b935</code>: Feature/mq heartbeat (#65)</li> <li><code>884b6761</code>: Feature/dependencies update (#63)</li> <li><code>02c88045</code>: Plain text transformer fix, plus added rendering of date offset value (#62)</li> <li><code>001cc5e5</code>: Bug/until task aborts (#60)</li> </ul>"},{"location":"framework/changelog/#v153","title":"v1.5.3","text":"<ul> <li><code>7c2b7a91</code>: Feature/cli docs (#59)</li> <li><code>a53f9159</code>: Bug/until stops too soon (#58)</li> <li><code>f53bb8b8</code>: removed debug print statements (#56)</li> <li><code>fb9f4933</code>: removed debug print statements (#56)</li> </ul>"},{"location":"framework/changelog/#v152","title":"v1.5.2","text":"<ul> <li><code>fb9f4933</code>: removed debug print statements (#56)</li> </ul>"},{"location":"framework/changelog/#v151","title":"v1.5.1","text":"<ul> <li><code>a2857569</code>: verify_certificates bug fixed (#55)</li> </ul>"},{"location":"framework/changelog/#v150","title":"v1.5.0","text":"<ul> <li><code>1c57c7f0</code>: Feature/restart scenario (#54)</li> <li><code>9326218f</code>: MQ concurrency fix (#53)</li> <li><code>cc178860</code>: renamed grizzly.tasks to grizzly.scenarios (#52)</li> <li><code>281e9beb</code>: fixed bug in parse_arguments if an argument value contained comma (#51)</li> </ul>"},{"location":"framework/changelog/#v144","title":"v1.4.4","text":"<ul> <li><code>e13ff471</code>: Feature/date parse task (#50)</li> <li><code>d16ef8e1</code>: handle exceptions during until retries (#49)</li> <li><code>0994f9af</code>: increased test coverage (#48)</li> <li><code>eaaeab22</code>: Fix for doing retry upon receiving MQRC_TRUNCATED_MSG_FAILED while browsing messages (#47)</li> <li><code>88202428</code>: support for templating in arguments in condition (#46)</li> </ul>"},{"location":"framework/changelog/#v143","title":"v1.4.3","text":"<ul> <li><code>3e47adbd</code>: fixed alignment i scenario summary (#45)</li> </ul>"},{"location":"framework/changelog/#v142","title":"v1.4.2","text":"<ul> <li><code>e976144b</code>: Bug/async messaged logging (#44)</li> <li><code>b4b0be63</code>: Feature/request until (#42)</li> </ul>"},{"location":"framework/changelog/#v141","title":"v1.4.1","text":"<ul> <li><code>e6d8fb3f</code>: fix for ensuring correct data type in metric written to influx (#41)</li> </ul>"},{"location":"framework/changelog/#v140","title":"v1.4.0","text":"<ul> <li><code>26b81305</code>: print start and stop date and time when finished (#40)</li> <li><code>4aef0eef</code>: request response_time fixes (#39)</li> <li><code>fb95268f</code>: updated dependencies and devcontainer (#38)</li> <li><code>f98d904d</code>: Feature/scenario info (#37)</li> </ul>"},{"location":"framework/changelog/#v131","title":"v1.3.1","text":"<ul> <li><code>73827bf4</code>: error logging in transformer class (#35)</li> <li><code>3e5e03aa</code>: init racecondition (#36)</li> <li><code>dd0c75a5</code>: support for request template files in combination with data tables (#34)</li> <li><code>8d56f4fe</code>: Feature/parameterize more (#33)</li> </ul>"},{"location":"framework/changelog/#v130","title":"v1.3.0","text":"<ul> <li><code>60f39988</code>: transparent support for setting content type in endpoint (#32)</li> <li><code>423bc994</code>: expression support for service bus functionality (#31)</li> <li><code>2e2695df</code>: support for offset in AtomicDate (#30)</li> <li><code>41b78e89</code>: AtomicMessageQueue content type support (#29)</li> <li><code>979d4bbb</code>: unified arguments handling through out grizzly (#28)</li> <li><code>6fad96e4</code>: simplified AtomicMessageQueue and AtomicServiceBus (#27)</li> <li><code>64888c05</code>: implementation of getter tasks (http) (#26)</li> <li><code>2d6862d7</code>: Restored dummy_pymqi.py, the added stuff wasn't needed</li> <li><code>4f21a8d3</code>: MessageQueueUser: get messages that matches expression</li> <li><code>1e1edc44</code>: run code quality workflow when PR is updated</li> <li><code>6dc839c9</code>: corrected sentence in documentation for SleepTask</li> </ul>"},{"location":"framework/changelog/#v120","title":"v1.2.0","text":"<ul> <li><code>6ee5fffe</code>: added documentation for the different task types</li> <li><code>1b91d79b</code>: implementation of AtomicServiceBus variable</li> <li><code>b867d471</code>: ServiceBus support in async-messaged</li> <li><code>83c0ac9c</code>: refactoring of grizzly_extras.messagequeue</li> <li><code>9b9953e6</code>: included mypy extension in devcontainer</li> <li><code>aea0c288</code>: implemented RECEIVE for ServiceBusUser</li> <li><code>b046b60c</code>: Changed spawn_rate to float and fixed tests</li> <li><code>3ce0b102</code>: Changed spawn rate from int to float</li> <li><code>a789a71d</code>: Added support for user weight</li> <li><code>29f7d047</code>: updated atomic variables getting value and arguments</li> <li><code>81ccbed1</code>: change log level for grizzly_extras if started with verbose</li> </ul>"},{"location":"framework/changelog/#v110","title":"v1.1.0","text":"<ul> <li><code>b78be958</code>: new task to parse data</li> <li><code>b2ed98a1</code>: XmlTransformer: match parts of a document, and dump it to string</li> <li><code>9c55e5a3</code>: move testdata production if variable has on_consumer = True</li> <li><code>cfe9875b</code>: specify external dependencies for users and variables in the objects themself</li> <li><code>2140fe79</code>: new variable AtomicMessageQueue</li> <li><code>1f6dba03</code>: refactoring for clearer distinction between utils and step helpers.</li> <li><code>99fab953</code>: fixing empty changelog in workflow@github</li> <li><code>c5ddeeb9</code>: generate changelog when building documentation</li> <li><code>5e595637</code>: fixed missed float -&gt; SleepTask change in test</li> <li><code>2c688554</code>: improved base for adding different types of tasks</li> <li><code>cb8db862</code>: reafactor LocustContext to GrizzlyContext</li> <li><code>3f1137b9</code>: refactoring of grizzly.tasks</li> <li><code>bd3382e0</code>: refactoring RequestContext to RequestTask</li> <li><code>031a9595</code>: handle edge cases with Getitem nodes</li> <li><code>ca7c17d7</code>: handle Getitem nodes when parsing templates for variables</li> <li><code>a1cabb31</code>: only try to remove secrets from dicts</li> <li><code>1145a651</code>: possibility to store json objects/list in variables</li> </ul>"},{"location":"framework/changelog/#v101","title":"v1.0.1","text":"<ul> <li><code>dae7be58</code>: Corrected string comparison operator</li> <li><code>4b8a8470</code>: Adjusted test for messagequeue</li> <li><code>bd9bb977</code>: Fix for being able to log MQ request payload</li> <li><code>cc5dfff6</code>: updated mkdocs to 1.2.3 due to CVE-2021-40978</li> <li><code>604f5704</code>: fixed url</li> </ul>"},{"location":"framework/licenses/","title":"Licenses","text":""},{"location":"framework/licenses/#package","title":"Package","text":""},{"location":"framework/licenses/#the-mit-license-mit","title":"The MIT License (MIT)","text":"<p>Copyright \u00a9 2021 Biometria Ekonomiska F\u00f6rening</p> <p>Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \u201cSoftware\u201d), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:</p> <p>The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.</p> <p>THE SOFTWARE IS PROVIDED \u201cAS IS\u201d, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</p>"},{"location":"framework/licenses/#package-dependencies","title":"Package dependencies","text":"Name Version License azure-core 1.35.0 MIT License azure-iot-device 2.14.0 MIT License azure-servicebus 7.14.2 MIT License azure-storage-blob 12.26.0 MIT License behave 1.3.1 BSD-2-Clause bidict 0.23.1 Mozilla Public License 2.0 (MPL 2.0) blinker 1.9.0 MIT License Brotli 1.1.0 MIT License certifi 2025.8.3 Mozilla Public License 2.0 (MPL 2.0) cffi 1.17.1 MIT License charset-normalizer 3.4.3 MIT click 8.2.1 BSD-3-Clause colorama 0.4.6 BSD License ConfigArgParse 1.7.1 MIT License cryptography 45.0.6 Apache-2.0 OR BSD-3-Clause cucumber-expressions 18.0.1 MIT License cucumber-tag-expressions 6.2.0 MIT License deprecation 2.1.0 Apache Software License Flask 3.1.2 BSD-3-Clause flask-cors 6.0.1 MIT Flask-Login 0.6.3 MIT License gevent 25.5.1 MIT geventhttpclient 2.3.4 MIT greenlet 3.2.4 MIT AND Python-2.0 h11 0.16.0 MIT License idna 3.10 BSD License influxdb 5.3.2 MIT License influxdb-client 1.49.0 MIT License iniconfig 2.1.0 MIT License isodate 0.7.2 BSD License itsdangerous 2.2.0 BSD License janus 2.0.0 Apache Software License Jinja2 3.1.6 BSD License jinja2-simple-tags 0.6.1 BSD License jsonpath-ng 1.7.0 Apache Software License locust 2.40.2 MIT License locust-cloud 1.26.3 MIT lxml 6.0.1 BSD License MarkupSafe 3.0.2 BSD License msgpack 1.1.1 Apache 2.0 packaging 25.0 Apache Software License; BSD License paho-mqtt 1.6.1 Eclipse Public License v2.0 / Eclipse Distribution License v1.0 parse 1.20.2 MIT License parse_type 0.6.6 MIT platformdirs 4.3.8 MIT License pluggy 1.6.0 MIT License ply 3.11 BSD psutil 7.0.0 BSD License pycparser 2.22 BSD License Pygments 2.19.2 BSD License pymqi 1.12.11 Python Software Foundation License pyotp 2.9.0 MIT License PySocks 1.7.1 BSD pytest 8.4.1 MIT License python-dateutil 2.9.0.post0 Apache Software License; BSD License python-engineio 4.12.2 MIT pytz 2025.2 MIT License PyYAML 6.0.2 MIT License pyzmq 27.0.2 BSD License reactivex 4.0.4 MIT License requests 2.32.5 Apache Software License requests-unixsocket2 1.0.0 ISC License (ISCL) roundrobin 0.0.4 MIT License setproctitle 1.3.6 BSD License simple-websocket 1.1.0 MIT License six 1.17.0 MIT License typing_extensions 4.14.1 PSF-2.0 tzdata 2025.2 Apache Software License urllib3 2.5.0 MIT websocket-client 1.8.0 Apache Software License Werkzeug 3.1.3 BSD License wsproto 1.2.0 MIT License zope.event 5.1.1 Zope Public License zope.interface 7.2 Zope Public License"},{"location":"framework/licenses/#native-dependencies","title":"Native dependencies","text":"<p>Container images (both grizzly runtime and Microsoft Visual Code devcontainer) contains dependencies from IBM MQ Redistributable Components.</p> <p>The redistributable license terms may be found in the relevant IBM MQ Program license agreement, which may be found at the IBM Software License Agreements website, or in <code>licenses/</code> directory in the archive.</p>"},{"location":"framework/usage/variables/environment-configuration/","title":"Environment configuration","text":"<p> It is possible to make the feature file environment agnostic by providing a <code>yaml</code> file containing a dictionary with a root node named <code>configuration</code>. The environment configuration file can also be used to store credentials and other sensitive information that should not be under version control.</p> <p>Internally <code>grizzly</code> will check if the environment variable <code>GRIZZLY_CONFIGURATION_FILE</code> is set and contains a valid environment configuration file. When using <code>grizzly-cli</code> you specify the file with <code>-e/--environment-file</code> which then will be set as a value for <code>GRIZZLY_CONFIGURATION_FILE</code>.</p>"},{"location":"framework/usage/variables/environment-configuration/#usage","title":"Usage","text":"<p>In a feature file the dictionary can then be used by prefixing the path of a node under <code>configuration</code> with <code>$conf::&lt;tree path to variable&gt;$</code>.</p> <p>Example:</p> <pre><code>Feature: application test\n  Background: common configuration\n    Given \"1\" users\n    And spawn rate is \"1\" user per second\n    And stop on first failure\n\n  Scenario: frontend\n    Given a user of type \"RestApi\" load testing \"$conf::frontend.host$\"\n    ...\n\n  Scenario: backend\n    Given a user of type \"RestApi\" load testing \"$conf::backend.host$\"\n    And set context variable \"auth.user.username\" to \"$conf::backend.auth.user.username$\"\n    And set context variable \"auth.user.password\" to \"$conf::backend.auth.user.password$\"\n</code></pre> <p>This feature can now be run against a different environment just by creating a new environment configuration file with different values.</p>"},{"location":"framework/usage/variables/environment-configuration/#basic-format","title":"Basic format","text":"<p>An example basic environment configuration file:</p> <pre><code>configuration:\n  frontend:\n    host: https://www.example.com\n  backend:\n    host: https://backend.example.com\n    auth:\n      user:\n        username: bob\n        password: Who-the-f-is-alice\n</code></pre> <p>The only rule for any nodes under <code>configuration</code> is that it must be a dictionary, since the path to a value will be flattened.</p>"},{"location":"framework/usage/variables/environment-configuration/#advanced-format","title":"Advanced format","text":"<p>If you plan to run in multiple environments there could be cases that some environment variables are the same in all of the environments. If this is the case, it is possible to merge multiple environment configuration files (<code>{% merge \"&lt;file1&gt;\" [\"file2\", ... [\"fileN\"]]}</code>), so that common values are only stored in one place.</p> <p>The merging will take place from the bottom up, so contents in the source file where the <code>{% merge ... %}</code> statement is found, any duplicate keys in <code>fileN</code> will override the source values, <code>file2</code> will override those, and lastly <code>file1</code> will override those. So the first specified file to the <code>{% merge ... %}</code> statement will have highest precedence.</p> <pre><code>source &lt; fileN &lt; ... &lt; file2 &lt; file1\n</code></pre> <p>Example:</p> ./common.yaml<pre><code>configuration:\n  backend:\n    auth:\n      user:\n        username: bob\n        password: Who-the-f-is-alice\n</code></pre> ./staging.yaml<pre><code>{% merge \"./common.yaml\" %}\nconfiguration:\n  frontend:\n    host: https://www.staging.example.com\n  backend:\n    host: https://backend.staging.example.com\n</code></pre> ./test.yaml<pre><code>{% merge \"./common.yaml\" %}\nconfiguration:\n  frontend:\n    host: https://www.test.example.com\n  backend:\n    host: https://backend.test.example.com\n</code></pre> <p>For both environment files, this will produce the following configuration keys: - <code>frontend.host</code> - <code>backend.host</code> - <code>backend.auth.user.username</code> - <code>backend.auth.user.password</code></p>"},{"location":"framework/usage/variables/environment-configuration/#azure-keyvault-secrets","title":"Azure Keyvault Secrets","text":"<p>It is possible to store environment configuration in an Azure Keyvault (secrets). The secrets in the keyvault needs to follow the naming convention <code>grizzly--&lt;env&gt;--&lt;variable structure&gt;</code> or <code>grizzly--global--&lt;variable structure&gt;</code>.</p> <p><code>&lt;variable structure&gt;</code> is the tree path to the value, where dots (<code>.</code>) is replaced with dash (<code>-</code>).</p> <p>The values specified in the yaml file will have preceedence over keyvault values. To use keyvault, the key <code>configuration.keyvault</code> should be specified (keyvault URL):</p> <pre><code>configuration:\n  keyvault: https://&lt;keyvault name&gt;.vault.azure.net\n</code></pre> <p>Before starting <code>grizzly-cli</code>, you then have to login with <code>az login</code> so there are valid credentials to be used.</p> <p>Keys with prefix <code>grizzly--global--</code> will be included in all environment files with <code>configuration.keyvault</code> defined. Keys with prefix <code>grizzly--&lt;env&gt;--</code> will be included in environment files where <code>configuration.env</code> matches.</p> <p>If this key is not in the environment file, it will use the name of the configuration file, e.g. <code>local.yaml</code> without <code>configuration.env</code>, will match keys where <code>&lt;env&gt;</code> is <code>local</code>.</p> <p>The following environment configuration file: environments/local.yaml<pre><code>configuration:\n  keyvault: https://grizzly-dummy.vault.azure.net\n</code></pre></p> <p>With the following secrets in <code>grizzly-dummy</code> keyvault:</p> key value grizzly--global--authentication-admin-username root grizzly--global--authentication-admin-password hunter grizzly--local--log-level DEBUG <p>Will result in the following environment configuration:</p> environments/local.lock.yaml<pre><code>configuration:\n  keyvault: https://grizzly-dummy.vault.azure.net\n  authentication:\n    admin:\n      username: root\n      password: hunter\n  log:\n    level: DEBUG\n</code></pre> <p>In your feature-files you can then reference these values, as normal environment configuration:</p> <pre><code>Given set context variable \"auth.user.username\" to \"$conf::authentication.admin.username$\"\nAnd set context variable \"auth.user.password\" to \"$conf::authentication.admin.password$\"\n</code></pre>"},{"location":"framework/usage/variables/templating/","title":"Templating","text":"<p> <code>grizzly</code> has support for templating in both step expression variables (most) and request payload, with the templating backend Jinja2, and also <code>grizzly</code> specific templating variables from environment variables or environment configuration files. The later is resolved before a test is started, while the former is resolved during run time. See environment configuration on how to use <code>$conf::</code>-variables.</p>"},{"location":"framework/usage/variables/templating/#request-payload","title":"Request payload","text":"<p>Request payload is treated as complete Jinja2 templates and has full support for any Jinja2 features. Request payload files must be stored in <code>./features/requests</code> and are referenced in a feature file as a relative path to that directory.</p> <pre><code>.\n\u2514\u2500\u2500 features\n    \u251c\u2500\u2500 load-test.feature\n    \u2514\u2500\u2500 requests\n        \u2514\u2500\u2500 load-test\n            \u2514\u2500\u2500 request.j2.json\n</code></pre> <p>Consider that <code>load-test.feature</code> contains the following steps:</p> <pre><code>Feature: templating example\n  Background: common settings for all scenarios\n    Given \"1\" user\n    And spawn rate is \"1\" user per second\n    And stop on first failure\n\n  Scenario: example\n    Given a user of type \"RestApi\" load testing \"https://localhost\"\n    And repeat for \"3\" iterations\n        And value for variable \"AtomicIntegerIncrementer.items\" is \"1 | step=3\"\n        Then post request \"load-test/request.j2.json\" with name \"template-request\" to endpoint \"/api/v1/test\"\n</code></pre> <p><code>request.j2.json</code> is a full Jinja2 template which will be rendered before the request is sent. The reason for this is that testdata variables can be used in the template, and these can change for each request.</p> <p>If <code>request.j2.json</code> contains the following:</p> <pre><code>[\n    {%- for n in range(AtomicIntegerIncrementer.items) %}\n        {\n            \"item\": {{ n }},\n            \"name\": \"item-{{ n }}\"\n        }\n        {%- if n &lt; AtomicIntegerIncrementer.items - 1 %},{%- endif %}\n    {%- endfor %}\n]\n</code></pre> <p>Since the scenario has been setup to run for <code>3</code> iterations with <code>1</code> user and assumed that we run it locally, or distributed with one worker node, the scenario will run three times.</p> <p>The first post request to <code>/api/v1/test</code> will have the following payload:</p> <pre><code>[\n    {\n        \"item\": 0,\n        \"name\": \"item-0\"\n    }\n]\n</code></pre> <p>The second post request:</p> <pre><code>[\n    {\n        \"item\": 0,\n        \"name\": \"item-0\"\n    },\n    {\n        \"item\": 1,\n        \"name\": \"item-1\"\n    },\n    {\n        \"item\": 2,\n        \"name\": \"item-2\"\n    },\n    {\n        \"item\": 3,\n        \"name\": \"item-3\"\n    }\n]\n</code></pre> <p>The third post request:</p> <pre><code>[\n    {\n        \"item\": 0,\n        \"name\": \"item-0\"\n    },\n    {\n        \"item\": 1,\n        \"name\": \"item-1\"\n    },\n    {\n        \"item\": 2,\n        \"name\": \"item-2\"\n    },\n    {\n        \"item\": 3,\n        \"name\": \"item-3\"\n    },\n    {\n        \"item\": 4,\n        \"name\": \"item-4\"\n    },\n    {\n        \"item\": 5,\n        \"name\": \"item-5\"\n    },\n    {\n        \"item\": 6,\n        \"name\": \"item-6\"\n    }\n]\n</code></pre>"},{"location":"framework/usage/variables/templating/#step-expression","title":"Step expression","text":"<p>Most step expressions also support templating for their variables, for example:</p> <pre><code>And set context variable \"auth.user.username\" to \"$conf::backend.auth.user.username$\"\nAnd set context variable \"auth.refresh_time\" to \"{{ AtomicIntegerIncrementer.refresh_time }}\"\nAnd repeat for \"{{ iterations * 0.25 }}\"\nAnd save statistics to \"influxdb://$conf::statistics.username$:$conf::statistics.password$@{{ influxdb_host }}/$conf::statistics.database$\"\nAnd ask for value of variable \"initial_id\"\nAnd value for variable \"AtomicIntegerIncrementer.id1\" is \"{{ initial_id }}\"\nAnd value for variable \"AtomicIntegerIncrementer.id2\" is \"{{ initial_id }}\"\nThen put request with name \"example-{{ initial_id }}\" to \"/api/v{{ initial_id }}/test\"\n    \"\"\"\n    {\n        \"test\": {\n            \"value\": \"{{ initial_id }}\"\n        }\n    }\n    \"\"\"\n</code></pre>"},{"location":"framework/usage/variables/templating/#custom-filters","title":"Custom filters","text":"<p>It is possible to implement custom jinja2 filters by decorating them with <code>grizzly.testdata.utils.templatingfilter</code>.</p> <pre><code>from grizzly.testdata.utils import templatingfilter\n\n\n@templatingfilter\ndef touppercase(value: str) -&gt; str:\n    return value.upper()\n</code></pre> <p>The name of the filter will be the same as the function name. By using the decorator it will be added to the default filters and can be used in templating expressions, such as:</p> <pre><code>And value for variable \"foo\" is \"bar\"\nAnd value for variable \"bar\" is \"{{ foo | touppercase }}\"\n\nThen log message \"foo={{ foo | touppercase }}, bar={{ bar }}\"\n</code></pre> <p>A good place to define your filters is in your projects <code>features/environment.py</code> file. If you define it in any file containing step implementation the filter might be registered twice, and you'll get an error that an filter already exists with the name.</p>"},{"location":"framework/usage/authentication/aad/","title":"AAD","text":"<p>Grizzly provides a way to get tokens via Azure Active Directory (AAD), in the framework this is implemented by RestApi load user and HTTP client task, via the <code>@refresh_token</code> decorator.</p> <p>It is possible to use it in custom code as well, by implementing a custom class that inherits <code>grizzly.auth.GrizzlyHttpAuthClient</code>.</p> <p>For information about how to set context variables, see Set context variable.</p> <p>Context variable values supports Templating.</p> <p>There are two ways to get an token, see below.</p>"},{"location":"framework/usage/authentication/aad/#grizzly.auth.aad--client-secret","title":"Client secret","text":"<p>Using client secret for an app registration.</p> <pre><code>Given a user of type \"RestApi\" load testing \"https://api.example.com\"\nAnd set context variable \"auth.tenant\" to \"&lt;provider&gt;\"\nAnd set context variable \"auth.client.id\" to \"&lt;client id&gt;\"\nAnd set context variable \"auth.client.secret\" to \"&lt;client secret&gt;\"\nAnd set context variable \"auth.client.resource\" to \"&lt;resource url/guid&gt;\"\n</code></pre>"},{"location":"framework/usage/authentication/aad/#grizzly.auth.aad--username-and-password","title":"Username and password","text":"<p>Using a username and password, with optional MFA authentication.</p> <p><code>auth.user.redirect_uri</code> needs to correspond to the endpoint that the client secret is registrered for.</p> <pre><code>Given a user of type \"RestApi\" load testing \"https://api.example.com\"\nAnd set context variable \"auth.provider\" to \"&lt;provider&gt;\"\nAnd set context variable \"auth.client.id\" to \"&lt;client id&gt;\"\nAnd set context variable \"auth.user.username\" to \"alice@example.onmicrosoft.com\"\nAnd set context variable \"auth.user.password\" to \"HemL1gaArn3!\"\nAnd set context variable \"auth.user.redirect_uri\" to \"/app-registrered-redirect-uri\"\n</code></pre>"},{"location":"framework/usage/authentication/aad/#grizzly.auth.aad--mfa-totp","title":"MFA / TOTP","text":"<p>If the user is required to have a MFA method, support for software based TOTP tokens are supported. The user must first have this method configured.</p>"},{"location":"framework/usage/authentication/aad/#grizzly.auth.aad--configure-totp","title":"Configure TOTP","text":"<ol> <li> <p>Login to the accounts My signins</p> </li> <li> <p>Click on <code>Security info</code></p> </li> <li> <p>Click on <code>Add sign-in method</code></p> </li> <li> <p>Choose <code>Authenticator app</code></p> </li> <li> <p>Click on <code>I want to use another authenticator app</code></p> </li> <li> <p>Click on <code>Next</code></p> </li> <li> <p>Click on <code>Can't scan image?</code></p> </li> <li> <p>Copy <code>Secret key</code> and save it some where safe</p> </li> <li> <p>Click on <code>Next</code></p> </li> <li> <p>Open a terminal and run the following command:</p> BashPowerShell <pre><code>OTP_SECRET=\"&lt;secret key from step 8&gt;\" grizzly-cli auth\n</code></pre> <pre><code>$Env:OTP_SECRET = \"&lt;secret key from step 8&gt;\"\ngrizzly-cli auth\n</code></pre> </li> <li> <p>Copy the code generate from above command, go back to the browser and paste it into the text field and click <code>Next</code></p> </li> <li> <p>Finish the wizard</p> </li> </ol> <p>The user now have software based TOTP tokens as MFA method, where <code>grizzly</code> will act as the authenticator app.</p>"},{"location":"framework/usage/authentication/aad/#grizzly.auth.aad--example","title":"Example","text":"<p>In addition to the \"Username and password\" example, the context variable <code>auth.user.otp_secret</code> must also be set.</p> <pre><code>Given a user of type \"RestApi\" load testing \"https://api.example.com\"\nAnd set context variable \"auth.tenant\" to \"&lt;provider&gt;\"\nAnd set context variable \"auth.client.id\" to \"&lt;client id&gt;\"\nAnd set context variable \"auth.user.username\" to \"alice@example.onmicrosoft.com\"\nAnd set context variable \"auth.user.password\" to \"HemL1gaArn3!\"\nAnd set context variable \"auth.user.redirect_uri\" to \"/app-registrered-redirect-uri\"\nAnd set context variable \"auth.user.otp_secret\" to \"asdfasdf\"  # &lt;-- `Secret key` from Step 8 in \"Configure TOTP\"\n</code></pre>"},{"location":"framework/usage/variables/testdata/","title":"Testdata","text":"<p>Package containg special variables that can be used in a feature file and is synchronized between locust workers.</p> <p>It is possible to implement custom testdata variables, the only requirement is that they inherit <code>grizzly.testdata.variables.AtomicVariable</code>.</p> <p>When initializing the variable, the full namespace has to be specified as <code>name</code> in the scenario Set variable value step.</p> <p>There are examples of this in the example.</p>"},{"location":"framework/usage/variables/testdata/csv_reader/","title":"CSV Reader","text":"<p>Read a CSV file and provides a new row from the CSV file each time it is accessed.</p> <p>Info</p> <p>CSV files must have headers for each column, since these are used to reference the value.</p>"},{"location":"framework/usage/variables/testdata/csv_reader/#grizzly.testdata.variables.csv_reader--format","title":"Format","text":"<p>Value is the path, relative to <code>requests/</code>, of an file ending with <code>.csv</code>.</p>"},{"location":"framework/usage/variables/testdata/csv_reader/#grizzly.testdata.variables.csv_reader--arguments","title":"Arguments","text":"Name Type Description Default <code>repeat</code> <code>bool</code> wheter values should be reused, e.g. when reaching the end it should start from the beginning again <code>False</code> <code>random</code> <code>bool</code> if rows should be selected by random, instead of sequential from first to last <code>False</code>"},{"location":"framework/usage/variables/testdata/csv_reader/#grizzly.testdata.variables.csv_reader--example","title":"Example","text":"requests/example.csv<pre><code>username,password\nbob1,some-password\nalice1,some-other-password\nbob2,password\n</code></pre> <pre><code>And value for variable \"AtomicCsvReader.example\" is \"example.csv | random=False, repeat=True\"\nThen post request with name \"authenticate\" to endpoint \"/api/v1/authenticate\"\n  \"\"\"\n  {\n      \"username\": \"{{ AtomicCsvReader.example.username }}\",\n      \"password\": \"{{ AtomicCsvReader.example.password }}\"\n  }\n  \"\"\"\n</code></pre> <p>First request the payload will be:</p> <pre><code>{\n    \"username\": \"bob1\",\n    \"password\": \"some-password\"\n}\n</code></pre> <p>Second request:</p> <pre><code>{\n    \"username\": \"alice1\",\n    \"password\": \"some-other-password\"\n}\n</code></pre>"},{"location":"framework/usage/variables/testdata/csv_writer/","title":"CSV Writer","text":"<p>Write values to a CSV file.</p> <p>Info</p> <p>CSV files must have headers for each column, since these are used to reference the value.</p> <p>When setting the value of the variable there must be one value per specified header.</p>"},{"location":"framework/usage/variables/testdata/csv_writer/#grizzly.testdata.variables.csv_writer--format","title":"Format","text":"<p>Value is the path, relative to <code>requests/</code>, to a file ending with <code>.csv</code>.</p>"},{"location":"framework/usage/variables/testdata/csv_writer/#grizzly.testdata.variables.csv_writer--arguments","title":"Arguments","text":"Name Type Description Default <code>headers</code> <code>list[str]</code> comma separated list of headers to be used in destination file required <code>overwrite</code> <code>bool</code> if destination file exists and should be overwritten <code>False</code>"},{"location":"framework/usage/variables/testdata/csv_writer/#grizzly.testdata.variables.csv_writer--example","title":"Example","text":"<pre><code>And value for variable \"AtomicCsvWriter.output\" is \"output.csv | headers='foo,bar'\"\n...\nAnd value for variable \"AtomicCsvWriter.output\" is \"{{ foo_value }}, {{ bar_value }}\"\n</code></pre>"},{"location":"framework/usage/variables/testdata/date/","title":"Date","text":"<p>Format and create dates.</p>"},{"location":"framework/usage/variables/testdata/date/#grizzly.testdata.variables.date--format","title":"Format","text":"<p>Initial value can, other than a parseable datetime string, be <code>now</code>. Each time the variable is accessed the value will represent that date and time at the time of access.</p>"},{"location":"framework/usage/variables/testdata/date/#grizzly.testdata.variables.date--arguments","title":"Arguments","text":"Name Type Description Default <code>format</code> <code>str</code> python <code>strftime</code> format string required <code>timezone</code> <code>str</code> valid timezone name <code>None</code> (local) <code>offset</code> <code>str</code> time span string describing the offset, <code>Y</code> = years, <code>M</code> = months, <code>D</code> = days, <code>h</code> = hours, <code>m</code> = minutes, <code>s</code> = seconds, e.g. <code>1Y-2M10D</code> <code>None</code>"},{"location":"framework/usage/variables/testdata/date/#grizzly.testdata.variables.date--example","title":"Example","text":"<pre><code>And value for variable \"AtomicDate.arrival\" is \"now | format='%Y-%m-%dT%H:%M:%S.000Z', timezone=UTC\"\n</code></pre> <p>This can then be used in a template:</p> <pre><code>{\n    \"arrival\": \"{{ AtomicDate.arrival }}\",\n    \"location\": \"Port of Shanghai\"\n}\n</code></pre>"},{"location":"framework/usage/variables/testdata/directory_contents/","title":"Directory Contents","text":"<p>Provide a list of files in the specified directory.</p>"},{"location":"framework/usage/variables/testdata/directory_contents/#grizzly.testdata.variables.directory_contents--format","title":"Format","text":"<p>Relative path of a directory under <code>requests/</code>.</p>"},{"location":"framework/usage/variables/testdata/directory_contents/#grizzly.testdata.variables.directory_contents--arguments","title":"Arguments","text":"Name Type Description Default <code>repeat</code> <code>bool</code> whether values should be reused, e.g. when reaching the end it should start from the beginning again <code>False</code> <code>random</code> <code>bool</code> if files should be selected by random, instead of sequential from first to last <code>False</code>"},{"location":"framework/usage/variables/testdata/directory_contents/#grizzly.testdata.variables.directory_contents--example","title":"Example","text":"<p>With the following directory structure:</p> <pre><code>.\n\u2514\u2500\u2500 requests\n    \u2514\u2500\u2500 files\n        \u251c\u2500\u2500 file1.bin\n        \u251c\u2500\u2500 file2.bin\n        \u251c\u2500\u2500 file3.bin\n        \u251c\u2500\u2500 file4.bin\n        \u2514\u2500\u2500 file5.bin\n</code></pre> <pre><code>And value for variable \"AtomicDirectoryContents.files\" is \"files/ | repeat=True, random=False\"\nAnd put request \"{{ AtomicDirectoryContents.files }}\" with name \"put-file\" to endpoint \"/tmp\"\n</code></pre> <p>First request will provide <code>file1.bin</code>, second <code>file2.bin</code> etc.</p>"},{"location":"framework/usage/variables/testdata/integer_incrementer/","title":"Integer Incrementer","text":"<p>Unique incremented integer each time it is accessed.</p> <p>Useful to generate unique ID for each request.</p>"},{"location":"framework/usage/variables/testdata/integer_incrementer/#grizzly.testdata.variables.integer_incrementer--format","title":"Format","text":"<p>The first value of an integer that is going to be used.</p>"},{"location":"framework/usage/variables/testdata/integer_incrementer/#grizzly.testdata.variables.integer_incrementer--arguments","title":"Arguments","text":"Name Type Description Default <code>step</code> <code>int</code> how much the value should increment each time <code>1</code> <code>persist</code> <code>bool</code> if the initial value should be persist and loaded from file <code>False</code>"},{"location":"framework/usage/variables/testdata/integer_incrementer/#grizzly.testdata.variables.integer_incrementer--example","title":"Example","text":"example.feature<pre><code>And value for variable \"AtomicIntegerIncrementer.unique_id\" is \"100 | step=10\"\nAnd value for variable \"AtomicIntegerIncrementer.persistent\" is \"10 | step=5, persist=True\"\n</code></pre> <p>This can then be used in a template:</p> <pre><code>{\n    \"id\": {{ AtomicIntegerIncrementer.unique_id }}\n}\n</code></pre> <p>Values of <code>AtomicIntegerIncrementer.unique_id</code>, per run and iteration:</p> <ol> <li> <p>Run</p> <ol> <li> <p><code>100</code></p> </li> <li> <p><code>110</code></p> </li> <li> <p><code>120</code></p> </li> <li> <p>...</p> </li> </ol> </li> <li> <p>Run</p> <ol> <li> <p><code>100</code></p> </li> <li> <p><code>110</code></p> </li> <li> <p><code>120</code></p> </li> <li> <p>...</p> </li> </ol> </li> </ol> <p>Values of <code>AtomicIntegerIncrementer.persistent</code>, per run and iteration, for 4 iterations:</p> <ol> <li> <p>Run (<code>features/persistent/example.json</code> missing)</p> <ol> <li> <p><code>5</code></p> </li> <li> <p><code>15</code></p> </li> <li> <p><code>20</code></p> </li> <li> <p><code>25</code></p> </li> </ol> </li> <li> <p>Run (<code>features/persistent/example.json</code> created by Run 1, due to <code>persistent=True</code>), initial value <code>25 | step=5, persist=True</code> will be read from the file and override what is written in <code>example.feature</code></p> <ol> <li> <p><code>30</code></p> </li> <li> <p><code>35</code></p> </li> <li> <p><code>40</code></p> </li> <li> <p><code>45</code></p> </li> </ol> </li> </ol>"},{"location":"framework/usage/variables/testdata/json_reader/","title":"JSON Reader","text":"<p>Read a JSON file that contains a list of objects and provides a new object from the list each time it is accessed.</p> <p>The JSON file must contain a list of JSON objects, and each object must have the same properties.</p>"},{"location":"framework/usage/variables/testdata/json_reader/#grizzly.testdata.variables.json_reader--format","title":"Format","text":"<p>Value is the path, relative to <code>requests/</code>, of an file ending with <code>.json</code>.</p>"},{"location":"framework/usage/variables/testdata/json_reader/#grizzly.testdata.variables.json_reader--arguments","title":"Arguments","text":"Name Type Description Default <code>repeat</code> <code>bool</code> whether values should be reused, e.g. when reaching the end it should start from the beginning again <code>False</code> <code>random</code> <code>bool</code> if rows should be selected by random, instead of sequential from first to last <code>False</code>"},{"location":"framework/usage/variables/testdata/json_reader/#grizzly.testdata.variables.json_reader--example","title":"Example","text":"requests/example.json<pre><code>[\n  {\n    \"username\": \"bob1\",\n    \"password\": \"some-password\"\n  },\n  {\n    \"username\": \"alice1\",\n    \"password\": \"some-other-password\"\n  },\n  {\n    \"username\": \"bob2\",\n    \"password\": \"password\"\n  }\n]\n</code></pre> <pre><code>And value for variable \"AtomicJsonReader.example\" is \"example.json | random=False, repeat=True\"\n\n# Reference property by property\nThen post request with name \"authenticate\" to endpoint \"/api/v1/authenticate\"\n  \"\"\"\n  {\n      \"username\": \"{{ AtomicJsonReader.example.username }}\",\n      \"password\": \"{{ AtomicJsonReader.example.password }}\"\n  }\n  \"\"\"\n\n# Reference object\nThen post request with name \"authenticate\" to endpoint \"/api/v1/authenticate\"\n  \"\"\"\n  {{ AtomicJsonReader.example }}\n  \"\"\"\n</code></pre> <p>First request the payload will be:</p> <pre><code>{\n    \"username\": \"bob1\",\n    \"password\": \"some-password\"\n}\n</code></pre> <p>Second request:</p> <pre><code>{\n    \"username\": \"alice1\",\n    \"password\": \"some-other-password\"\n}\n</code></pre>"},{"location":"framework/usage/variables/testdata/random_integer/","title":"Random Integer","text":"<p>Provide an random integer between specified interval.</p>"},{"location":"framework/usage/variables/testdata/random_integer/#grizzly.testdata.variables.random_integer--format","title":"Format","text":"<p>Interval from which the integer should be generated from, in the format <code>&lt;min&gt;..&lt;max&gt;</code>.</p>"},{"location":"framework/usage/variables/testdata/random_integer/#grizzly.testdata.variables.random_integer--example","title":"Example","text":"<pre><code>And value for variable \"AtomicRandomInteger.weight\" is \"10..30\"\n</code></pre> <p>This can then be used in a template: <pre><code>{\n    \"weight_tons\": {{ AtomicRandomInteger.weight }}\n}\n</code></pre></p> <p><code>AtomicRandomInteger.weight</code> will then be anything between, and including, <code>10</code> and <code>30</code>.</p>"},{"location":"framework/usage/variables/testdata/random_string/","title":"Random String","text":"<p>Generate a specified number of unique strings, based on a string format pattern.</p> <p>The list is pre-populated to ensure that each string is unique.</p>"},{"location":"framework/usage/variables/testdata/random_string/#grizzly.testdata.variables.random_string--format","title":"Format","text":"<p>Initial value is a string pattern specified with <code>%s</code> and <code>%d</code>, or <code>%g</code>.</p> <ul> <li><code>%s</code> represents one ASCII letter</li> <li><code>%d</code> represents one digit between <code>0</code> and <code>9</code></li> <li><code>%g</code> represents one complete UUID(4), cannot be combined with other string patterns</li> </ul> <p>Parts of the string can be static, e.g. not random.</p>"},{"location":"framework/usage/variables/testdata/random_string/#grizzly.testdata.variables.random_string--arguments","title":"Arguments","text":"Name Type Description Default <code>count</code> <code>int</code> number of unique strings to generate <code>1</code> <code>upper</code> <code>bool</code> if the strings should be in upper case <code>False</code>"},{"location":"framework/usage/variables/testdata/random_string/#grizzly.testdata.variables.random_string--example","title":"Example","text":"<pre><code>And value for variable \"AtomicRandomString.registration_plate_number\" is \"%s%sZ%d%d0 | upper=True, count=100\"\nAnd value for variable \"AtomicRandomString.uuid\" is \"%g | count=100\"\n</code></pre> <p>This can then be used in a template: <pre><code>{\n    \"registration_plate_number\": \"{{ AtomicRandomString.registration_plate_number }}\"\n}\n</code></pre></p> <p><code>AtomicRandomString.registration_plate_number</code> will then be a string in the format <code>[A-Z][A-Z]Z[0-9][0-9]0</code> and there will be <code>100</code> unique values for disposal.</p>"},{"location":"framework/usage/variables/templating/filters/","title":"Filters","text":"<p>Grizzly native templating filters that can be used to manipulate variable values where they are used.</p>"},{"location":"framework/usage/variables/templating/filters/#grizzly.testdata.filters.b64decode","title":"b64decode(value)","text":"<p>Base64 decode string value.</p>"},{"location":"framework/usage/variables/templating/filters/#grizzly.testdata.filters.b64decode--example","title":"Example","text":"<pre><code>Given value of variable \"input_value\" is \"Zm9vYmFy\"\nThen log message \"input_value: {{ input_value | b64decode }}\"\n</code></pre>"},{"location":"framework/usage/variables/templating/filters/#grizzly.testdata.filters.b64decode--arguments","title":"Arguments","text":"Name Type Description Default <code>value</code> <code>str</code> <p>value to base64 encode</p> required"},{"location":"framework/usage/variables/templating/filters/#grizzly.testdata.filters.b64encode","title":"b64encode(value)","text":"<p>Base64 encode string value.</p>"},{"location":"framework/usage/variables/templating/filters/#grizzly.testdata.filters.b64encode--example","title":"Example","text":"<pre><code>Given value of variable \"input_value\" is \"foobar\"\nThen log message \"input_value (base64): {{ input_value | b64encode }}\"\n</code></pre>"},{"location":"framework/usage/variables/templating/filters/#grizzly.testdata.filters.b64encode--arguments","title":"Arguments","text":"Name Type Description Default <code>value</code> <code>str</code> <p>value to base64 encode</p> required"},{"location":"framework/usage/variables/templating/filters/#grizzly.testdata.filters.fromtestdata","title":"fromtestdata(value)","text":"<p>Convert testdata object to a dictionary.</p> <p>Nested testdata is a <code>namedtuple</code> object, e.g. <code>AtomicCsvReader.test</code>, where column values are accessed with <code>AtomicCsvReader.test.header1</code>. If anything should be done for the whole row/item it must be converted to a dictionary.</p>"},{"location":"framework/usage/variables/templating/filters/#grizzly.testdata.filters.fromtestdata--example","title":"Example","text":"<pre><code>Given value of variable \"AtomicCsvReader.test\" is \"test.csv\"\n\nThen log message \"test={{ AtomicCsvReader.test | fromtestdata | stringify }}\"\n</code></pre>"},{"location":"framework/usage/variables/templating/filters/#grizzly.testdata.filters.fromtestdata--arguments","title":"Arguments","text":"Name Type Description Default <code>value</code> <code>NamedTuple</code> <p>testdata objekt</p> required"},{"location":"framework/usage/variables/templating/filters/#grizzly.testdata.filters.literal_eval","title":"literal_eval(value)","text":"<p>Evaluate python objects serialized as strings.</p> <p>Returns the string as the actual python object.</p>"},{"location":"framework/usage/variables/templating/filters/#grizzly.testdata.filters.literal_eval--example","title":"Example","text":"<pre><code>Given value of variable \"value\" is \"{'hello': 'world'}\"\nThen log message \"value: {{ value | literal_eval }}\"\n</code></pre>"},{"location":"framework/usage/variables/templating/filters/#grizzly.testdata.filters.literal_eval--arguments","title":"Arguments","text":"Name Type Description Default <code>value</code> <code>str</code> <p>string representation of python object</p> required"},{"location":"framework/usage/variables/templating/filters/#grizzly.testdata.filters.stringify","title":"stringify(value)","text":"<p>Convert python object to JSON string.</p> <p>Convert any (valid) python object to a JSON string.</p>"},{"location":"framework/usage/variables/templating/filters/#grizzly.testdata.filters.stringify--example","title":"Example","text":"<pre><code>Given value of variable \"AtomicCsvReader.test\" is \"test.csv\"\n\nThen log message \"test={{ AtomicCsvReader.test | fromtestdata | stringify }}\"\n</code></pre>"},{"location":"framework/usage/variables/templating/filters/#grizzly.testdata.filters.stringify--arguments","title":"Arguments","text":"Name Type Description Default <code>value</code> <code>JsonSerializable</code> <p>value to convert to JSON string</p> required"},{"location":"framework/usage/tasks/","title":"Tasks","text":"<p>Tasks are functionality that is executed by <code>locust</code> at run time as they are specified in the feature file.</p> <p>The most essential task is Request task, which all load users is using to make requests to the endpoint that is being load tested.</p> <p>All other tasks are helper tasks for things that needs to happen after or before a Request task, stuff like extracting information from a previous response or fetching additional test data from a different endpoint (client tasks).</p>"},{"location":"framework/usage/tasks/#grizzly.tasks--custom","title":"Custom","text":"<p>It is possible to implement custom tasks, the only requirement is that they inherit <code>grizzly.tasks.GrizzlyTask</code>. To get them to be executed by <code>grizzly</code>, a step implementation is also needed.</p> <p>You can also set some metadata (timeout, method, name) on a task with the <code>@grizzlytask.metadata</code> decorator. This is not mandatory, but can be useful if the task should not be able to run forever.</p> <p>Boilerplate example of a custom task:</p> <pre><code>from typing import Any, cast\n\nfrom grizzly.context import GrizzlyContext\nfrom grizzly.tasks import GrizzlyTask, grizzlytask\nfrom grizzly.scenarios import GrizzlyScenario\nfrom grizzly.types.behave import Context, then\n\n\nclass TestTask(GrizzlyTask):\n    def __call__(self) -&gt; grizzlytask:\n        @grizzlytask.metadata(timeout=20.0, method='TASK', name='TestTask')\n        @grizzlytask\n        def task(parent: GrizzlyScenario) -&gt; Any:\n            print(f'{self.__class__.__name__}::task called')\n\n        @task.on_start\n        def on_start() -&gt; None:\n            print(f'{self.__class__.__name__}::on_start called')\n\n        @task.on_stop\n        def on_stop() -&gt; None:\n            print(f'{self.__class__.__name__}::on_stop called')\n\n        return task\n\n\n@then('run `TestTask`')\ndef step_run_testtask(context: Context) -&gt; None:\n    grizzly = cast(GrizzlyContext, context.grizzly)\n    grizzly.scenario.tasks.add(TestTask())\n</code></pre> <p>There are examples of this in the example documentation.</p>"},{"location":"framework/usage/tasks/async_group/","title":"Async Group","text":"<p>Task runs all requests in the group asynchronously.</p> <p>The name of requests added to the group will be prefixed with async group <code>&lt;name&gt;:</code></p> <p>Enable <code>gevent</code> debugging for this task by running with argument <code>--verbose</code> and setting environment variable <code>GEVENT_MONITOR_THREAD_ENABLE</code>.</p>"},{"location":"framework/usage/tasks/async_group/#grizzly.tasks.async_group--step-implementations","title":"Step implementations","text":"<ul> <li> <p>Open</p> </li> <li> <p>Close</p> </li> </ul> <p>Requests are added to the group with the same step implementations as Request task.</p>"},{"location":"framework/usage/tasks/async_group/#grizzly.tasks.async_group--statistics","title":"Statistics","text":"<p>Executions of this task will be visible in <code>locust</code> request statistics with request type <code>ASYNC</code>. <code>name</code> will be suffixed with <code>(&lt;n&gt;)</code>, where <code>&lt;n&gt;</code> is the number of requests in the group. Each request in the group will have its own entry in the statistics as an ordinary Request task.</p>"},{"location":"framework/usage/tasks/async_timer/","title":"Async Timer","text":"<p>Timer can be started in one scenario, on one worker, and be stopped in another scenario on another worker.</p> <p>This is useful if a timers is started in many different scenarios, but are stopped in one scenario which does not have any other information than the id (which it might have received from a queue or topic), and hence the timer name is not know at the time it is being stopped.</p>"},{"location":"framework/usage/tasks/async_timer/#grizzly.tasks.async_timer--step-implementations","title":"Step implementations","text":"<ul> <li> <p>Start</p> </li> <li> <p>Stop</p> </li> </ul>"},{"location":"framework/usage/tasks/async_timer/#grizzly.tasks.async_timer--statistics","title":"Statistics","text":"<p>When running distributed, the timer statistics piggyback with normal locust statistics which is sent from workers (default every 3 seconds) via the event <code>locust.event.report_to_master</code>, and is then handled on master with the <code>locust.event.worker_report</code> event. If running local, it will be started and stopped in \"real-time\".</p> <p>When the stop-part of this task is executed, a \"request\" with method <code>DOC</code> and name of the timer will be added to the request statistics. If anything goes wrong when executing the task, the error will also visible in the locust failure summary.</p> <p>Any timers that has not been stopped when the load test is finished, will be listed in the behave failure summary, and the test will be marked as failed.</p>"},{"location":"framework/usage/tasks/conditional/","title":"Conditional","text":"<p>Task executes one or more other tasks based on <code>condition</code>.</p> <p>This is useful when a set of tasks should be executed if <code>condition</code> is <code>True</code>, and another set of tasks if <code>condition</code> is <code>False</code>.</p> <p>All tasks created between conditional if and conditional end will be wrapped in this instance and executed conditionally. If the task has its own <code>name</code> attribute, it will be prefixed with this tasks <code>name</code>.</p> <p>The conditional else step expression is optional, if not used no additional tasks will be executed if <code>condition</code> is false.</p>"},{"location":"framework/usage/tasks/conditional/#grizzly.tasks.conditional--step-implementations","title":"Step implementations","text":"<ul> <li> <p>If</p> </li> <li> <p>Else (optional)</p> </li> <li> <p>End</p> </li> </ul>"},{"location":"framework/usage/tasks/conditional/#grizzly.tasks.conditional--statistics","title":"Statistics","text":"<p>Executions of this task will be visible in <code>locust</code> request statistics with request type <code>COND</code>. <code>name</code> is suffixed with <code>&lt;condition&gt; (&lt;n&gt;)</code>, where <code>&lt;condition&gt;</code> is the runtime resolved condition and <code>&lt;n&gt;</code> is the number of tasks that is executed for the resolved condition. Each task in the set for <code>condition</code> will have its own entry in the statistics, see respective tasks documentation.</p>"},{"location":"framework/usage/tasks/date/","title":"Date","text":"<p>Task parses a string representation of a date/time and allows transformation of it, such as specifying an offset or changing the format, and saves the result as a date/time string in an variable.</p>"},{"location":"framework/usage/tasks/date/#grizzly.tasks.date--step-implementations","title":"Step implementations","text":"<ul> <li>Parse</li> </ul>"},{"location":"framework/usage/tasks/date/#grizzly.tasks.date--statistics","title":"Statistics","text":"<p>No statistics available.</p>"},{"location":"framework/usage/tasks/keystore/","title":"Keystore","text":"<p>Tasks sets and gets values from a distributed keystore. This makes is possible to share values between scenarios.</p> <p>Retreived (get) values are rendered before setting the variable. Stored (set) values are not rendered, so it is possible to store templates.</p>"},{"location":"framework/usage/tasks/keystore/#grizzly.tasks.keystore--step-implementations","title":"Step implementations","text":"<ul> <li> <p>Get</p> </li> <li> <p>Get default</p> </li> <li> <p>Get remove</p> </li> <li> <p>Set</p> </li> <li> <p>Set text</p> </li> <li> <p>Increment default with step</p> </li> <li> <p>Decrement default with step</p> </li> <li> <p>Pop</p> </li> <li> <p>Push</p> </li> <li> <p>Push text</p> </li> <li> <p>Remove</p> </li> </ul>"},{"location":"framework/usage/tasks/keystore/#grizzly.tasks.keystore--statistics","title":"Statistics","text":"<p>This task only has request statistics entry, of type <code>KEYS</code>, if a key (without <code>default_value</code>) that does not have a value set is retrieved.</p>"},{"location":"framework/usage/tasks/keystore/#grizzly.tasks.keystore--arguments","title":"Arguments","text":"Name Type Description Default <code>key</code> <code>str</code> name of key in keystore required <code>action</code> <code>Action</code> literal <code>set</code> or <code>get</code> required <code>action_context</code> <code>str | Any</code> when <code>action</code> is <code>get</code> it must be a <code>str</code> (variable name), for <code>set</code> any goes (as long as it is json serializable and not <code>None</code>) required <code>default_value</code> <code>Any | None</code> used when <code>action</code> is <code>get</code> and <code>key</code> does not exist in the keystore required <p>Values for <code>set</code> and <code>push</code> operations are not rendered by default, they will be pushed as is. By using argument <code>render</code>, it is possible to change this behaviour, e.g.:</p> <pre><code>Given value of variable \"identification\" is \"foobar\"\nThen push \"processed\" in keystore with value \"{{ identification }} | render=True\"\n</code></pre>"},{"location":"framework/usage/tasks/log_message/","title":"Log Message","text":"<p>Task calls the <code>grizzly</code> logger to print a log message at level <code>INFO</code>. It can be used to visualize values for templating variables.</p>"},{"location":"framework/usage/tasks/log_message/#grizzly.tasks.log_message--step-implementations","title":"Step implementations","text":"<ul> <li>Print</li> </ul>"},{"location":"framework/usage/tasks/log_message/#grizzly.tasks.log_message--statistics","title":"Statistics","text":"<p>This task does not have any request statistics entries.</p>"},{"location":"framework/usage/tasks/loop/","title":"Loop","text":"<p>Task executes the wraped tasks for all values in provided list.</p> <p>All task created between Start and End will be wrapped in this instance and executed for all values in the provided list (must be in JSON format).</p>"},{"location":"framework/usage/tasks/loop/#grizzly.tasks.loop--step-implementations","title":"Step implementations","text":"<ul> <li> <p>Start</p> </li> <li> <p>End</p> </li> </ul>"},{"location":"framework/usage/tasks/loop/#grizzly.tasks.loop--statistics","title":"Statistics","text":"<p>Executions of this task will be visible in <code>locust</code> request statistics with request type <code>LOOP</code> and <code>name</code> is suffixed with <code>(&lt;n&gt;)</code>, where <code>n</code> is the number of wrapped tasks.</p> <p>Each wrapped task will have its own entry in the statistics, see respective tasks documentation.</p>"},{"location":"framework/usage/tasks/request/","title":"Request","text":"<p>Task calls the <code>request</code> method of a <code>grizzly.users</code> implementation.</p> <p>This is the most essential task in <code>grizzly</code>, it defines requests that the specified load user is going to execute against the target under test.</p> <p>Optionally, the MIME type of the response can be set, this has to be done if any of the response steps is going to be used.</p>"},{"location":"framework/usage/tasks/request/#grizzly.tasks.request--step-implementations","title":"Step implementations","text":"<ul> <li> <p>Text with name endpoint</p> </li> <li> <p>File with name endpoint</p> </li> <li> <p>File with name</p> </li> <li> <p>Text with name</p> </li> </ul>"},{"location":"framework/usage/tasks/request/#grizzly.tasks.request--statistics","title":"Statistics","text":"<p>Executions of this task will be visible in <code>locust</code> request statistics with request type <code>method</code>.</p>"},{"location":"framework/usage/tasks/request/#grizzly.tasks.request--arguments","title":"Arguments","text":"Name Type Description Default <code>method</code> <code>RequestMethod</code> method used for the request, e.g. <code>GET</code> or <code>POST</code>, also includes the direction (to or from) required <code>name</code> <code>str</code> name of the request, used in <code>locust</code> statistics required <code>endpoint</code> <code>str</code> endpoint on the load testing target, have different meaning depending on the specified load user required <code>source</code> <code>str</code> payload data sent to <code>endpoint</code>, can be a file path <code>None</code>"},{"location":"framework/usage/tasks/request/#grizzly.tasks.request--format","title":"Format","text":""},{"location":"framework/usage/tasks/request/#grizzly.tasks.request--endpoint","title":"endpoint","text":"<p>All pipe arguments will be removed from <code>endpoint</code> before creating the task instance. Depending on the load user, other pipe arguments might be supported.</p> <pre><code>&lt;endpoint&gt; [| content_type=&lt;content_type&gt;[, timeout=&lt;seconds]]\n</code></pre> Name Type Description Default <code>endpoint</code> <code>str</code> endpoint in format that the specified load user understands required <code>content_type</code> <code>TransformerContentType</code> MIME type of response from <code>endpoint</code> <code>None</code> <code>timeout</code> <code>float</code> maximum number of seconds that the task is allowed to execute, if it is exceeded <code>TaskTimeOutError</code> will be raised <code>None</code> (indefinitely) <p>Specifying MIME/content type as an argument to <code>endpoint</code> is the same as using content type step.</p> <pre><code>Then put request \"test/request.j2.json\" with name \"test-put\" to endpoint \"/api/test | content_type=json\"\n\n# same as\nThen put request \"test/request.j2.json\" with name \"test-put\" to endpoint \"/api/test\"\nAnd set response content type to \"application/json\"\n</code></pre>"},{"location":"framework/usage/tasks/set_variable/","title":"Set Variable","text":"<p>Task sets a testdata variable during runtime.</p>"},{"location":"framework/usage/tasks/set_variable/#grizzly.tasks.set_variable--step-implementations","title":"Step implementations","text":"<ul> <li>Set variable value</li> </ul>"},{"location":"framework/usage/tasks/set_variable/#grizzly.tasks.set_variable--statistics","title":"Statistics","text":"<p>This task does not have any request statistics entries.</p>"},{"location":"framework/usage/tasks/transformer/","title":"Transformer","text":"<p>Task transforms a variable value to a document of correct type, so an expression can be used to extract values from the document to be used in another variable.</p> <p>This is especially useful when used in combination with other variables variables containing a lot of information, where many parts of a message can be useful to re-use.</p> <p>Instances of this task is created with the step expression:</p>"},{"location":"framework/usage/tasks/transformer/#grizzly.tasks.transformer--step-implementations","title":"Step implementations","text":"<ul> <li>Parse</li> </ul>"},{"location":"framework/usage/tasks/transformer/#grizzly.tasks.transformer--statistics","title":"Statistics","text":"<p>Executions of this task will not be visible in <code>locust</code> request statistics, unless something goes wrong. It will then have the request type <code>TRNSF</code>.</p>"},{"location":"framework/usage/tasks/transformer/#grizzly.tasks.transformer--pipe-arguments","title":"Pipe arguments","text":"<ul> <li><code>min_matches</code> int - minimum number of matches that the expression should return, <code>-1</code> as value will allow any number of matches (default <code>1</code>)</li> </ul>"},{"location":"framework/usage/tasks/until/","title":"Until","text":"<p>Task calls the <code>request</code> method of a <code>grizzly.users</code> implementation, until condition matches the payload returned for the request.</p>"},{"location":"framework/usage/tasks/until/#grizzly.tasks.until--step-implementations","title":"Step implementations","text":"<ul> <li> <p>Request with name endpoint until</p> </li> <li> <p>Client get endpoint until</p> </li> </ul>"},{"location":"framework/usage/tasks/until/#grizzly.tasks.until--statistics","title":"Statistics","text":"<p>Executions of this task will be visible in <code>locust</code> request statistics with request type <code>UNTL</code> indicating how long time it took to finish the task. <code>name</code> will be suffixed with <code>r=&lt;retries&gt;, w=&lt;wait&gt;, em=&lt;expected_matches&gt;</code>.</p> <p>The request task that is being repeated until <code>condition</code> is true will have it's own entry in the statistics as an ordinary Request or Client task.</p>"},{"location":"framework/usage/tasks/until/#grizzly.tasks.until--arguments","title":"Arguments","text":"Name Type Description Default <code>request</code> <code>RequestTask</code> <code>|</code> <code>ClientTask</code> request that is going to be repeated required <code>condition</code> <code>str</code> condition expression that specifies how <code>request</code> should be repeated required"},{"location":"framework/usage/tasks/until/#grizzly.tasks.until--format","title":"Format","text":""},{"location":"framework/usage/tasks/until/#grizzly.tasks.until--condition","title":"condition","text":"<pre><code>&lt;expression&gt; [| [retries=&lt;retries&gt;][, wait=&lt;wait&gt;][, expected_matches=&lt;expected_matches&gt;]]\n</code></pre> Name Type Description Default <code>expression</code> <code>str</code> JSON- or Xpath expression required <code>retries</code> <code>int</code> maximum number of times to repeat the request if <code>condition</code> is not met (default <code>3</code>) <code>3</code> <code>wait</code> <code>float</code> number of seconds to wait between retries <code>1.0</code> <code>expected_matches</code> <code>int</code> number of matches that the expression should match <code>1</code>"},{"location":"framework/usage/tasks/wait_between/","title":"Wait Between","text":"<p>Task sets the wait time between tasks in a scenario.</p> <p>The default is to wait <code>0</code> seconds between each task.</p> <p>This is useful in a scenario with many tasks that should have some wait time between them, but there are a group of tasks (e.g. Transformer, Date or Log Message) that should execute as fast as possible.</p> <p>If <code>max_time</code> is not provided, the wait between tasks is constant <code>min_time</code>. If both are provided there will be a random wait between (and including) <code>min_time</code> and <code>max_time</code> between tasks.</p>"},{"location":"framework/usage/tasks/wait_between/#grizzly.tasks.wait_between--step-implementations","title":"Step implementations","text":"<ul> <li> <p>Constant</p> </li> <li> <p>Random</p> </li> </ul>"},{"location":"framework/usage/tasks/wait_between/#grizzly.tasks.wait_between--statistics","title":"Statistics","text":"<p>This task does not have any request statistics entries.</p>"},{"location":"framework/usage/tasks/wait_explicit/","title":"Wait Explicit","text":"<p>Task executes a <code>gevent.sleep</code> and is used to manually create delays between steps in a scenario.</p>"},{"location":"framework/usage/tasks/wait_explicit/#grizzly.tasks.wait_explicit--step-implementations","title":"Step implementations","text":"<ul> <li>Static</li> </ul>"},{"location":"framework/usage/tasks/write_file/","title":"Write File","text":"<p>Task writes contents to a file on disk.</p> <p>If the specified file already exist, new content will be appended to the existing file.</p>"},{"location":"framework/usage/tasks/write_file/#grizzly.tasks.write_file--step-implementations","title":"Step implementations","text":"<ul> <li> <p>Create or append</p> </li> <li> <p>Temporary</p> </li> </ul>"},{"location":"framework/usage/tasks/clients/","title":"Clients","text":"<p>Client tasks is functionality that is executed by locust and is registred to an URL scheme.</p> <p>These tasks is used to make a request to another host than the scenario is actually load testing.</p>"},{"location":"framework/usage/tasks/clients/#grizzly.tasks.clients--statistics","title":"Statistics","text":"<p>Executions of all client tasks will be visible with request type <code>CLNT</code>.</p>"},{"location":"framework/usage/tasks/clients/#grizzly.tasks.clients--arguments","title":"Arguments","text":"Name Type Description Default <code>endpoint</code> <code>str</code> describes the request, used to chose the client task implementation. supports templating required <p>If <code>endpoint</code> is a template variable which includes the scheme, the scheme for the request must be specified so the correct client task implementation is used. The additional scheme will be removed when the request is performed.</p>"},{"location":"framework/usage/tasks/clients/blobstorage/","title":"Blobstorage","text":"<p>Task performs Azure Blob Storage put operations to a specified endpoint.</p> <p>This is useful if the scenario is another user type than <code>BlobStorageUser</code>, but the scenario still requires an action towards a blob container.</p> <p>Only supports <code>RequestDirection.TO</code>.</p>"},{"location":"framework/usage/tasks/clients/blobstorage/#grizzly.tasks.clients.blobstorage--step-implementations","title":"Step implementations","text":"<ul> <li>To endpoint file destination</li> </ul>"},{"location":"framework/usage/tasks/clients/blobstorage/#grizzly.tasks.clients.blobstorage--arguments","title":"Arguments","text":"Name Type Description Default <code>direction</code> <code>RequestDirection</code> if the request is upstream or downstream required <code>endpoint</code> <code>str</code> specifies details to be able to perform the request, e.g. account and container information required <code>name</code> <code>str</code> name used in <code>locust</code> statistics required <code>destination</code> <code>str</code> name of the file when uploaded, if not specified the basename of <code>source</code> will be used <code>None</code> <code>source</code> <code>str</code> file path of local file that should be saved in <code>Container</code> <code>None</code>"},{"location":"framework/usage/tasks/clients/blobstorage/#grizzly.tasks.clients.blobstorage--format","title":"Format","text":""},{"location":"framework/usage/tasks/clients/blobstorage/#grizzly.tasks.clients.blobstorage--endpoint","title":"endpoint","text":"<p>Using connection strings:</p> <pre><code>bs[s]://&lt;AccountName&gt;/&lt;Container&gt;?AccountKey=&lt;AccountKey&gt;[# Overwrite=&lt;bool&gt;]\n</code></pre> Name Type Description Default <code>AccountName</code> <code>str</code> name of storage account required <code>AccountKey</code> <code>str</code> secret key to be able to \"connect\" to the storage account required <code>Container</code> <code>str</code> name of the container to perform the request on required <code>Overwrite</code> <code>bool</code> if files should be overwritten if they already exists in <code>Container</code> <code>False</code> <p>Using credentials: <pre><code>bs[s]://&lt;username&gt;:&lt;password&gt;@&lt;AccountName&gt;/&lt;Container&gt;# Tenant=&lt;tenant&gt;[&amp;Overwrite=&lt;bool&gt;]\n</code></pre></p> Name Type Description Default <code>username</code> <code>str</code> username to authenticate with required <code>password</code> <code>str</code> password to authenticate with required <code>AccountName</code> <code>str</code> name of storage account required <code>Tenant</code> <code>str</code> name of tenant to authenticate with required <code>Container</code> <code>str</code> name of the container to perform the request on required <code>Overwrite</code> <code>bool</code> if files should be overwritten if they already exists in <code>Container</code> <code>False</code>"},{"location":"framework/usage/tasks/clients/blobstorage/#grizzly.tasks.clients.blobstorage--destination","title":"destination","text":"<p>The MIME type of an uploaded file will automagically be guessed based on the (rendered) destination file extension.</p>"},{"location":"framework/usage/tasks/clients/blobstorage/#grizzly.tasks.clients.blobstorage--examples","title":"Examples","text":"<pre><code>Then put to \"upload/incoming.j2.txt\" to \"bss://$conf::storage.name$/$conf::storage.container$?AccountKey=$conf::storage.key$#Overwrite=True\" with name \"upload\" as \"2025/08/13/incoming.txt\"\n</code></pre>"},{"location":"framework/usage/tasks/clients/http/","title":"HTTP","text":"<p>Task performs a HTTP request to a specified endpoint.</p> <p>This is useful if the scenario is using a non-HTTP user or a request to a URL other than the one under testing is needed, e.g. for testdata.</p>"},{"location":"framework/usage/tasks/clients/http/#grizzly.tasks.clients.http--step-implementations","title":"Step implementations","text":"<ul> <li> <p>From endpoint payload</p> </li> <li> <p>From endpoint payload and metadata</p> </li> <li> <p>To endpoint text</p> </li> <li> <p>To endpoint file (<code>source</code> will become contents of the specified file)</p> </li> </ul>"},{"location":"framework/usage/tasks/clients/http/#grizzly.tasks.clients.http--arguments","title":"Arguments","text":"Name Type Description Default <code>direction</code> <code>RequestDirection</code> impicit specified by which step implementation is used required <code>endpoint</code> <code>str</code> URL to perform GET request from required <code>name</code> <code>str</code> name used in <code>locust</code> statistics required"},{"location":"framework/usage/tasks/clients/http/#grizzly.tasks.clients.http--authentication","title":"Authentication","text":"<p>To enable authentication for <code>HttpClientTask</code> the <code>auth</code> context tree has to be correctly set. This is done by using Set context variable step, where the branches are prefixed with <code>&lt;host&gt;/</code>, e.g.:</p> <pre><code>And value for variable \"foobar\" is \"none\"\nAnd value for variable \"url\" is \"https://www.example.com/api/test\"\nAnd set context variable \"www.example.com/auth.user.username\" to \"bob\"\nAnd set context variable \"www.example.com/auth.user.password\" to \"password\"\nAnd set context variable \"www.example.com/auth.user.redirect_uri\" to \"/authenticated\"\nAnd set context variable \"www.example.com/auth.provider\" to \"https://login.example.com/oauth2\"\nAnd set context variable \"www.example.com/auth.client.id\" to \"aaaa-bbbb-cccc-dddd\"\n\nThen get from \"https://{{ url }}\" with name \"authenticated-get\" and save response payload in \"foobar\"\n</code></pre> <p>This will make any requests towards <code>www.example.com</code> to get a token from <code>http://login.example.com/oauth2</code> and use it in any requests towards <code>www.example.com</code>.</p> <p>For more details, see AAD documentation.</p>"},{"location":"framework/usage/tasks/clients/messagequeue/","title":"Messagequeue","text":"<p>Task performs IBM MQM get and put opertions to a specified queue or topic.</p> <p>This is useful if the scenario is another user type than <code>MessageQueueUser</code>, but the scenario still requires an action towards an MQ server. Use Transformer task to extract specific parts of the message.</p> <p>Warning</p> <p>Grizzly must have been installed with the extra <code>mq</code> package and native IBM MQ libraries must be installed for being able to use this client task.</p> <pre><code>pip3 install grizzly-loadtester[mq]\n</code></pre>"},{"location":"framework/usage/tasks/clients/messagequeue/#grizzly.tasks.clients.messagequeue--step-implementations","title":"Step implementations","text":"<ul> <li> <p>From endpoint payload</p> </li> <li> <p>From endpoint payload and metadata</p> </li> <li> <p>To endpoint file</p> </li> </ul>"},{"location":"framework/usage/tasks/clients/messagequeue/#grizzly.tasks.clients.messagequeue--arguments","title":"Arguments","text":"Name Type Description Default <code>direction</code> <code>RequestDirection</code> if the request is upstream or downstream required <code>endpoint</code> <code>str</code> specifies details to be able to perform the request, e.g. account and container information required <code>name</code> <code>str</code> name used in <code>locust</code> statistics required <code>destination</code> <code>str</code> not used by this client <code>None</code> <code>source</code> <code>str</code> file path of local file that should be put on <code>endpoint</code> <code>None</code>"},{"location":"framework/usage/tasks/clients/messagequeue/#grizzly.tasks.clients.messagequeue--format","title":"Format","text":""},{"location":"framework/usage/tasks/clients/messagequeue/#grizzly.tasks.clients.messagequeue--endpoint","title":"endpoint","text":"<pre><code>mq[s]://&lt;username&gt;:&lt;password&gt;@]&lt;hostname&gt;[:&lt;port&gt;]/&lt;endpoint&gt;?QueueManager=&lt;queue manager&gt;&amp;Channel=&lt;channel&gt;[&amp;wait=&lt;wait&gt;][&amp;heartbeat=&lt;heartbeat&gt;][&amp;KeyFile=&lt;key repo path&gt;[&amp;SslCipher=&lt;ssl cipher&gt;][&amp;CertLabel=&lt;certificate label&gt;]][&amp;HeaderType=&lt;header type&gt;][&amp;MaxMessageSize=&lt;number of bytes&gt;]\n</code></pre> <p>All variables in the endpoint has support for templating.</p> Name Type Description Default <code>mq[s]</code> str must be specified, <code>mqs</code> implies connecting with TLS, if <code>KeyFile</code> is not set in querystring, it will look for a key repository in <code>./&lt;username&gt;</code> required <code>username</code> str username to authenticate with <code>None</code> <code>password</code> str password to authenticate with <code>None</code> <code>hostname</code> str hostname of MQ server required <code>port</code> int port on MQ server <code>1414</code> <code>endpoint</code> str prefixed with either <code>topic:</code> or <code>queue:</code> and then the name of the endpoint to perform operations on required <code>wait</code> int number of seconds to wait for an message, default is to wait infinite <code>0</code> <code>heartbeat</code> int number of seconds between heartbeats <code>300</code> <code>QueueManager</code> str name of queue manager required <code>Channel</code> str name of channel to connect to required <code>KeyFile</code> str path to key repository for certificates needed to connect over TLS <code>None</code> <code>SslCipher</code> str SSL cipher to use for connection, default <code>ECDHE_RSA_AES_256_GCM_SHA384</code> <code>None</code> <code>CertLabel</code> str label of certificate in key repository <code>username</code> <code>HeaderType</code> str header type, can be <code>RFH2</code> for sending gzip compressed messages using RFH2 header <code>None</code> <code>MaxMessageSize</code> int maximum number of bytes a message can be for the client to accept it, default value implies that the client will throw <code>MQRC_TRUNCATED_MSG_FAILED</code>, adjust buffer and try again. <code>None</code>"},{"location":"framework/usage/tasks/clients/messagequeue/#grizzly.tasks.clients.messagequeue--examples","title":"Examples","text":"<pre><code>Given value for variable \"message\" is \"none\"\nThen get from \"mqs://$conf::mq.username$:$conf::mq.password$@$conf::mq.endpoint.host$/queue:INCOMING?QueueManager=$conf::mq.endpoint.qm$&amp;Channel=$conf::mq.channel$&amp;KeyFile=$conf::mq.key_file$&amp;wait=1800&amp;MaxMessageSize=16384\" with name \"get-incoming\" and save response payload in \"message\"\n</code></pre>"},{"location":"framework/usage/tasks/clients/servicebus/","title":"Servicebus","text":"<p>Task performs Azure SerciceBus operations to a specified endpoint.</p>"},{"location":"framework/usage/tasks/clients/servicebus/#grizzly.tasks.clients.servicebus--step-implementations","title":"Step implementations","text":"<ul> <li> <p>From endpoint payload</p> </li> <li> <p>From endpoint payload and metadata</p> </li> <li> <p>To endpoint file</p> </li> </ul>"},{"location":"framework/usage/tasks/clients/servicebus/#grizzly.tasks.clients.servicebus--arguments","title":"Arguments","text":"Name Type Description Default <code>direction</code> <code>RequestDirection</code> if the request is upstream or downstream required <code>endpoint</code> <code>str</code> specifies details to be able to perform the request, e.g. Service Bus resource, queue, topic, subscription etc. required <code>name</code> <code>str</code> name used in <code>locust</code> statistics required <code>destination</code> <code>str</code> not used by this client <code>None</code> <code>source</code> <code>str</code> file path of local file that should be put on <code>endpoint</code> <code>None</code>"},{"location":"framework/usage/tasks/clients/servicebus/#grizzly.tasks.clients.servicebus--format","title":"Format","text":""},{"location":"framework/usage/tasks/clients/servicebus/#grizzly.tasks.clients.servicebus--endpoint","title":"endpoint","text":"<pre><code>sb://[&lt;username&gt;:&lt;password&gt;@]&lt;sbns resource name&gt;[.servicebus.windows.net]/[queue:&lt;queue name&gt;|topic:&lt;topic name&gt;[/subscription:&lt;subscription name&gt;]][/expression:&lt;expression&gt;][;SharedAccessKeyName=&lt;policy name&gt;;SharedAccessKey=&lt;access key&gt;][#[Consume=&lt;consume&gt;][&amp;MessageWait=&lt;wait&gt;][&amp;ContentType&lt;content type&gt;][&amp;Tenant=&lt;tenant&gt;][&amp;Empty=&lt;empty&gt;][&amp;Unique=&lt;unique&gt;][&amp;Verbose=&lt;verbose&gt;][&amp;Forward=&lt;forward&gt;]]\n</code></pre> <p>All variables in the endpoint has support for templating.</p> <p>Network location:</p> Name Type Description Default <code>&lt;username&gt;</code> <code>str</code> when using credentials, authenticate with this username <code>None</code> <code>&lt;password&gt;</code> <code>str</code> password for said user <code>None</code> <code>&lt;sbns resource name&gt;</code> <code>str</code> must be specfied, Azure Service Bus Namespace name, with or without domain name required <p>Path:</p> Name Type Description Default <code>&lt;queue name&gt;</code> str name of queue, prefixed with <code>queue:</code> of an existing queue required<sup>1</sup> <code>&lt;topic name&gt;</code> str name of topic, prefixed with <code>topic:</code> of an existing topic required<sup>1</sup> <code>&lt;subscription name&gt;</code> str name of an subscription on <code>topic name</code>, either an existing, or one to be created (if step text containing SQL Filter rule is specified), the actual subscription name will be suffixed with unique id related to the user instance <code>None</code> <code>&lt;expression&gt;</code> str JSON or XPath expression to filter out message on payload, only applicable when receiving messages <code>None</code> <p>Query:</p> Name Type Description Default <code>&lt;policy name&gt;</code> <code>str</code> name of the Service Bus policy to be used required <code>&lt;access key&gt;</code> <code>str</code> secret access key for specified <code>policy name</code> required <p>Fragment:</p> Name Type Description Default <code>&lt;consume&gt;</code> <code>bool</code> if messages should be consumed (removed from endpoint), or only peeked at (left on endpoint) <code>True</code> <code>&lt;wait&gt;</code> <code>int</code> how many seconds to wait for a message to arrive on the endpoint <code>None =&gt; \u221e</code> <code>&lt;content type&gt;</code> <code>str</code> content type of response payload, should be used in combination with <code>&lt;expression&gt;</code> <code>None</code> <code>&lt;tenant&gt;</code> <code>str</code> when using credentials, tenant to authenticate with <code>None</code> <code>&lt;empty&gt;</code> <code>bool</code> if endpoint should be emptied before each iteration <code>True</code> <code>&lt;unique&gt;</code> <code>bool</code> if each instance should have their own endpoint, when set to <code>False</code> all instances will share <code>True</code> <code>&lt;verbose&gt;</code> <code>bool</code> verbose logging for only these requests <code>False</code> <code>&lt;forward&gt;</code> <code>bool</code> if a queue should be created and the subscription should forward to it, and consuming messages from the queue instead of directly from the subscription <code>False</code> <p>If <code>&lt;unique&gt;</code> is <code>False</code>, it will not empty the endpoint between each iteration.</p> <p>If connection strings is to be used for authentication, the following <code>endpoint</code> parts must be present:</p> <ul> <li> <p><code>&lt;policy name&gt;</code></p> </li> <li> <p><code>&lt;access key&gt;</code></p> </li> </ul> <p>If credential is to be used for authentication, the following <code>endpoint</code> parts must be present:</p> <ul> <li> <p><code>&lt;username&gt;</code></p> </li> <li> <p><code>&lt;password&gt;</code></p> </li> <li> <p><code>&lt;tenant&gt;</code></p> </li> </ul>"},{"location":"framework/usage/tasks/clients/servicebus/#grizzly.tasks.clients.servicebus--examples","title":"Examples","text":"<pre><code>Given value for variable \"event\" is \"none\"\nThen get from \"sb://$conf::sb.name$.servicebus.windows.net/topic:incoming-events/subscription:grizzly-/expression:'$.`this`[?active=true]';SharedAccessKeyName=$conf::sb.key.name$;SharedAccessKey=$conf::sb.key.secret$#Consume=True&amp;MessageWait=$conf::sb.message.wait$&amp;ContentType=json&amp;Forward=True\" with name \"get-incoming-events\" and save response payload in \"event\"\n</code></pre> <ol> <li> <p>Mutally exclusive, either specify <code>queue:</code> / <code>&lt;queue name&gt;</code> or <code>topic:</code> / <code>&lt;topic name&gt;</code>, not both\u00a0\u21a9\u21a9</p> </li> </ol>"},{"location":"framework/usage/steps/","title":"Steps","text":"<p>All step implementations needed to write a feature file that describes a <code>locust</code> load test scenario for <code>grizzly</code>.</p> <p>A feature is described by using Gherkin. These expressions is then used by <code>grizzly</code> to configure and start <code>locust</code>, which takes care of generating the load.</p> <pre><code>Feature: description of the test\n    Background: steps that are common for all (if there is multiple) scenarios\n        Given ...\n        And ...\n    Scenario: steps for a specific flow through a component in the target environment\n        Given ...\n        And ...\n        Then ...\n        When ...\n</code></pre> <p>In this package there are modules with step implementations that can be used in both <code>Background</code> and <code>Scenario</code> sections in a feature file.</p>"},{"location":"framework/usage/steps/#grizzly.steps--custom","title":"Custom","text":"<p>Custom steps are implemented in your <code>grizzly</code> project <code>features/steps/steps.py</code> file. This is also the file that imports all <code>grizzly</code>-defined step implementations.</p> <p>There are examples of this in the example documentation.</p>"},{"location":"framework/usage/steps/#grizzly.steps--considerations","title":"Considerations","text":"<p>When writing step expressions, the following should be taken into consideration, regarding premuntations of code completion for step implementations.</p>"},{"location":"framework/usage/steps/#grizzly_common.text.PermutationEnum","title":"PermutationEnum","text":"<p>               Bases: <code>Enum</code></p> <p>Interface class for getting <code>__vector__</code> value from the class that inherits it.</p> <p>All objects used to represent possible values in step expressions and that has a registered custom <code>parse</code> type should inherit this class and set appropiate <code>__vector__</code> values and make an implementation of <code>from_string</code>. This is so the language server can make educated suggestions on possible step expressions.</p>"},{"location":"framework/usage/steps/#grizzly_common.text.PermutationEnum.__vector__","title":"<code>__vector__</code>  <code>instance-attribute</code>","text":"<p>This class variable represents <code>(x, y)</code> dimensions on how the values can expand in a step expression.</p> <p>Consider the following <code>Enum</code>, being mapped to a custom <code>parse</code> type named <code>FruitType</code>:</p> <pre><code>from behave import register_type\n\n\nclass Fruit(PermutationEnum):\n    __vector__ = None  # see examples below\n\n    BANANA = 0\n    APPLE = 1\n    ORANGE = 2\n\n    @classmethod\n    def from_string(cls, value: str) -&gt; Fruit:\n        return cls[value.upper()]\n\nregister_type(\n    FruitType=Fruit.from_string,\n)\n</code></pre>"},{"location":"framework/usage/steps/#grizzly_common.text.PermutationEnum.__vector__--none","title":"None","text":"<p>Variable occurs <code>1..N</code> times in the expression</p> <p>When permutated, it will only produce one step expression and all instances of the variable in the expression will have been replaced with nothing.</p> <pre><code>Then I want to eat a \"{fruit:FruitType}\"  # --&gt;\n\nThen I want to eat a \"\"\n\nThen I want to eat a \"{fruit1:FruitType}\" and a \"{fruit2:FruitType}\"  # --&gt;\n\nThen I want to eat a \"\" and a \"\"\n</code></pre>"},{"location":"framework/usage/steps/#grizzly_common.text.PermutationEnum.__vector__--false-true","title":"(False, True)","text":"<p>Variable occurs <code>1</code> time in the expression.</p> <p>When permutated, it will produce the number of step expressions as values in the enum.</p> <pre><code>Then I want to eat a {fruit:FruitType}  # --&gt;\n\nThen I want to eat a banana\nThen I want to eat a apple\nThen I want to eat a orange\n</code></pre>"},{"location":"framework/usage/steps/#grizzly_common.text.PermutationEnum.__vector__--true-false","title":"(True, False)","text":"<p>Variable occurs <code>2..N</code> times in the expression.</p> <p>When permutated, combination of all enum values will be produced, if the variable type occurs the same number of times as values in the enum.</p> <pre><code>Then I want to eat a {fruit1:FruitType}, a {fruit2:FruitType} and a {fruit3:FruitType}  # --&gt;\n\nThen I want to eat a banana, a apple and a orange\n</code></pre>"},{"location":"framework/usage/steps/#grizzly_common.text.PermutationEnum.__vector__--true-true","title":"(True, True)","text":"<p>Variable occurs <code>2..N</code> times in the expression, and should produce more than one combination of the step expression.</p> <pre><code>Then I want to eat a {fruit1:FruitType}, a {fruit2:FruitType} and a {fruit3:FruitType}  # --&gt;\n\nThen I want to eat a banana, a apple and a orange\nThen I want to eat a apple, a banana and a orange\nThen I want to eat a orange, a banana and a apple\n</code></pre>"},{"location":"framework/usage/steps/#grizzly_common.text.permutation","title":"permutation","text":"<p>Decorator used to annotate <code>parse</code> methods that are not using <code>PermutationEnum</code> as a base.</p> <p>This could be for example parse methods that uses regular expressions via <code>parse.with_pattern</code>.</p> <pre><code>import parse\n\nfrom behave import register_type\nfrom grizzly_common.text import permutation\n\n@parse.with_pattern(r'(hello|world)')\n@permutation(vector=(True, True))\ndef parse_hello_world(text: str) -&gt; str:\n    return text.strip()\n\nregister_type(\n    HelloWorldType=parse_hello_world,\n)\n</code></pre> <p>See <code>__vector__</code> for an explanation of possible values and their meaning.</p>"},{"location":"framework/usage/steps/setup/","title":"Setup","text":"<p>Steps that can be in both <code>Background</code> and <code>Scenario</code> Gherkin sections.</p>"},{"location":"framework/usage/steps/setup/#grizzly.steps.setup.step_setup_ask_variable_value","title":"Ask variable value","text":"<p>Tell <code>grizzly-cli</code> that it should ask for an initial value for the variable.</p> <p>It will inject the value into the locust runtime environment, and in this step read it and insert it into the locust context which <code>grizzly</code> will use to setup <code>locust</code>.</p> <p>If <code>grizzly-cli</code> is not used, one has to manually set the environment variable, which requires a prefix of <code>TESTDATA_VARIABLE_</code> and the suffix should match the variable name in question.</p> <p>Use this step for variables that should have different initial values for each run of the feature.</p>"},{"location":"framework/usage/steps/setup/#grizzly.steps.setup.step_setup_ask_variable_value--example","title":"Example","text":"<pre><code>And ask for value for variable \"AtomicIntegerIncrementer.messageID\"\n</code></pre>"},{"location":"framework/usage/steps/setup/#grizzly.steps.setup.step_setup_ask_variable_value--arguments","title":"Arguments","text":"Name Type Description Default <code>name</code> <code>str</code> <p>variable name used in templates</p> required"},{"location":"framework/usage/steps/setup/#grizzly.steps.setup.step_setup_execute_python_script","title":"Execute python script","text":"<p>Execute python script located in specified path.</p> <p>The script will not execute on workers, only on master (distributed mode) or local (local mode), and it will only execute once before the test starts. Available in the scope is the current <code>context</code> object.</p> <p>This can be useful for generating test data files.</p>"},{"location":"framework/usage/steps/setup/#grizzly.steps.setup.step_setup_execute_python_script--example","title":"Example","text":"<pre><code>Then execute python script \"../bin/generate-testdata.py\"\n</code></pre>"},{"location":"framework/usage/steps/setup/#grizzly.steps.setup.step_setup_execute_python_script_inline","title":"Execute python script inline","text":"<p>Execute inline python script specified in the step text.</p> <p>The script will not execute on workers, only on master (distributed mode) or local (local mode), and it will only execute once before the test starts. Available in the scope is the current <code>context</code> object.</p> <p>This can be useful for generating test data files.</p>"},{"location":"framework/usage/steps/setup/#grizzly.steps.setup.step_setup_execute_python_script_inline--example","title":"Example","text":"<pre><code>Then execute python script\n  \"\"\"\n  print('foobar script')\n  \"\"\"\n</code></pre>"},{"location":"framework/usage/steps/setup/#grizzly.steps.setup.step_setup_execute_python_script_with_arguments","title":"Execute python script with arguments","text":"<p>Execute python script located in specified path, providing the specified arguments.</p> <p>The script will not execute on workers, only on master (distributed mode) or local (local mode), and it will only execute once before the test starts. Available in the scope is the current <code>context</code> object and also <code>args</code> (list), which is <code>shlex.split</code> of specified <code>arguments</code>.</p> <p>This can be useful for generating test data files.</p>"},{"location":"framework/usage/steps/setup/#grizzly.steps.setup.step_setup_execute_python_script_with_arguments--example","title":"Example","text":"<pre><code>Then execute python script \"../bin/generate-testdata.py\"\n</code></pre>"},{"location":"framework/usage/steps/setup/#grizzly.steps.setup.step_setup_set_context_variable","title":"Set context variable","text":"<p>Set a context variable.</p> <p>If used in the <code>Background</code>-section the context variable will be used in all scenarios and their respective user. If used in a <code>Scenario</code> section it will only be set for that user.</p> <p>If this step is before any step that adds a task in the scenario, it will be added to the context which the user is initialized with at start. If it is after any tasks, it will be added as a task which will change the context variable value during runtime.</p> <p>Variable names can contain (one or more) dot (<code>.</code>) or slash (<code>/</code>) to indicate that the variable has a nested structure. E.g. <code>token.url</code> and <code>token/url</code> results in <code>{'token': {'url': '&lt;value'&gt;}}</code></p> <p>It is also possible to have spaces in a variable names, they will then be replaced with underscore (<code>_</code>), and the name will be converted to lowercase.</p> <p>E.g. <code>Client ID</code> results in <code>client_id</code>.</p>"},{"location":"framework/usage/steps/setup/#grizzly.steps.setup.step_setup_set_context_variable--example","title":"Example","text":"<pre><code>And set context variable \"token.url\" to \"https://example.com/api/auth\"\nAnd set context variable \"token/client_id\" to \"aaaa-bbbb-cccc-dddd\"\nAnd set context variable \"token/client secret\" to \"aasdfasdfasdf==\"\nAnd set context variable \"token.resource\" to \"0000-aaaaaaa-1111-1111-1111\"\nAnd set context variable \"log_all_requests\" to \"True\"\nAnd set context variable \"validate_certificates\" to \"False\"\n</code></pre>"},{"location":"framework/usage/steps/setup/#grizzly.steps.setup.step_setup_set_context_variable--arguments","title":"Arguments","text":"Name Type Description Default <code>variable</code> <code>str</code> <p>name, can contain <code>.</code> and <code>/</code></p> required <code>value</code> <code>str</code> <p>value, data type will be guessed and casted</p> required"},{"location":"framework/usage/steps/setup/#grizzly.steps.setup.step_setup_set_variable_value","title":"Set variable value","text":"<p>Step to initialize a variable that should have the same [start] value for every run of the scenario.</p> <p>If this step is used after a step that adds a task or for a variable that already has been initialized, it is assumed that the value will change during runtime so a Set variable task will be added instead. The variable must have implemented support for being settable.</p> <p>Data type for the value of the variable is based on the type of variable. If the variable is a testdata variables then the value needs to match the format and type that the variable has implemented. If it is not a testdata variable <code>grizzly</code> will try to guess the data type. E.g.:</p> <ul> <li> <p><code>\"10\"</code> becomes <code>int</code></p> </li> <li> <p><code>\"1.0\"</code> becomes <code>float</code></p> </li> <li> <p><code>\"True\"</code> becomes <code>bool</code></p> </li> <li> <p>everything else becomes <code>str</code></p> </li> </ul> <p>It is also possible to set the value of a variable based on another variable, which can be usable if you have a variable in multiple scenarios which all should have the same initial value.</p>"},{"location":"framework/usage/steps/setup/#grizzly.steps.setup.step_setup_set_variable_value--example","title":"Example","text":"example.feature<pre><code>Feature:\n    Background:\n        And ask for value of variable \"messageID\"\n        And value for variable \"HelloWorld\" is \"default\"\n    Scenario:\n        And value for variable \"AtomicIntegerIncrementer.mid1\" is \"{{ messageID }}\"\n        And value for variable \"AtomicIntegerIncrementer.persistent\" is \"1 | step=10, persist=True\"\n        And value for variable \"AtomicCsvWriter.output\" is \"output.csv | headers='foo,bar'\"\n        ...\n        And value for variable \"AtomicCsvWriter.output.foo\" is \"{{ value }}\"\n        And value for variable \"AtomicCsvWriter.output.bar\" is \"{{ value }}\"\n</code></pre> <p>If the file <code>features/persistent/example.json</code> (name of feature file and <code>feature</code> extension replaced with <code>json</code>) exists, and contains an entry for the variable, the initial value will be read from the file and override the value specified in the feature file.</p>"},{"location":"framework/usage/steps/setup/#grizzly.steps.setup.step_setup_set_variable_value--arguments","title":"Arguments","text":"Name Type Description Default <code>name</code> <code>str</code> <p>variable name</p> required <code>value</code> <code>Any</code> <p>initial value</p> required"},{"location":"framework/usage/steps/utils/","title":"Utils","text":"<p>Module contains steps that can be useful during development or troubleshooting of a feature file, but should not be included in a finished, testable, feature.</p>"},{"location":"framework/usage/steps/utils/#grizzly.steps.utils.step_utils_add_orphan_template","title":"Add orphan template","text":"<p>Add arbitrary templats to fool grizzly that a variable is being used.</p> <p>This step should be avoided at all costs, escpecially if you do not know what you are doing. There are cases that grizzly will complain that a variable is declared, but not found in any templates, with this step it is possible to \"fool\" that logic, by adding a template containing that variable.</p> <p>When adding this step in a feature-file, you should also write an bug issue detailing why it was necessary to use it, so the root cause can be fixed.</p>"},{"location":"framework/usage/steps/utils/#grizzly.steps.utils.step_utils_add_orphan_template--example","title":"Example","text":"<pre><code>Then add orphan template \"{{ hello world foobar }}\"\n</code></pre>"},{"location":"framework/usage/steps/utils/#grizzly.steps.utils.step_utils_add_orphan_template--arguments","title":"Arguments","text":"Name Type Description Default <code>template</code> <code>str</code> <p>templating string with jinja2 template containing variable names</p> required"},{"location":"framework/usage/steps/utils/#grizzly.steps.utils.step_utils_fail_scenario","title":"Fail scenario","text":"<p>Force a failed scenario. Can be useful when writing a new scenario. The scenario will fail before <code>locust</code> has started, so only when the scenario is setup.</p>"},{"location":"framework/usage/steps/utils/#grizzly.steps.utils.step_utils_fail_scenario--example","title":"Example","text":"<pre><code>Then fail\n</code></pre>"},{"location":"framework/usage/steps/background/","title":"Background","text":"<p>Module contains step implementations that only is allowed in the <code>Background</code> section in a <code>Feature</code>.</p> <p>Steps in <code>Background</code> is only executed once. The feature will fail if they are added into any other section.</p> <pre><code>Feature: Example\n    Background:\n        # Here\n    Scenario:\n        # Not here!\n</code></pre> <p>They are only allowed in the <code>Background</code>-section since they modify parts of the context that are used for all scenarios, which can translate to basic <code>locust</code> configuration.</p>"},{"location":"framework/usage/steps/background/setup/","title":"Setup","text":"<p>Module contains step implementations that configures the load test scenario with parameters applicable for all scenarios.</p>"},{"location":"framework/usage/steps/background/setup/#grizzly.steps.background.setup.step_setup_configuration_value","title":"Configuration value","text":"<p>Step to set configuration variables not present in specified environment file.</p> <p>The configuration value can then be used in the following steps. If the specified <code>name</code> already exists, it will be overwritten.</p>"},{"location":"framework/usage/steps/background/setup/#grizzly.steps.background.setup.step_setup_configuration_value--example","title":"Example","text":"<pre><code>Given value for configuration \"default.host\" is \"example.com\"\n...\nThen log message \"default.host=$conf::default.host$\"\n</code></pre>"},{"location":"framework/usage/steps/background/setup/#grizzly.steps.background.setup.step_setup_configuration_value--arguments","title":"Arguments","text":"Name Type Description Default <code>name</code> <code>str</code> <p>dot separated name/path of configuration value</p> required <code>value</code> <code>str</code> <p>configuration value, any <code>$..$</code> variables are resolved, but <code>{{ .. }}</code> templates are kept</p> required"},{"location":"framework/usage/steps/background/setup/#grizzly.steps.background.setup.step_setup_log_level","title":"Log level","text":"<p>Configure log level for <code>grizzly</code>.</p> <p>Default value is <code>INFO</code>, by changing to <code>DEBUG</code> there is more information what <code>grizzly</code> is doing behind the curtains.</p>"},{"location":"framework/usage/steps/background/setup/#grizzly.steps.background.setup.step_setup_log_level--example","title":"Example","text":"<pre><code>And log level is \"DEBUG\"\n</code></pre>"},{"location":"framework/usage/steps/background/setup/#grizzly.steps.background.setup.step_setup_log_level--arguments","title":"Arguments","text":"Name Type Description Default <code>log_level</code> <code>str</code> <p>one of <code>INFO</code>, <code>DEBUG</code>, <code>WARNING</code>, <code>ERROR</code></p> required"},{"location":"framework/usage/steps/background/setup/#grizzly.steps.background.setup.step_setup_message_type_callback","title":"Message type callback","text":"<p>Register a custom callback function for a custom message type, that should be sent from client/server to client/server (exclusive).</p> steps/custom.py<pre><code>def my_custom_callback(env: Environment, msg: Message) -&gt; None:\n    print(msg)\n</code></pre> <pre><code>Given register callback \"steps.custom.my_custom_callback\" for message type \"custom_msg\" from client to server\n</code></pre>"},{"location":"framework/usage/steps/background/setup/#grizzly.steps.background.setup.step_setup_message_type_callback--arguments","title":"Arguments","text":"Name Type Description Default <code>callback_name</code> <code>str</code> <p>full namespace and method name to the callback function</p> required <code>message_type</code> <code>str</code> <p>unique name of the message</p> required <code>from_node</code> <code>MessageDirection</code> <p>server or client, exclusive</p> required <code>to_node</code> <code>MessageDirection</code> <p>client or server, exclusive</p> required"},{"location":"framework/usage/steps/background/setup/#grizzly.steps.background.setup.step_setup_run_time","title":"Run time","text":"<p>Configure the time period a headless test should run for.</p> <p>If available test data is infinite, the test will run forever if this step is not used.</p>"},{"location":"framework/usage/steps/background/setup/#grizzly.steps.background.setup.step_setup_run_time--example","title":"Example","text":"<pre><code>And run for maximum \"1h\"\n</code></pre>"},{"location":"framework/usage/steps/background/setup/#grizzly.steps.background.setup.step_setup_run_time--arguments","title":"Arguments","text":"Name Type Description Default <code>timespan</code> <code>str</code> <p>description of how long the test should run for, e.g. 10s, 1h, 40m etc.</p> required"},{"location":"framework/usage/steps/background/setup/#grizzly.steps.background.setup.step_setup_save_statistics","title":"Save statistics","text":"<p>Set an URL where locust statistics should be sent.</p> <p>It has support for InfluxDB and Azure Application Insights endpoints.</p> <p>For InfluxDB the following format must be used:</p> <pre><code>influxdb://[&lt;username&gt;:&lt;password&gt;@]&lt;hostname&gt;[:&lt;port&gt;]/&lt;database&gt;?TargetEnviroment=&lt;target environment&gt;[&amp;Testplan=&lt;test plan&gt;]\n[&amp;TargetEnvironment=&lt;target environment&gt;][&amp;ProfileName=&lt;profile name&gt;][&amp;Description=&lt;description&gt;]\n</code></pre> <p>For Azure Application Insights the following format must be used:</p> <pre><code>insights://?InstrumentationKey=&lt;instrumentation key&gt;&amp;IngestionEndpoint=&lt;ingestion endpoint&gt;[&amp;Testplan=&lt;test plan&gt;]\ninsights://&lt;ingestion endpoint&gt;/?InstrumentationKey=&lt;instrumentation key&gt;[&amp;Testplan=&lt;test plan&gt;]\n</code></pre>"},{"location":"framework/usage/steps/background/setup/#grizzly.steps.background.setup.step_setup_save_statistics--example","title":"Example","text":"<pre><code>And save statistics to \"influxdb://grizzly:secret-password@influx.example.com/grizzly-statistics\"\nAnd save statistics to \"insights://?IngestionEndpoint=https://insights.example.com&amp;Testplan=grizzly-statistics&amp;InstrumentationKey=asdfasdfasdf=\"\nAnd save statistics to \"insights://insights.example.com/?Testplan=grizzly-statistics&amp;InstrumentationKey=asdfasdfasdf=\"\nAnd save statistics to \"influxdb://$conf::statistics.username$:$conf::statistics.password$@influx.example.com/$conf::statistics.database$\"\n</code></pre>"},{"location":"framework/usage/steps/background/setup/#grizzly.steps.background.setup.step_setup_save_statistics--arguments","title":"Arguments","text":"Name Type Description Default <code>url</code> <code>str</code> <p>URL for statistics endpoint</p> required"},{"location":"framework/usage/steps/background/setup/#grizzly.steps.background.setup.step_setup_wait_spawning_complete_indefinitely","title":"Wait spawning complete indefinitely","text":"<p>Step to make scenarios wait with execution until spawning is complete, without timeout.</p> <p>This is when there are dependencies between scenarios. This will make all scenarios to wait until all defined users are spawned.</p>"},{"location":"framework/usage/steps/background/setup/#grizzly.steps.background.setup.step_setup_wait_spawning_complete_indefinitely--example","title":"Example","text":"<pre><code>Given wait until spawning is complete\n</code></pre>"},{"location":"framework/usage/steps/background/setup/#grizzly.steps.background.setup.step_setup_wait_spawning_complete_timeout","title":"Wait spawning complete timeout","text":"<p>Step to make scenarios wait with execution of tasks until spawning is complete, at most <code>timeout</code> seconds.</p> <p>This is when there are dependencies between scenarios. This will make all scenarios to wait until all defined users are spawned.</p>"},{"location":"framework/usage/steps/background/setup/#grizzly.steps.background.setup.step_setup_wait_spawning_complete_timeout--example","title":"Example","text":"<pre><code>Given wait \"13.37\" seconds until spawning is complete\n</code></pre>"},{"location":"framework/usage/steps/background/setup/#grizzly.steps.background.setup.step_setup_wait_spawning_complete_timeout--arguments","title":"Arguments","text":"Name Type Description Default <code>timeout</code> <code>float</code> <p>number of seconds to wait until locust spawning is complete</p> required"},{"location":"framework/usage/steps/background/shapes/","title":"Shapes","text":"<p>Module contains step implementations that describes how the load for all scenarios in a feature will look like.</p>"},{"location":"framework/usage/steps/background/shapes/#grizzly.steps.background.shapes.step_shapes_spawn_rate","title":"Spawn rate","text":"<p>Set rate in which locust shall swarm new user instances.</p>"},{"location":"framework/usage/steps/background/shapes/#grizzly.steps.background.shapes.step_shapes_spawn_rate--example","title":"Example","text":"<pre><code>And spawn rate is \"5\" users per second\nAnd spawn rate is \"1\" user per second\nAnd spawn rate is \"0.1\" users per second\n</code></pre>"},{"location":"framework/usage/steps/background/shapes/#grizzly.steps.background.shapes.step_shapes_spawn_rate--arguments","title":"Arguments","text":"Name Type Description Default <code>value</code> <code>str</code> <p>number of users locust should create, supports templating that renders to a <code>float</code></p> required"},{"location":"framework/usage/steps/background/shapes/#grizzly.steps.background.shapes.step_shapes_user_count","title":"User count","text":"<p>Set number of users that will generate load.</p>"},{"location":"framework/usage/steps/background/shapes/#grizzly.steps.background.shapes.step_shapes_user_count--example","title":"Example","text":"<pre><code>Given \"5\" users\nGiven \"1\" user\nGiven \"{{ user_count }}\"\n</code></pre>"},{"location":"framework/usage/steps/background/shapes/#grizzly.steps.background.shapes.step_shapes_user_count--arguments","title":"Arguments","text":"Name Type Description Default <code>value</code> <code>str</code> <p>number of users locust should create, supports templating that renders to an <code>int</code></p> required"},{"location":"framework/usage/steps/scenario/","title":"Scenario","text":"<p>Module contains step implementations that only is allowed in the <code>Scenario</code> section in a feature file.</p> <pre><code>Feature: Example\n    Background:\n        # Not here!\n    Scenario:\n        # Here\n</code></pre> <p>The steps in the <code>Scenario</code> section modifies the context only for the scenario that they are defined in.</p>"},{"location":"framework/usage/steps/scenario/response/","title":"Response","text":"<p>Module contains step implementations that handles Request task responses.</p>"},{"location":"framework/usage/steps/scenario/response/#grizzly.steps.scenario.response--arguments","title":"Arguments","text":""},{"location":"framework/usage/steps/scenario/response/#grizzly.steps.scenario.response--expression","title":"<code>expression</code>","text":"<p>Valid for:</p> <ul> <li>Save matches</li> <li>Save</li> <li>Validate</li> </ul> Name Type Description Default <code>expected_matches</code> <code>int</code> number of expected matches that <code>expression</code> should get, a value of <code>-1</code> means <code>Any</code> number of matches <code>1</code> <code>as_json</code> <code>bool</code> always return matches as a JSON list, by default if there's a single match it will be returned as a string <code>False</code>"},{"location":"framework/usage/steps/scenario/response/#grizzly.steps.scenario.response.step_response_allow_status_codes","title":"Allow status codes","text":"<p>Set allowed response status codes for the latest defined request in the scenario.</p> <p>By default <code>200</code> is the only allowed respoonse status code. By prefixing a code with minus (<code>-</code>), it will be removed from the list of allowed response status codes.</p>"},{"location":"framework/usage/steps/scenario/response/#grizzly.steps.scenario.response.step_response_allow_status_codes--example","title":"Example","text":"<pre><code>Then get request with name \"test-get-1\" from endpoint \"/api/test\"\nAnd allow response status \"200,302\"\n\nThen get request with name \"test-failed-get-2\" from endpoint \"/api/non-existing\"\nAnd allow response status \"-200,404\"\n</code></pre>"},{"location":"framework/usage/steps/scenario/response/#grizzly.steps.scenario.response.step_response_allow_status_codes--arguments","title":"Arguments","text":"Name Type Description Default <code>status_list</code> <code>str</code> <p>comma separated list of integers</p> required"},{"location":"framework/usage/steps/scenario/response/#grizzly.steps.scenario.response.step_response_allow_status_codes_table","title":"Allow status codes table","text":"<p>Set allowed response status codes for the latest defined requests based on a data table.</p> <p>Specifies a comma separeated list of allowed return codes for the latest requests in a data table.</p> <p>By default <code>200</code> is the only allowed respoonse status code. By prefixing a code with minus (<code>-</code>), it will be removed from the list of allowed response status codes.</p> <p>Number of rows in the table specifies which of the latest defined requests the allowed response status codes should map to.</p> <p>The table must have the column header <code>status</code>.</p>"},{"location":"framework/usage/steps/scenario/response/#grizzly.steps.scenario.response.step_response_allow_status_codes_table--example","title":"Example","text":"<pre><code>Then get request with name \"test-get-1\" from endpoint \"/api/test\"\nThen get request with name \"test-get-2\" from endpoint \"/api/test\"\nAnd allow response status\n | status   |\n | 200, 302 |\n | 200,404  |\n</code></pre> <p>Allowed response status codes for <code>test-get-1</code> is now <code>200</code> and <code>302</code>, and for <code>test-get-2</code> is now <code>200</code> and <code>404</code>.</p>"},{"location":"framework/usage/steps/scenario/response/#grizzly.steps.scenario.response.step_response_content_type","title":"Content type","text":"<p>Set the content type of a response, instead of guessing it.</p> <p>This is applicable when there is a <code>step_response_validate</code> or <code>step_response_save</code> is included in the scenario, and is valid only for the latest defined request.</p>"},{"location":"framework/usage/steps/scenario/response/#grizzly.steps.scenario.response.step_response_content_type--example","title":"Example","text":"<pre><code>And set response content type to \"json\"\nAnd set response content type to \"application/json\"\nAnd set response content type to \"xml\"\nAnd set response content type to \"application/xml\"\nAnd set response content type to \"plain\"\nAnd set response content type to \"text/plain\"\n</code></pre>"},{"location":"framework/usage/steps/scenario/response/#grizzly.steps.scenario.response.step_response_content_type--arguments","title":"Arguments","text":"Name Type Description Default <code>content_type</code> <code>ContentType</code> <p>expected content type of response</p> required"},{"location":"framework/usage/steps/scenario/response/#grizzly.steps.scenario.response.step_response_save","title":"Save","text":"<p>Save metadata (header) or payload (body) value from a response in a variable.</p> <p>This step expression is the same as Save matches if <code>match_with</code> is set to <code>.*</code>.</p> <p>With this step it is possible to change variable values and as such use values from a response later on in the load test.</p> <p>The Request task preceded by this step will fail if the specified <code>expression</code> has no or more than one match.</p>"},{"location":"framework/usage/steps/scenario/response/#grizzly.steps.scenario.response.step_response_save--example","title":"Example","text":"<pre><code>Then save response metadata \"$.Authentication\" in variable \"HEADER_AUTHENTICATION\"\n\nThen save response payload \"$.Result.ShipmentId\" in variable \"ShipmentId\"\n\nThen save response payload \"//measurement[0]/id/text()\" in \"xmlMeasurementId\"\n</code></pre>"},{"location":"framework/usage/steps/scenario/response/#grizzly.steps.scenario.response.step_response_save--arguments","title":"Arguments","text":"Name Type Description Default <code>target</code> <code>ResponseTarget</code> <p><code>metadata</code> or <code>payload</code>, depending on which part of the response should be used</p> required <code>expression</code> <code>str</code> <p>JSON path or XPath expression for finding the property</p> required <code>variable</code> <code>str</code> <p>name of the already initialized variable to save the value in</p> required"},{"location":"framework/usage/steps/scenario/response/#grizzly.steps.scenario.response.step_response_save_matches","title":"Save matches","text":"<p>Save specified parts of a response, either from meta data (header) or payload (body), in a variable.</p> <p>With this step it is possible to change variable values and as such use values from a response later on in the load test.</p> <p>The Request task preceded by this step will fail if the specified <code>expression</code> has no or more than one match.</p>"},{"location":"framework/usage/steps/scenario/response/#grizzly.steps.scenario.response.step_response_save_matches--example","title":"Example","text":"<pre><code># only token is matched and saved in TOKEN, by using regexp match groups\nAnd value for variable \"TOKEN\" is \"none\"\nThen save response metadata \"$.Authentication\" that matches \"Bearer (.*)$\" in variabel \"TOKEN\"\n\n# the whole value is saved, as long as Authentication starts with \"Bearer\"\nAnd value for variable \"HEADER_AUTHENTICATION\" is \"none\"\nThen save response metadata \"$.Authentication\" that matches \"^Bearer .*$\" in variable \"HEADER_AUTHENTICATION\"\n\n# only the numerical suffix is saved in the variable\nAnd value for variable \"AtomicIntegerIncrementer.measurermentId\" is \"1\"\nThen save response payload \"$.measurement.id\" that matches \"^cpu([\\d]+)$\" in \"measurementId\"\n\n# the whole value is saved, as long as the value starts with \"cpu\"\nAnd value for variable \"measurementId\" is \"0\"\nThen save response payload \"$.measurement.id\" that matches \"^cpu[\\d]+$\" in \"measurementId\"\n\n# xpath example\nAnd value for variable \"xmlMeasurementId\" is \"none\"\nThen save response payload \"//measurement[0]/id/text() | content_type=xml\" that matches \"^cpu[\\d]+$\" in \"xmlMeasurementId\"\n</code></pre>"},{"location":"framework/usage/steps/scenario/response/#grizzly.steps.scenario.response.step_response_save_matches--arguments","title":"Arguments","text":"Name Type Description Default <code>target</code> <code>ResponseTarget</code> <p><code>metadata</code> or <code>payload</code>, depending on which part of the response should be used</p> required <code>expression</code> <code>str</code> <p>JSON path or XPath expression for finding the property</p> required <code>match_with</code> <code>str</code> <p>static value or a regular expression</p> required <code>variable</code> <code>str</code> <p>name of the already initialized variable to save the value in</p> required"},{"location":"framework/usage/steps/scenario/response/#grizzly.steps.scenario.response.step_response_save_matches_optional","title":"Save matches optional","text":"<p>Save specified parts of a response, either from meta data (header) or payload (body), in a variable.</p> <p>With this step it is possible to change variable values and as such use values from a response later on in the load test.</p> <p>The Request task preceded by this step will not fail if the specified <code>expression</code> has no or more than one match, the value of <code>variable</code> will be set to <code>default_value</code>.</p>"},{"location":"framework/usage/steps/scenario/response/#grizzly.steps.scenario.response.step_response_save_matches_optional--example","title":"Example","text":"<pre><code># only token is matched and saved in TOKEN, by using regexp match groups\nAnd value for variable \"TOKEN\" is \"none\"\nThen save response metadata \"$.Authentication\" that matches \"Bearer (.*)$\" in variabel \"TOKEN\"\n\n# the whole value is saved, as long as Authentication starts with \"Bearer\"\nAnd value for variable \"HEADER_AUTHENTICATION\" is \"none\"\nThen save response metadata \"$.Authentication\" that matches \"^Bearer .*$\" in variable \"HEADER_AUTHENTICATION\"\n\n# only the numerical suffix is saved in the variable\nAnd value for variable \"AtomicIntegerIncrementer.measurermentId\" is \"1\"\nThen save response payload \"$.measurement.id\" that matches \"^cpu([\\d]+)$\" in \"measurementId\"\n\n# the whole value is saved, as long as the value starts with \"cpu\"\nAnd value for variable \"measurementId\" is \"0\"\nThen save response payload \"$.measurement.id\" that matches \"^cpu[\\d]+$\" in \"measurementId\"\n\n# xpath example\nAnd value for variable \"xmlMeasurementId\" is \"none\"\nThen save response payload \"//measurement[0]/id/text() | content_type=xml\" that matches \"^cpu[\\d]+$\" in \"xmlMeasurementId\"\n</code></pre>"},{"location":"framework/usage/steps/scenario/response/#grizzly.steps.scenario.response.step_response_save_matches_optional--arguments","title":"Arguments","text":"Name Type Description Default <code>target</code> <code>ResponseTarget</code> <p><code>metadata</code> or <code>payload</code>, depending on which part of the response should be used</p> required <code>expression</code> <code>str</code> <p>JSON path or XPath expression for finding the property</p> required <code>match_with</code> <code>str</code> <p>static value or a regular expression</p> required <code>variable</code> <code>str</code> <p>name of the already initialized variable to save the value in</p> required <code>default_value</code> <code>str</code> <p>value to set if there is no match</p> required"},{"location":"framework/usage/steps/scenario/response/#grizzly.steps.scenario.response.step_response_save_optional","title":"Save optional","text":"<p>Save metadata (header) or payload (body) value from a response in a variable.</p> <p>This step expression is the same as Save matches optional if <code>match_with</code> is set to <code>.*</code>.</p> <p>With this step it is possible to change variable values and as such use values from a response later on in the load test.</p> <p>The Request task preceded by this step will not fail if the specified <code>expression</code> has no or more than one match, the value of <code>variable</code> will be set to <code>default_value</code>.</p>"},{"location":"framework/usage/steps/scenario/response/#grizzly.steps.scenario.response.step_response_save_optional--example","title":"Example","text":"<pre><code>Then save optional response metadata \"$.Authentication\" in variable \"HEADER_AUTHENTICATION\" with default value \"none\"\n\nThen save optional response payload \"$.Result.ShipmentId\" in variable \"ShipmentId\" with default value \"SH1395865\"\n\nThen save optional response payload \"//measurement[0]/id/text()\" in \"xmlMeasurementId\" with default value \"foobar\"\n</code></pre>"},{"location":"framework/usage/steps/scenario/response/#grizzly.steps.scenario.response.step_response_save_optional--arguments","title":"Arguments","text":"Name Type Description Default <code>target</code> <code>ResponseTarget</code> <p><code>metadata</code> or <code>payload</code>, depending on which part of the response should be used</p> required <code>expression</code> <code>str</code> <p>JSON path or XPath expression for finding the property</p> required <code>variable</code> <code>str</code> <p>name of the already initialized variable to save the value in</p> required <code>default_value</code> <code>str</code> <p>value to set if there is no match</p> required"},{"location":"framework/usage/steps/scenario/response/#grizzly.steps.scenario.response.step_response_validate","title":"Validate","text":"<p>Fail a request based on the value of a response meta data (header) or payload (body).</p>"},{"location":"framework/usage/steps/scenario/response/#grizzly.steps.scenario.response.step_response_validate--example","title":"Example","text":"<pre><code>When any task fail restart scenario on failure\nWhen response metadata \"$.['content-type']\" is not \".*application/json.*\" fail request\nWhen response metadata \"$.['x-test-command']\" is \"abort\" fail request\nWhen response metadata \"$.Authentication\" is not \"Bearer .*$\" fail request\n\nWhen any task fail stop user\nWhen response payload \"$.measurement.id\" is not \"cpu[0-9]+\" fail request\nWhen response payload \"$.success\" is \"false\" fail request\nWhen response payload \"/root/measurement[@id=\"cpu\"]/success/text()\" is \"'false'\" fail request\n</code></pre>"},{"location":"framework/usage/steps/scenario/response/#grizzly.steps.scenario.response.step_response_validate--arguments","title":"Arguments","text":"Name Type Description Default <code>target</code> <code>ResponseTarget</code> <p><code>metadata</code> or <code>payload</code>, depending on which part of the response should be used</p> required <code>expression</code> <code>str</code> <p>JSON path or XPath expression for finding the property</p> required <code>condition</code> <code>enum</code> <p>\"is\" or \"is not\" depending on negative or postive matching</p> required <code>match_with</code> <code>str</code> <p>static value or a regular expression</p> required"},{"location":"framework/usage/steps/scenario/results/","title":"Results","text":"<p>Module contains step implementations that validates the total response results for all tasks in a scenario, based on locust statistics (response time and failures).</p>"},{"location":"framework/usage/steps/scenario/results/#grizzly.steps.scenario.results.step_results_average_response_time","title":"Average response time","text":"<p>Set the average response time (milliseconds) that all requests in a scenario must be below for it to pass.</p> <p>Default behavior is not to validate the result for a scenario based on average response time.</p>"},{"location":"framework/usage/steps/scenario/results/#grizzly.steps.scenario.results.step_results_average_response_time--example","title":"Example","text":"<pre><code>When average response time is greater than \"200\" milliseconds fail scenario\n</code></pre>"},{"location":"framework/usage/steps/scenario/results/#grizzly.steps.scenario.results.step_results_average_response_time--arguments","title":"Arguments","text":"Name Type Description Default <code>avg_response_time</code> <code>int</code> <p>allowed average response time in milliseconds</p> required"},{"location":"framework/usage/steps/scenario/results/#grizzly.steps.scenario.results.step_results_fail_ratio","title":"Fail ratio","text":"<p>Set how many percentages of requests that are allowed to fail before the whole scenario will be set as failed.</p> <p>Default behavior is not to validate the result for a scenario based on failed requests.</p>"},{"location":"framework/usage/steps/scenario/results/#grizzly.steps.scenario.results.step_results_fail_ratio--example","title":"Example","text":"<pre><code>When fail ratio is greater than \"8\"% fail scenario\n</code></pre>"},{"location":"framework/usage/steps/scenario/results/#grizzly.steps.scenario.results.step_results_fail_ratio--arguments","title":"Arguments","text":"Name Type Description Default <code>fail_ratio</code> <code>int</code> <p>percentage of requests that are allowed to fail</p> required"},{"location":"framework/usage/steps/scenario/results/#grizzly.steps.scenario.results.step_results_response_time_percentile","title":"Response time percentile","text":"<p>Set the response time that a specified percentile of the requests needs to be below for the scenario to pass.</p> <p>Default behavior is not to validate the result for a scenario based on percetile response times.</p>"},{"location":"framework/usage/steps/scenario/results/#grizzly.steps.scenario.results.step_results_response_time_percentile--example","title":"Example","text":"<pre><code>When response time percentile \"95\"% is greater than \"200\" milliseconds fail scenario\n</code></pre>"},{"location":"framework/usage/steps/scenario/results/#grizzly.steps.scenario.results.step_results_response_time_percentile--arguments","title":"Arguments","text":"Name Type Description Default <code>percentile</code> <code>int</code> <p>percentile to validate (1-100)</p> required <code>response_time</code> <code>int</code> <p>response time in milliseconds</p> required"},{"location":"framework/usage/steps/scenario/setup/","title":"Setup","text":"<p>Module contains step implementations that setup the load test scenario with parameters that is going to be used in the scenario they are defined in.</p>"},{"location":"framework/usage/steps/scenario/setup/#grizzly.steps.scenario.setup.step_setup_any_failed_task_custom","title":"Any failed task custom","text":"<p>Set behavior when specific failure occurs for any tasks in the scenario.</p> <p>It can be either a <code>str</code> or an exception type, where the later is more specific.</p>"},{"location":"framework/usage/steps/scenario/setup/#grizzly.steps.scenario.setup.step_setup_any_failed_task_custom--example","title":"Example","text":"<pre><code>When any task fail with \"504 gateway timeout\" retry task\nWhen any task fail with \"RuntimeError\" stop user\nWhen any task fail with \"TaskTimeoutError\" retry task\n</code></pre>"},{"location":"framework/usage/steps/scenario/setup/#grizzly.steps.scenario.setup.step_setup_any_failed_task_custom--arguments","title":"Arguments","text":"Name Type Description Default <code>failure</code> <code>type[Exception] | str</code> <p>exception type or exception message that should be handled</p> required <code>failure_action</code> <code>FailureAction</code> <p>how the specified failure should be handled</p> required"},{"location":"framework/usage/steps/scenario/setup/#grizzly.steps.scenario.setup.step_setup_any_failed_task_default","title":"Any failed task default","text":"<p>Set default behavior when latest task fail.</p> <p>If no default behavior is set, the scenario will continue as nothing happened.</p>"},{"location":"framework/usage/steps/scenario/setup/#grizzly.steps.scenario.setup.step_setup_any_failed_task_default--example","title":"Example","text":"<pre><code>When any task fail restart scenario\nWhen any task fail stop user\n</code></pre>"},{"location":"framework/usage/steps/scenario/setup/#grizzly.steps.scenario.setup.step_setup_any_failed_task_default--arguments","title":"Arguments","text":"Name Type Description Default <code>failure_action</code> <code>FailureAction</code> <p>default failure action when nothing specific is matched</p> required"},{"location":"framework/usage/steps/scenario/setup/#grizzly.steps.scenario.setup.step_setup_iteration_pace","title":"Iteration pace","text":"<p>Set minimum time one iterations of all the tasks in the scenario should take.</p> <p>E.g. if <code>pace</code> is set to <code>2000</code> ms and the time since it last ran was <code>300</code> ms, this task will sleep for <code>1700</code> ms. If the time of all tasks is greater than the specified time, there will be an error, but the scenario will continue.</p> <p>This is useful to be able to control the intensity towards the load testing target.</p>"},{"location":"framework/usage/steps/scenario/setup/#grizzly.steps.scenario.setup.step_setup_iteration_pace--example","title":"Example","text":"<pre><code>Then set iteration time to \"2000\" milliseconds\nThen set iteration time to \"{{ pace }}\" milliseconds\n</code></pre>"},{"location":"framework/usage/steps/scenario/setup/#grizzly.steps.scenario.setup.step_setup_iteration_pace--arguments","title":"Arguments","text":"Name Type Description Default <code>pace_time</code> <code>str</code> <p>number of milliseconds each iteration at max should take, supports templating</p> required"},{"location":"framework/usage/steps/scenario/setup/#grizzly.steps.scenario.setup.step_setup_iterations","title":"Iterations","text":"<p>Set how many iterations the tasks in the scenario should execute.</p> <p>Default value is <code>1</code>. A value of <code>0</code> means to run until all test data is consumed, or that the (optional) specified runtime for the scenario is reached.</p>"},{"location":"framework/usage/steps/scenario/setup/#grizzly.steps.scenario.setup.step_setup_iterations--example","title":"Example","text":"<pre><code>And repeat for \"10\" iterations\nAnd repeat for \"1\" iteration\nAnd value for variable \"leveranser\" is \"100\"\nAnd repeat for \"{{ leveranser * 0.25 }}\" iterations\n</code></pre>"},{"location":"framework/usage/steps/scenario/setup/#grizzly.steps.scenario.setup.step_setup_iterations--arguments","title":"Arguments","text":"Name Type Description Default <code>value</code> <code>str</code> <p>number of iterations of the scenario, can be a templatning string or a environment configuration variable</p> required"},{"location":"framework/usage/steps/scenario/setup/#grizzly.steps.scenario.setup.step_setup_log_all_requests","title":"Log all requests","text":"<p>Set if all requests should be logged to a file.</p> <p>By default only failed requests (and responses) will be logged.</p>"},{"location":"framework/usage/steps/scenario/setup/#grizzly.steps.scenario.setup.step_setup_log_all_requests--example","title":"Example","text":"<pre><code>And log all requests\n</code></pre>"},{"location":"framework/usage/steps/scenario/setup/#grizzly.steps.scenario.setup.step_setup_metadata","title":"Metadata","text":"<p>Set a metadata (header) value to be used by the user when sending requests.</p> <p>When step expression is used before any tasks has been added in the scenario the metadata will be used for all requests the specified loadtesting user executes in the scenario.</p> <p>If used after a Request task, the metadata will be added and only used for that request.</p> <p>If used after a task that implements <code>grizzly.auth.GrizzlyHttpAuthClient</code> (e.g. HTTP client task), the metadata will be added and only used when that task executes.</p>"},{"location":"framework/usage/steps/scenario/setup/#grizzly.steps.scenario.setup.step_setup_metadata--example","title":"Example","text":"<pre><code>And metadata \"Content-Type\" is \"application/xml\"\nAnd metadata \"Ocp-Apim-Subscription-Key\" is \"9asdf00asdf00adsf034\"\n</code></pre> <p>Or, for use in one request only, specify metadata after the request: </p><pre><code>Then post request ...\nAnd metadata \"x-header\" is \"{{ value }}\"\n\nThen get from \"https://{{ client_url }}\" with name \"client-http\" and save response payload in \"payload\"\nAnd metadata \"Ocp-Apim-Subscription-Key\" is \"deadbeefb00f\"\n</code></pre>"},{"location":"framework/usage/steps/scenario/setup/#grizzly.steps.scenario.setup.step_setup_set_variable_alias","title":"Set variable alias","text":"<p>Create an alias for a variable that points to another structure in the context.</p> <p>This is useful if you have test data that somehow should change the behavior for a user, e.g. username and password.</p>"},{"location":"framework/usage/steps/scenario/setup/#grizzly.steps.scenario.setup.step_setup_set_variable_alias--example","title":"Example","text":"<pre><code>And value for variable \"AtomicCsvReader.users\" is \"users.csv | repeat=True\"\nAnd set alias \"auth.user.username\" for variable \"AtomicCsvReader.users.username\"\nAnd set alias \"auth.user.password\" for variable \"AtomicCsvReader.users.password\"\n</code></pre> <p>Variables in payload templates are not allowed to have an alias.</p>"},{"location":"framework/usage/steps/scenario/setup/#grizzly.steps.scenario.setup.step_setup_set_variable_alias--arguments","title":"Arguments","text":"Name Type Description Default <code>alias</code> <code>str</code> <p>which node in the context that should get the value of <code>variable</code></p> required <code>variable</code> <code>str</code> <p>an already initialized variable that should be renamed</p> required"},{"location":"framework/usage/steps/scenario/setup/#grizzly.steps.scenario.setup.step_setup_the_failed_task_custom","title":"The failed task custom","text":"<p>Set behavior when specific failure occurs for the latest task.</p> <p>It can be either a <code>str</code> or an exception type, where the later is more specific.</p>"},{"location":"framework/usage/steps/scenario/setup/#grizzly.steps.scenario.setup.step_setup_the_failed_task_custom--example","title":"Example","text":"<pre><code>...\nWhen the task fails with \"504 gateway timeout\" retry task\nWhen the task fails with \"RuntimeError\" stop user\nWhen the task fails with \"TaskTimeoutError\" retry task\n</code></pre>"},{"location":"framework/usage/steps/scenario/setup/#grizzly.steps.scenario.setup.step_setup_the_failed_task_custom--arguments","title":"Arguments","text":"Name Type Description Default <code>failure</code> <code>type[Exception] | str</code> <p>exception type or exception message that should be handled</p> required <code>failure_action</code> <code>FailureAction</code> <p>how the specified failure should be handled</p> required"},{"location":"framework/usage/steps/scenario/setup/#grizzly.steps.scenario.setup.step_setup_the_failed_task_default","title":"The failed task default","text":"<p>Set default behavior when the latest task fails.</p> <p>If no default behavior is set, the scenario will continue as nothing happened.</p>"},{"location":"framework/usage/steps/scenario/setup/#grizzly.steps.scenario.setup.step_setup_the_failed_task_default--example","title":"Example","text":"<pre><code>...\nWhen the task fails restart scenario\nWhen the task fails stop user\n</code></pre>"},{"location":"framework/usage/steps/scenario/setup/#grizzly.steps.scenario.setup.step_setup_the_failed_task_default--arguments","title":"Arguments","text":"Name Type Description Default <code>failure_action</code> <code>FailureAction</code> <p>default failure action when nothing specific is matched</p> required"},{"location":"framework/usage/steps/scenario/user/","title":"User","text":"<p>Module contains step implementations that describes a load user.</p>"},{"location":"framework/usage/steps/scenario/user/#grizzly.steps.scenario.user.step_user_type","title":"Type","text":"<p>Set which type of load user the scenario should use and which <code>host</code> is the target.</p>"},{"location":"framework/usage/steps/scenario/user/#grizzly.steps.scenario.user.step_user_type--example","title":"Example","text":"<pre><code>Given a user of type \"RestApi\" load testing \"http://api.example.com\"\nGiven a user of type \"MessageQueue\" load testing \"mq://mqm:secret@mq.example.com/?QueueManager=QMGR01&amp;Channel=Channel01\"\nGiven a user of type \"ServiceBus\" load testing \"sb://sb.example.com/;SharedAccessKeyName=RootManageSharedAccessKey;SharedAccessKey=abc123def456ghi789=\"\nGiven a user of type \"BlobStorage\" load testing \"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=examplestorage;AccountKey=xxxyyyyzzz==\"\n</code></pre>"},{"location":"framework/usage/steps/scenario/user/#grizzly.steps.scenario.user.step_user_type--arguments","title":"Arguments","text":"Name Type Description Default <code>user_class_name</code> <code>str</code> <p>name of an implementation of load user, with or without <code>User</code>-suffix</p> required <code>host</code> <code>str</code> <p>an URL for the target host, format depends on which load user is specified</p> required"},{"location":"framework/usage/steps/scenario/user/#grizzly.steps.scenario.user.step_user_type_with_count","title":"Type with count","text":"<p>Set which type of load user the scenario should use, which <code>host</code> is the target and how many users that should be spawned.</p>"},{"location":"framework/usage/steps/scenario/user/#grizzly.steps.scenario.user.step_user_type_with_count--example","title":"Example","text":"<pre><code>Given \"1\" user of type \"RestApi\" load testing \"...\"\nGiven \"10\" users of type \"MessageQueue\" load testing \"...\"\nGiven \"5\" users of type \"ServiceBus\" load testing \"...\"\nGiven \"1\" user of type \"BlobStorage\" load testing \"...\"\n</code></pre>"},{"location":"framework/usage/steps/scenario/user/#grizzly.steps.scenario.user.step_user_type_with_count--arguments","title":"Arguments","text":"Name Type Description Default <code>user_count</code> <code>int</code> <p>number of users locust should create</p> required <code>user_class_name</code> <code>str</code> <p>name of an implementation of load user, with or without <code>User</code>-suffix</p> required <code>host</code> <code>str</code> <p>an URL for the target host, format depends on which load user is specified</p> required"},{"location":"framework/usage/steps/scenario/user/#grizzly.steps.scenario.user.step_user_type_with_count_and_tag","title":"Type with count and tag","text":"<p>Set which type of load user the scenario should use, which <code>host</code> is the target, how many users that should be spawned and an associated tag.</p> <p>Users with the same <code>tag</code> value will run on the same set of workers, which will be exclusive for users with the same tag value.</p>"},{"location":"framework/usage/steps/scenario/user/#grizzly.steps.scenario.user.step_user_type_with_count_and_tag--example","title":"Example","text":"<pre><code>Given \"1\" user of type \"RestApi\" with tag \"foo\" load testing \"...\"\nGiven \"10\" users of type \"MessageQueue\" with tag \"foo\" load testing \"...\"\nGiven \"5\" users of type \"ServiceBus\" with tag \"bar\" load testing \"...\"\nGiven \"1\" user of type \"BlobStorage\" with tag \"bar\" load testing \"...\"\n</code></pre>"},{"location":"framework/usage/steps/scenario/user/#grizzly.steps.scenario.user.step_user_type_with_count_and_tag--arguments","title":"Arguments","text":"Name Type Description Default <code>user_count</code> <code>int</code> <p>number of users locust should create</p> required <code>user_class_name</code> <code>str</code> <p>name of an implementation of load user, with or without <code>User</code>-suffix</p> required <code>tag</code> <code>str</code> <p>unique string to \"stick\" user types to a set of exclusive workers</p> required <code>host</code> <code>str</code> <p>URL for the target host, format depends on which load user is specified</p> required"},{"location":"framework/usage/steps/scenario/user/#grizzly.steps.scenario.user.step_user_type_with_weight","title":"Type with weight","text":"<p>Set which type of load user the scenario should use and which <code>host</code> is the target, together with <code>weight</code> of the user (how many instances of this user should spawn relative to others).</p>"},{"location":"framework/usage/steps/scenario/user/#grizzly.steps.scenario.user.step_user_type_with_weight--example","title":"Example","text":"<pre><code>Given a user of type \"RestApi\" with weight \"2\" load testing \"...\"\nGiven a user of type \"MessageQueue\" with weight \"1\" load testing \"...\"\nGiven a user of type \"ServiceBus\" with weight \"1\" load testing \"...\"\nGiven a user of type \"BlobStorage\" with weight \"4\" load testing \"...\"\n</code></pre>"},{"location":"framework/usage/steps/scenario/user/#grizzly.steps.scenario.user.step_user_type_with_weight--arguments","title":"Arguments","text":"Name Type Description Default <code>user_class_name</code> <code>str</code> <p>name of an implementation of load user, with or without <code>User</code>-suffix</p> required <code>weight_value</code> <code>int</code> <p>weight value for the user, default is <code>1</code> (see writing a locustfile)</p> required <code>host</code> <code>str</code> <p>an URL for the target host, format depends on which load user is specified</p> required"},{"location":"framework/usage/steps/scenario/tasks/async_group/","title":"Async Group","text":"<p>Module contains step implementations for the Async group task.</p>"},{"location":"framework/usage/steps/scenario/tasks/async_group/#grizzly.steps.scenario.tasks.async_group.step_task_async_group_close","title":"Close","text":"<p>Close the instance created in Async group start.</p> <p>Add the Async group task to the list of tasks that the scenario is going to execute.</p> <p>See Async group task documentation for more information.</p>"},{"location":"framework/usage/steps/scenario/tasks/async_group/#grizzly.steps.scenario.tasks.async_group.step_task_async_group_close--example","title":"Example","text":"<pre><code>Given an async request group with name \"async-group-1\"\nThen post request with name \"test-post-2\" to endpoint \"/api/test\"\n    \"\"\"\n    {\n        \"value\": \"good news everyone!\"\n    }\n    \"\"\"\n\nThen get request with name \"test-get-1\" from endpoint \"/api/test\"\nAnd close async request group\n</code></pre>"},{"location":"framework/usage/steps/scenario/tasks/async_group/#grizzly.steps.scenario.tasks.async_group.step_task_async_group_open","title":"Open","text":"<p>Create an instance of the Async group task.</p> <p>All Request tasks created after this step will be added to the request group, until the group is closed.</p> <p>See Async group task documentation for more information.</p>"},{"location":"framework/usage/steps/scenario/tasks/async_group/#grizzly.steps.scenario.tasks.async_group.step_task_async_group_open--example","title":"Example","text":"<pre><code>Given an async request group with name \"async-group-1\"\nThen post request with name \"test-post-2\" to endpoint \"/api/test\"\n    \"\"\"\n    {\n        \"value\": \"good news everyone!\"\n    }\n    \"\"\"\n\nThen get request with name \"test-get-1\" from endpoint \"/api/test\"\nAnd close async request group\n</code></pre> <p>In this example, the <code>put</code> and <code>get</code> requests will run asynchronously, and both requests will block following requests until both are finished. Async group tasks cannot be nested.</p>"},{"location":"framework/usage/steps/scenario/tasks/async_group/#grizzly.steps.scenario.tasks.async_group.step_task_async_group_open--arguments","title":"Arguments","text":"Name Type Description Default <code>name</code> <code>str</code> <p>unique name for the group, used in request statistics</p> required"},{"location":"framework/usage/steps/scenario/tasks/async_timer/","title":"Async Timer","text":"<p>Module contains step implementations for the Async timer task.</p>"},{"location":"framework/usage/steps/scenario/tasks/async_timer/#grizzly.steps.scenario.tasks.async_timer.step_task_async_timer_start","title":"Start","text":"<p>Start an asynchrounous timer.</p> <p>See Async timer task documentation for more information.</p>"},{"location":"framework/usage/steps/scenario/tasks/async_timer/#grizzly.steps.scenario.tasks.async_timer.step_task_async_timer_start--example","title":"Example","text":"<pre><code>Scenario: input\n    Then start document timer with name \"Creation time\" for id \"{{ document_id }}\" and version \"{{ document_version }}\"\n</code></pre> <p>Start a timer in one scenario. One specific instance of a timer is the combination of <code>name</code>, <code>tid</code> and <code>version</code>. So <code>tid</code> can be reused, as long as it has another <code>version</code>.</p>"},{"location":"framework/usage/steps/scenario/tasks/async_timer/#grizzly.steps.scenario.tasks.async_timer.step_task_async_timer_start--arguments","title":"Arguments","text":"Name Type Description Default <code>name</code> <code>str</code> <p>name of the timer which will be shown in request statistics</p> required <code>tid</code> <code>str</code> <p>unique id for the timer</p> required <code>version</code> <code>str</code> <p>version of <code>tid</code></p> required"},{"location":"framework/usage/steps/scenario/tasks/async_timer/#grizzly.steps.scenario.tasks.async_timer.step_task_async_timer_stop","title":"Stop","text":"<p>Stop an asynchrounous timer, with a known name.</p> <p>This is needed if the combination of <code>tid</code> and <code>version</code> the timer was started with is not unique for the timer.</p> <p>See Async timer task documentation for more information.</p>"},{"location":"framework/usage/steps/scenario/tasks/async_timer/#grizzly.steps.scenario.tasks.async_timer.step_task_async_timer_stop--example","title":"Example","text":"<pre><code>Scenario: output\n    Then stop document timer with name \"Creation time\" for id \"{{ document_id }}\" and version \"{{ document_version }}\"\n</code></pre> <p>Stop timer from another scenario (or the same as it was started).</p>"},{"location":"framework/usage/steps/scenario/tasks/async_timer/#grizzly.steps.scenario.tasks.async_timer.step_task_async_timer_stop--arguments","title":"Arguments","text":"Name Type Description Default <code>name</code> <code>str</code> <p>name of the timer which will be shown in request statistics</p> required <code>tid</code> <code>str</code> <p>unique id for the timer</p> required <code>version</code> <code>str</code> <p>version of <code>tid</code></p> required"},{"location":"framework/usage/steps/scenario/tasks/clients/","title":"Clients","text":"<p>Module contains step implementations for client tasks.</p>"},{"location":"framework/usage/steps/scenario/tasks/clients/#grizzly.steps.scenario.tasks.clients.step_task_client_from_endpoint_payload","title":"Client from endpoint payload","text":"<p>Create an instance of a client task, actual implementation of the task is determined based on the URL scheme specified in <code>endpoint</code>.</p> <p>Get information from another host or endpoint than the scenario is load testing and saves the response in a variable.</p> <p>See client task documentation for more information about client tasks.</p>"},{"location":"framework/usage/steps/scenario/tasks/clients/#grizzly.steps.scenario.tasks.clients.step_task_client_from_endpoint_payload--example","title":"Example","text":"<pre><code>Then get from \"https://www.example.org/example.json\" with name \"example-1\" and save response payload in \"example_openapi\"\nThen get from \"http://{{ endpoint }}\" with name \"example-2\" and save response payload in \"endpoint_result\"\n</code></pre>"},{"location":"framework/usage/steps/scenario/tasks/clients/#grizzly.steps.scenario.tasks.clients.step_task_client_from_endpoint_payload--arguments","title":"Arguments","text":"Name Type Description Default <code>endpoint</code> <code>str</code> <p>information about where to get information, see the specific getter task implementations for more information</p> required <code>name</code> <code>str</code> <p>name of the request, used in request statistics</p> required <code>variable</code> <code>str</code> <p>name of, initialized, variable where response payload will be saved in</p> required"},{"location":"framework/usage/steps/scenario/tasks/clients/#grizzly.steps.scenario.tasks.clients.step_task_client_from_endpoint_payload_and_metadata","title":"Client from endpoint payload and metadata","text":"<p>Create an instance of a client task, actual implementation of the task is determined based on the URL scheme specified in <code>endpoint</code>.</p> <p>Get information from another host or endpoint than the scenario is load testing and saves the response in a variable.</p> <p>See client task documentation for more information about client tasks.</p>"},{"location":"framework/usage/steps/scenario/tasks/clients/#grizzly.steps.scenario.tasks.clients.step_task_client_from_endpoint_payload_and_metadata--example","title":"Example","text":"<pre><code>Then get from \"https://www.example.org/example.json\" with name \"example-1\" and save response payload in \"example_openapi\" and metadata in \"example_metadata\"\nThen get from \"http://{{ endpoint }}\" with name \"example-2\" and save response payload in \"endpoint_result\" and metadata in \"result_metadata\"\n</code></pre>"},{"location":"framework/usage/steps/scenario/tasks/clients/#grizzly.steps.scenario.tasks.clients.step_task_client_from_endpoint_payload_and_metadata--arguments","title":"Arguments","text":"Name Type Description Default <code>endpoint</code> <code>str</code> <p>information about where to get information, see the specific getter task implementations for more information</p> required <code>name</code> <code>str</code> <p>name of the request, used in request statistics</p> required <code>payload_variable</code> <code>str</code> <p>name of, initialized, variable where response payload will be saved in</p> required <code>metadata_variable</code> <code>str</code> <p>name of, initialized, variable where response metadata will be saved in</p> required"},{"location":"framework/usage/steps/scenario/tasks/clients/#grizzly.steps.scenario.tasks.clients.step_task_client_to_endpoint_file","title":"Client to endpoint file","text":"<p>Create an instance of a client task, actual implementation of the task is determined based on the URL scheme specified in <code>endpoint</code>.</p> <p>Put information, source being a file, to another host or endpoint than the scenario is load testing and saves the response in a variable</p> <p>See client task documentation for more information about client tasks.</p>"},{"location":"framework/usage/steps/scenario/tasks/clients/#grizzly.steps.scenario.tasks.clients.step_task_client_to_endpoint_file--example","title":"Example","text":"<pre><code>Then put \"test-file.json\" to \"bs://my-storage?AccountKey=aaaabbb=&amp;Container=my-container\" with name \"upload-file\"\n</code></pre>"},{"location":"framework/usage/steps/scenario/tasks/clients/#grizzly.steps.scenario.tasks.clients.step_task_client_to_endpoint_file--arguments","title":"Arguments","text":"Name Type Description Default <code>source</code> <code>str</code> <p>relative path to file in <code>feature/requests</code>, supports templating</p> required <code>endpoint</code> <code>str</code> <p>information about where to get information, see the specific getter task implementations for more information</p> required <code>name</code> <code>str</code> <p>name of the request, used in request statistics</p> required"},{"location":"framework/usage/steps/scenario/tasks/clients/#grizzly.steps.scenario.tasks.clients.step_task_client_to_endpoint_file_destination","title":"Client to endpoint file destination","text":"<p>Create an instance of a client task, actual implementation of the task is determined based on the URL scheme specified in <code>endpoint</code>.</p> <p>Put information, source being a file, to another host or endpoint than the scenario is load testing and saves the response in a variable</p> <p>See client task documentation for more information about client tasks.</p>"},{"location":"framework/usage/steps/scenario/tasks/clients/#grizzly.steps.scenario.tasks.clients.step_task_client_to_endpoint_file_destination--example","title":"Example","text":"<pre><code>Then put \"test-file.json\" to \"bs://my-storage/my-container?AccountKey=aaaabbb=\" with name \"upload-file\" as \"uploaded-test-file.json\"\n</code></pre>"},{"location":"framework/usage/steps/scenario/tasks/clients/#grizzly.steps.scenario.tasks.clients.step_task_client_to_endpoint_file_destination--arguments","title":"Arguments","text":"Name Type Description Default <code>source</code> <code>str</code> <p>relative path to file in <code>feature/requests</code>, supports templating</p> required <code>endpoint</code> <code>str</code> <p>information about where to get information, see the specific getter task implementations for more information</p> required <code>name</code> <code>str</code> <p>name of the request, used in request statistics</p> required <code>destination</code> <code>str</code> <p>name of source on the destination</p> required"},{"location":"framework/usage/steps/scenario/tasks/clients/#grizzly.steps.scenario.tasks.clients.step_task_client_to_endpoint_text","title":"Client to endpoint text","text":"<p>Create an instance of a client task, actual implementation of the task is determined based on the URL scheme specified in <code>endpoint</code>.</p> <p>Put information, source step text, to another host or endpoint than the scenario is load testing and saves the response in a variable</p> <p>See client task documentation for more information about client tasks.</p>"},{"location":"framework/usage/steps/scenario/tasks/clients/#grizzly.steps.scenario.tasks.clients.step_task_client_to_endpoint_text--example","title":"Example","text":"<pre><code>Then put to \"https://api.example.com/v2/echo\" with name \"put-request\"\n  \"\"\"\n  hello world\n  \"\"\"\n</code></pre>"},{"location":"framework/usage/steps/scenario/tasks/clients/#grizzly.steps.scenario.tasks.clients.step_task_client_to_endpoint_text--arguments","title":"Arguments","text":"Name Type Description Default <code>endpoint</code> <code>str</code> <p>information about where to get information, see the specific getter task implementations for more information</p> required <code>name</code> <code>str</code> <p>name of the request, used in request statistics</p> required"},{"location":"framework/usage/steps/scenario/tasks/conditional/","title":"Conditional","text":"<p>Module contains step implementations for the Conditional task.</p>"},{"location":"framework/usage/steps/scenario/tasks/conditional/#grizzly.steps.scenario.tasks.conditional.step_task_conditional_else","title":"Else","text":"<p>Change state of Conditional task instance created by Conditional if so that any following tasks will be run when <code>condition</code> is false.</p> <p>See Conditional task documentation for more information.</p>"},{"location":"framework/usage/steps/scenario/tasks/conditional/#grizzly.steps.scenario.tasks.conditional.step_task_conditional_else--example","title":"Example","text":"<pre><code>When condition \"{{ value | int &gt; 0 }}\" with name \"value-conditional\" is true, execute these tasks\nThen get request with name \"get-when-true\" from endpoint \"/api/true\"\nThen parse date \"2022-01-17 12:21:37 | timezone=UTC, format=\"%Y-%m-%dT%H:%M:%S.%f\", offset=1D\" and save in variable \"date1\"\nBut if condition is false, execute these tasks\nThen get request with name \"get-when-false\" from endpoint \"/api/false\"\nThen end condition\n</code></pre>"},{"location":"framework/usage/steps/scenario/tasks/conditional/#grizzly.steps.scenario.tasks.conditional.step_task_conditional_end","title":"End","text":"<p>Close the Conditional task instance created by Conditional if.</p> <p>This means that any following tasks specified will not be part of the conditional.</p> <p>See Conditional task documentation for more information.</p>"},{"location":"framework/usage/steps/scenario/tasks/conditional/#grizzly.steps.scenario.tasks.conditional.step_task_conditional_end--example","title":"Example","text":"<pre><code>When condition \"{{ value | int &gt; 0 }}\" with name \"value-conditional\" is true, execute these tasks\nThen get request with name \"get-when-true\" from endpoint \"/api/true\"\nThen parse date \"2022-01-17 12:21:37 | timezone=UTC, format=\"%Y-%m-%dT%H:%M:%S.%f\", offset=1D\" and save in variable \"date1\"\nBut if condition is false, execute these tasks\nThen get request with name \"get-when-false\" from endpoint \"/api/false\"\nThen end condition\n</code></pre>"},{"location":"framework/usage/steps/scenario/tasks/conditional/#grizzly.steps.scenario.tasks.conditional.step_task_conditional_if","title":"If","text":"<p>Create an instance of the Conditional task which executes different sets of task depending on <code>condition</code>.</p> <p>Also sets the task in a state that any following tasks will be run when <code>condition</code> is true.</p> <p>See Conditional task documentation for more information.</p>"},{"location":"framework/usage/steps/scenario/tasks/conditional/#grizzly.steps.scenario.tasks.conditional.step_task_conditional_if--example","title":"Example","text":"<pre><code>When condition \"{{ value | int &gt; 0 }}\" with name \"value-conditional\" is true, execute these tasks\nThen get request with name \"get-when-true\" from endpoint \"/api/true\"\nThen parse date \"2022-01-17 12:21:37 | timezone=UTC, format=\"%Y-%m-%dT%H:%M:%S.%f\", offset=1D\" and save in variable \"date1\"\nBut if condition is false, execute these tasks\nThen get request with name \"get-when-false\" from endpoint \"/api/false\"\nThen end condition\n</code></pre>"},{"location":"framework/usage/steps/scenario/tasks/conditional/#grizzly.steps.scenario.tasks.conditional.step_task_conditional_if--arguments","title":"Arguments","text":"Name Type Description Default <code>condition</code> <code>str</code> <p>jinja2 template that renders into a boolean</p> required <code>name</code> <code>str</code> <p>name of the conditional, will be used in request statistics</p> required"},{"location":"framework/usage/steps/scenario/tasks/date/","title":"Date","text":"<p>Module contains step implementations for the Date task.</p>"},{"location":"framework/usage/steps/scenario/tasks/date/#grizzly.steps.scenario.tasks.date.step_task_date_parse","title":"Parse","text":"<p>Create an instance of the Date task.</p> <p>Parses a datetime string and transforms it according to specified arguments.</p> <p>See Date task documentation for more information about arguments.</p> <p>This step is useful when changes has to be made to a datetime representation during an iteration of a scenario.</p>"},{"location":"framework/usage/steps/scenario/tasks/date/#grizzly.steps.scenario.tasks.date.step_task_date_parse--example","title":"Example","text":"<pre><code>...\nAnd value for variable \"date1\" is \"none\"\nAnd value for variable \"date2\" is \"none\"\nAnd value for variable \"date3\" is \"none\"\nAnd value for variable \"AtomicDate.test\" is \"now\"\n\nThen parse date \"2022-01-17 12:21:37 | timezone=UTC, format=\"%Y-%m-%dT%H:%M:%S.%f\", offset=1D\" and save in variable \"date1\"\nThen parse date \"{{ AtomicDate.test }} | offset=-1D\" and save in variable \"date2\"\nThen parse date \"{{ datetime.now() }} | offset=1Y\" and save in variable \"date3\"\n</code></pre>"},{"location":"framework/usage/steps/scenario/tasks/date/#grizzly.steps.scenario.tasks.date.step_task_date_parse--arguments","title":"Arguments","text":"Name Type Description Default <code>value</code> <code>str</code> <p>datetime string and arguments</p> required <code>variable</code> <code>str</code> <p>name of, initialized, variable where response will be saved in</p> required"},{"location":"framework/usage/steps/scenario/tasks/date/#grizzly.steps.scenario.tasks.date.step_task_date_parse--format","title":"Format","text":""},{"location":"framework/usage/steps/scenario/tasks/date/#grizzly.steps.scenario.tasks.date.step_task_date_parse--value","title":"value","text":"<pre><code>&lt;date&gt; [| format=&lt;format&gt;][, timezone=&lt;timezone&gt;][, offset=&lt;offset&gt;]\n</code></pre> Name Type Description Default <code>date</code> <code>str | datetime</code> string representation of a date and/or time or a <code>datetime</code> object, e.g. <code>datetime.now()</code> required <code>format</code> <code>str</code> python <code>strftime</code> format string or <code>ISO-8601:[DateTime|Time][:ms][:no-sep]</code> required <code>timezone</code> <code>str</code> valid timezone name <code>None</code> (local) <code>offset</code> <code>str</code> time span string describing the offset, <code>Y</code> = years, <code>M</code> = months, <code>D</code> = days, <code>h</code> = hours, <code>m</code> = minutes, <code>s</code> = seconds, e.g. <code>1Y-2M10D</code> <code>None</code> <p>See wikipedia ISO 8601 for information about the <code>ISO-8601</code> format. Specifying <code>DateTime</code> would result in \"Date and time with the offset\" and <code>Time</code> results in everything after \"T\" in the same example.</p> <p>In addition to this it is also possible to append milliseconds with <code>:ms</code> and remove all the seperators in the date and time with <code>:no-sep</code>.</p>"},{"location":"framework/usage/steps/scenario/tasks/keystore/","title":"Keystore","text":"<p>Module contains step implementations for the Keystore task.</p>"},{"location":"framework/usage/steps/scenario/tasks/keystore/#grizzly.steps.scenario.tasks.keystore.step_task_keystore_decrement_default_with_step","title":"Decrement default with step","text":"<p>Decrement the integer value for <code>key</code> (with step <code>1</code>) using the Keystore task.</p> <p>If there is no value for <code>key</code> decrementing will start from 0. The new value is saved in <code>variable</code>.</p> <p>See Keystore task documentation for more information.</p>"},{"location":"framework/usage/steps/scenario/tasks/keystore/#grizzly.steps.scenario.tasks.keystore.step_task_keystore_decrement_default_with_step--example","title":"Example","text":"<pre><code>Given value for variable \"counter\" is \"none\"\nThen decrement \"counter_key\" in keystore and save in variable \"counter\"\n</code></pre>"},{"location":"framework/usage/steps/scenario/tasks/keystore/#grizzly.steps.scenario.tasks.keystore.step_task_keystore_decrement_default_with_step--arguments","title":"Arguments","text":"Name Type Description Default <code>key</code> <code>str</code> <p>name of key</p> required <code>variable</code> <code>str</code> <p>name of initialized variable to save keystore value in</p> required"},{"location":"framework/usage/steps/scenario/tasks/keystore/#grizzly.steps.scenario.tasks.keystore.step_task_keystore_get","title":"Get","text":"<p>Get a value for <code>key</code> using the Keystore task.</p> <p>See Keystore task documentation for more information.</p>"},{"location":"framework/usage/steps/scenario/tasks/keystore/#grizzly.steps.scenario.tasks.keystore.step_task_keystore_get--example","title":"Example","text":"<pre><code>And value for variable \"foobar\" is \"none\"\nThen get \"foobar_key\" from keystore and save in variable \"foobar\"\n</code></pre>"},{"location":"framework/usage/steps/scenario/tasks/keystore/#grizzly.steps.scenario.tasks.keystore.step_task_keystore_get--arguments","title":"Arguments","text":"Name Type Description Default <code>key</code> <code>str</code> <p>name of key</p> required <code>variable</code> <code>str</code> <p>name of initialized variable to save keystore value in</p> required"},{"location":"framework/usage/steps/scenario/tasks/keystore/#grizzly.steps.scenario.tasks.keystore.step_task_keystore_get_default","title":"Get default","text":"<p>Get a value for <code>key</code> using the Keystore task.</p> <p>If <code>key</code> does not exist in the keystore <code>default_value</code> will be used and will be set in the keystore to next iteration. <code>default_value</code> must be JSON serializable (string values must be single-quoted).</p> <p>See Keystore task documentation for more information.</p>"},{"location":"framework/usage/steps/scenario/tasks/keystore/#grizzly.steps.scenario.tasks.keystore.step_task_keystore_get_default--example","title":"Example","text":"<pre><code>And value for variable \"foobar\" is \"none\"\nThen get \"foobar_key\" from keystore and save in variable \"foobar\", with default value \"{'hello': 'world'}\"\n</code></pre>"},{"location":"framework/usage/steps/scenario/tasks/keystore/#grizzly.steps.scenario.tasks.keystore.step_task_keystore_get_default--arguments","title":"Arguments","text":"Name Type Description Default <code>key</code> <code>str</code> <p>name of key</p> required <code>variable</code> <code>str</code> <p>name of initialized variable to save keystore value in</p> required <code>default_value</code> <code>str</code> <p>default value to use if value is missing in keystore</p> required"},{"location":"framework/usage/steps/scenario/tasks/keystore/#grizzly.steps.scenario.tasks.keystore.step_task_keystore_get_remove","title":"Get remove","text":"<p>Get a value for <code>key</code> using the Keystore task, then remove entry.</p> <p>See Keystore task documentation for more information.</p>"},{"location":"framework/usage/steps/scenario/tasks/keystore/#grizzly.steps.scenario.tasks.keystore.step_task_keystore_get_remove--example","title":"Example","text":"<pre><code>And value for variable \"foobar\" is \"none\"\nThen get and remove \"foobar_key\" from keystore and save in variable \"foobar\"\n</code></pre>"},{"location":"framework/usage/steps/scenario/tasks/keystore/#grizzly.steps.scenario.tasks.keystore.step_task_keystore_get_remove--arguments","title":"Arguments","text":"Name Type Description Default <code>key</code> <code>str</code> <p>name of key</p> required <code>variable</code> <code>str</code> <p>name of initialized variable to save keystore value in</p> required"},{"location":"framework/usage/steps/scenario/tasks/keystore/#grizzly.steps.scenario.tasks.keystore.step_task_keystore_increment_default_with_step","title":"Increment default with step","text":"<p>Increment the integer value for <code>key</code> (with step <code>1</code>) using the Keystore task.</p> <p>If there is no value for <code>key</code> incrementing will start from 0. The new value is saved in <code>variable</code>.</p> <p>See Keystore task documentation for more information.</p>"},{"location":"framework/usage/steps/scenario/tasks/keystore/#grizzly.steps.scenario.tasks.keystore.step_task_keystore_increment_default_with_step--example","title":"Example","text":"<pre><code>Given value for variable \"counter\" is \"none\"\nThen increment \"counter_key\" in keystore and save in variable \"counter\"\n</code></pre>"},{"location":"framework/usage/steps/scenario/tasks/keystore/#grizzly.steps.scenario.tasks.keystore.step_task_keystore_increment_default_with_step--arguments","title":"Arguments","text":"Name Type Description Default <code>key</code> <code>str</code> <p>name of key</p> required <code>variable</code> <code>str</code> <p>name of initialized variable to save keystore value in</p> required"},{"location":"framework/usage/steps/scenario/tasks/keystore/#grizzly.steps.scenario.tasks.keystore.step_task_keystore_pop","title":"Pop","text":"<p>Pop a value for <code>key</code> using the Keystore task.</p> <p>This task will block the scenario until there is a value in the keystore for key <code>key</code>, in other words it can be used to share and synchronize different scenarios.</p> <p>See Keystore task documentation for more information.</p>"},{"location":"framework/usage/steps/scenario/tasks/keystore/#grizzly.steps.scenario.tasks.keystore.step_task_keystore_pop--example","title":"Example","text":"<pre><code>Scenario: push\n    And value for variable \"foobar\" is \"none\"\n    Then push \"foobar_key\" in keystore with value \"foobar\"\n\nScenario: pop\n    And value for variable \"foobar\" is \"none\"\n    Then pop \"foobar_key\" from keystore and save in variable \"foobar\"\n</code></pre>"},{"location":"framework/usage/steps/scenario/tasks/keystore/#grizzly.steps.scenario.tasks.keystore.step_task_keystore_pop--arguments","title":"Arguments","text":"Name Type Description Default <code>key</code> <code>str</code> <p>name of key</p> required <code>variable</code> <code>str</code> <p>name of initialized variable to save keystore value in</p> required"},{"location":"framework/usage/steps/scenario/tasks/keystore/#grizzly.steps.scenario.tasks.keystore.step_task_keystore_push","title":"Push","text":"<p>Push a value for <code>key</code> using the Keystore task.</p> <p><code>value</code> must be JSON serializable.</p> <p>See Keystore task documentation for more information.</p>"},{"location":"framework/usage/steps/scenario/tasks/keystore/#grizzly.steps.scenario.tasks.keystore.step_task_keystore_push--example","title":"Example","text":"<pre><code>Scenario: push\n    And value for variable \"foobar\" is \"none\"\n    Then push \"foobar_key\" in keystore with value \"foobar\"\n\nScenario: pop\n    And value for variable \"foobar\" is \"none\"\n    Then pop \"foobar_key\" from keystore and save in variable \"foobar\"\n</code></pre>"},{"location":"framework/usage/steps/scenario/tasks/keystore/#grizzly.steps.scenario.tasks.keystore.step_task_keystore_push--arguments","title":"Arguments","text":"Name Type Description Default <code>key</code> <code>str</code> <p>name of key</p> required <code>value</code> <code>str</code> <p>JSON serializable value to push to keystore</p> required"},{"location":"framework/usage/steps/scenario/tasks/keystore/#grizzly.steps.scenario.tasks.keystore.step_task_keystore_push_text","title":"Push text","text":"<p>Push a value for <code>key</code> using the Keystore task.</p> <p><code>value</code> is specified via step text, and must be JSON serializable.</p> <p>See Keystore task documentation for more information.</p>"},{"location":"framework/usage/steps/scenario/tasks/keystore/#grizzly.steps.scenario.tasks.keystore.step_task_keystore_push_text--example","title":"Example","text":"<pre><code>Scenario: push\n    And value for variable \"foobar\" is \"none\"\n    Then push \"foobar_key\" in keystore with value\n      \"\"\"\n      {\n        \"id\": 1,\n        \"name\": test\n      }\n      \"\"\"\n\nScenario: pop\n    And value for variable \"foobar\" is \"none\"\n    Then pop \"foobar_key\" from keystore and save in variable \"foobar\"\n</code></pre>"},{"location":"framework/usage/steps/scenario/tasks/keystore/#grizzly.steps.scenario.tasks.keystore.step_task_keystore_push_text--arguments","title":"Arguments","text":"Name Type Description Default <code>key</code> <code>str</code> <p>name of key</p> required"},{"location":"framework/usage/steps/scenario/tasks/keystore/#grizzly.steps.scenario.tasks.keystore.step_task_keystore_remove","title":"Remove","text":"<p>Remove <code>key</code> using the Keystore task.</p> <p>See Keystore task documentation for more information.</p>"},{"location":"framework/usage/steps/scenario/tasks/keystore/#grizzly.steps.scenario.tasks.keystore.step_task_keystore_remove--example","title":"Example","text":"<pre><code>And value for variable \"foobar\" is \"hello\"\nThen set \"foobar_key\" in keystore with value \"{{ foobar }}\"\n...\nThen remove \"foobar_key\" from keystore\n</code></pre>"},{"location":"framework/usage/steps/scenario/tasks/keystore/#grizzly.steps.scenario.tasks.keystore.step_task_keystore_remove--arguments","title":"Arguments","text":"Name Type Description Default <code>key</code> <code>str</code> <p>name of key to remove</p> required"},{"location":"framework/usage/steps/scenario/tasks/keystore/#grizzly.steps.scenario.tasks.keystore.step_task_keystore_set","title":"Set","text":"<p>Set a value for <code>key</code> using the Keystore task.</p> <p><code>value</code> must be JSON serializable (string values must be single-quoted).</p> <p>See Keystore task documentation for more information.</p>"},{"location":"framework/usage/steps/scenario/tasks/keystore/#grizzly.steps.scenario.tasks.keystore.step_task_keystore_set--example","title":"Example","text":"<pre><code>And value for variable \"foobar\" is \"{'hello': 'world'}\"\nThen set \"foobar_key\" in keystore with value \"{{ foobar }} | render=True\"\n</code></pre>"},{"location":"framework/usage/steps/scenario/tasks/keystore/#grizzly.steps.scenario.tasks.keystore.step_task_keystore_set--arguments","title":"Arguments","text":"Name Type Description Default <code>key</code> <code>str</code> <p>name of key</p> required <code>value</code> <code>str</code> <p>JSON serializable value to save in keystore</p> required"},{"location":"framework/usage/steps/scenario/tasks/keystore/#grizzly.steps.scenario.tasks.keystore.step_task_keystore_set_text","title":"Set text","text":"<p>Set a value for <code>key</code> using the Keystore task.</p> <p><code>value</code> is specified via step text, and must be JSON serializable.</p> <p>See Keystore task documentation for more information.</p>"},{"location":"framework/usage/steps/scenario/tasks/keystore/#grizzly.steps.scenario.tasks.keystore.step_task_keystore_set_text--example","title":"Example","text":"<pre><code>And value for variable \"foobar\" is \"{'hello': 'world'}\"\nThen set \"foobar_key\" in keystore with value\n\"\"\"\n{{ foobar }} | render=True\n\"\"\"\n</code></pre>"},{"location":"framework/usage/steps/scenario/tasks/keystore/#grizzly.steps.scenario.tasks.keystore.step_task_keystore_set_text--arguments","title":"Arguments","text":"Name Type Description Default <code>key</code> <code>str</code> <p>name of key</p> required"},{"location":"framework/usage/steps/scenario/tasks/log_message/","title":"Log Message","text":"<p>Module contains step implementations for the Log message task.</p>"},{"location":"framework/usage/steps/scenario/tasks/log_message/#grizzly.steps.scenario.tasks.log_message.step_task_log_message_print","title":"Print","text":"<p>Create an instance of the Log message task.</p> <p>Prints a log message in the console, useful for troubleshooting values of variables or set markers in log files. The message supports templating.</p> <p>See Log message task documentation for more information.</p>"},{"location":"framework/usage/steps/scenario/tasks/log_message/#grizzly.steps.scenario.tasks.log_message.step_task_log_message_print--example","title":"Example","text":"<pre><code>And log message \"context_variable='{{ context_variable }}'\n</code></pre>"},{"location":"framework/usage/steps/scenario/tasks/log_message/#grizzly.steps.scenario.tasks.log_message.step_task_log_message_print--arguments","title":"Arguments","text":"Name Type Description Default <code>message</code> <code>str</code> <p>message to print</p> required"},{"location":"framework/usage/steps/scenario/tasks/loop/","title":"Loop","text":"<p>Module contains step implementations for the Loop task.</p>"},{"location":"framework/usage/steps/scenario/tasks/loop/#grizzly.steps.scenario.tasks.loop.step_task_loop_end","title":"End","text":"<p>Close the Loop task created by Start.</p> <p>This means that any following tasks specified will not be part of the loop.</p> <p>See Loop task documentation for more information.</p>"},{"location":"framework/usage/steps/scenario/tasks/loop/#grizzly.steps.scenario.tasks.loop.step_task_loop_end--example","title":"Example","text":"<pre><code>Then loop \"{{ loop_values }}\" as variable \"loop_value\" with name \"test-loop\"\nThen log message \"loop_value={{ loop_value }}\"\nThen end loop\n</code></pre>"},{"location":"framework/usage/steps/scenario/tasks/loop/#grizzly.steps.scenario.tasks.loop.step_task_loop_start","title":"Start","text":"<p>Create an instance of the Loop tasks which executes all wrapped tasks with a value from the list <code>values</code>.</p> <p><code>values</code> supports templating and must be a valid JSON list.</p> <p>See Loop task documentation for more information.</p>"},{"location":"framework/usage/steps/scenario/tasks/loop/#grizzly.steps.scenario.tasks.loop.step_task_loop_start--example","title":"Example","text":"<pre><code>Then loop \"{{ loop_values }}\" as variable \"loop_value\" with name \"test-loop\"\nThen log message \"loop_value={{ loop_value }}\"\nThen end loop\n</code></pre>"},{"location":"framework/usage/steps/scenario/tasks/request/","title":"Request","text":"<p>Module contains step implementations that creates requests executed by the load user in the scenario.</p>"},{"location":"framework/usage/steps/scenario/tasks/request/#grizzly.steps.scenario.tasks.request.step_task_request_file_with_name","title":"File with name","text":"<p>Create an instance of the Request task, with the same <code>endpoint</code> as the previous Request task, where the payload is defined in a template file.</p> <p>See Request task documentation for more information about arguments.</p>"},{"location":"framework/usage/steps/scenario/tasks/request/#grizzly.steps.scenario.tasks.request.step_task_request_file_with_name--example","title":"Example","text":"<pre><code>Then post request \"test/request1.j2.json\" with name \"test-post1\" to endpoint \"/api/test\"\nThen post request \"test/request2.j2.json\" with name \"test-post2\"\n\n# same as\nThen post request \"test/request1.j2.json\" with name \"test-post1\" to endpoint \"/api/test\"\nThen post request \"test/request2.j2.json\" with name \"test-post2\" to endpoint \"/api/test\"\n</code></pre>"},{"location":"framework/usage/steps/scenario/tasks/request/#grizzly.steps.scenario.tasks.request.step_task_request_file_with_name--arguments","title":"Arguments","text":"Name Type Description Default <code>method</code> <code>Method</code> <p>type of \"to\" request</p> required <code>source</code> <code>str</code> <p>path to a template file relative to the directory <code>requests/</code>, which must exist in the directory the feature file is located</p> required <code>name</code> <code>str</code> <p>name of the requests in logs, can contain variables</p> required"},{"location":"framework/usage/steps/scenario/tasks/request/#grizzly.steps.scenario.tasks.request.step_task_request_file_with_name_endpoint","title":"File with name endpoint","text":"<p>Create an instance of the Request task, where the payload is defined in a template file.</p> <p>See Request task documentation for more information about arguments.</p>"},{"location":"framework/usage/steps/scenario/tasks/request/#grizzly.steps.scenario.tasks.request.step_task_request_file_with_name_endpoint--example","title":"Example","text":"<pre><code>Then send request \"test/request.j2.json\" with name \"test-send\" to endpoint \"queue:receive-queue\"\nThen post request \"test/request.j2.json\" with name \"test-post\" to endpoint \"/api/test\"\nThen put request \"test/request.j2.json\" with name \"test-put\" to endpoint \"/api/test\"\n</code></pre>"},{"location":"framework/usage/steps/scenario/tasks/request/#grizzly.steps.scenario.tasks.request.step_task_request_file_with_name_endpoint--arguments","title":"Arguments","text":"Name Type Description Default <code>method</code> <code>Method</code> <p>type of \"to\" request</p> required <code>source</code> <code>str</code> <p>path to a template file relative to the directory <code>requests/</code>, which must exist in the directory the feature file is located</p> required <code>name</code> <code>str</code> <p>name of the requests in logs, can contain variables</p> required <code>endpoint</code> <code>str</code> <p>URI relative to <code>host</code> in the scenario, can contain variables and in certain cases <code>user_class_name</code> specific parameters</p> required"},{"location":"framework/usage/steps/scenario/tasks/request/#grizzly.steps.scenario.tasks.request.step_task_request_text_with_name","title":"Text with name","text":"<p>Create an instance of the Request task, where optional payload is defined directly in the feature file.</p> <p>See Request task documentation for more information about arguments.</p> <p>If <code>method</code> in the expression is <code>post</code>, <code>put</code> or <code>send</code> the payload in the request must be defined directly in the feature file after the step. This step is useful if <code>method</code> and <code>endpoint</code> are the same as previous request, but the payload should be different.</p>"},{"location":"framework/usage/steps/scenario/tasks/request/#grizzly.steps.scenario.tasks.request.step_task_request_text_with_name--example","title":"Example","text":"<pre><code># example-1\nThen post request with name \"test-post-1\" to endpoint \"/api/test\"\n    \"\"\"\n    {\n        \"value\": \"hello world!\"\n    }\n    \"\"\"\nThen post request with name \"test-post-2\"\n    \"\"\"\n    {\n        \"value\": \"i have good news!\"\n    }\n    \"\"\"\n\n# same as example-1\nThen post request with name \"test-post-1\" to endpoint \"/api/test\"\n    \"\"\"\n    {\n        \"value\": \"hello world!\"\n    }\n    \"\"\"\nThen post request with name \"test-post-2\" to endpoint \"/api/test\"\n    \"\"\"\n    {\n        \"value\": \"i have good news!\"\n    }\n    \"\"\"\n\n# example-2\nThen get request with name \"test-get-1\" from endpoint \"/api/test\"\nThen get request with name \"test-get-2\"\n\n# same as example-2\nThen get request with name \"test-get-1\" from endpoint \"/api/test\"\nThen get request with name \"test-get-2\" from endpoint \"/api/test\"\n</code></pre>"},{"location":"framework/usage/steps/scenario/tasks/request/#grizzly.steps.scenario.tasks.request.step_task_request_text_with_name--arguments","title":"Arguments","text":"Name Type Description Default <code>method</code> <code>Method</code> <p>type of request, either \"from\" or \"to\"</p> required <code>name</code> <code>str</code> <p>name of the requests in logs, can contain variables</p> required"},{"location":"framework/usage/steps/scenario/tasks/request/#grizzly.steps.scenario.tasks.request.step_task_request_text_with_name_endpoint","title":"Text with name endpoint","text":"<p>Create an instance of the Request task, where optional payload is defined directly in the feature file.</p> <p>See Request task documentation for more information about arguments.</p> <ul> <li> <p>If <code>Method</code> in the expression is <code>get</code> or <code>receive</code>; the <code>direction</code> must be <code>from</code>.</p> </li> <li> <p>If <code>Method</code> in the expression is <code>post</code>, <code>pust</code>, or <code>send</code>; the <code>direction</code> must be <code>to</code>, and payload defined in the feature file.</p> </li> </ul>"},{"location":"framework/usage/steps/scenario/tasks/request/#grizzly.steps.scenario.tasks.request.step_task_request_text_with_name_endpoint--example","title":"Example","text":"<pre><code>Then post request with name \"test-post\" to endpoint \"/api/test\"\n    \"\"\"\n    {\n        \"test\": \"hello world\"\n    }\n    \"\"\"\nThen put request with name \"test-put\" to endpoint \"/api/test\"\n    \"\"\"\n    {\n        \"test\": \"hello world\"\n    }\n    \"\"\"\nThen get request with name \"test-get\" from endpoint \"/api/test\"\n\nThen send request with name \"test-send\" to endpoint \"queue:receive-queue\"\n    \"\"\"\n    {\n        \"value\": \"do something\"\n    }\n    \"\"\"\nThen receive request with name \"test-receive\" from endpoint \"queue:receive-queue\"\n</code></pre>"},{"location":"framework/usage/steps/scenario/tasks/request/#grizzly.steps.scenario.tasks.request.step_task_request_text_with_name_endpoint--arguments","title":"Arguments","text":"Name Type Description Default <code>method</code> <code>Method</code> <p>type of request, either of type \"from\" or \"to\"</p> required <code>name</code> <code>str</code> <p>name of the requests in logs, can contain variables</p> required <code>direction</code> <code>RequestDirection</code> <p>one of <code>to</code> or <code>from</code> depending on the value of <code>method</code></p> required <code>endpoint</code> <code>str</code> <p>URI relative to <code>host</code> in the scenario, can contain variables and in certain cases <code>user_class_name</code> specific parameters</p> required"},{"location":"framework/usage/steps/scenario/tasks/transformer/","title":"Transformer","text":"<p>Module contains step implementations for the Transformer task.</p>"},{"location":"framework/usage/steps/scenario/tasks/transformer/#grizzly.steps.scenario.tasks.transformer.step_task_transformer_parse","title":"Parse","text":"<p>Create an instance of the Transformer task.</p> <p>Transforms the specified <code>content</code> with <code>content_type</code> to an object that an transformer can extract information from with the specified <code>expression</code>.</p> <p>See Transformer task documentation for more information.</p>"},{"location":"framework/usage/steps/scenario/tasks/transformer/#grizzly.steps.scenario.tasks.transformer.step_task_transformer_parse--example","title":"Example","text":"<pre><code>And value for variable \"document_id\" is \"None\"\nAnd value for variable \"document_title\" is \"None\"\nAnd value for variable \"document\" is \"{\"document\": {\"id\": \"DOCUMENT_8843-1\", \"title\": \"TPM Report 2021\"}}\"\n...\nThen parse \"{{ document }}\" as \"json\" and save value of \"$.document.id\" in variable \"document_id\"\nThen parse \"{{ document }}\" as \"json\" and save value of \"$.document.title\" in variable \"document_title\"\n</code></pre>"},{"location":"framework/usage/steps/scenario/tasks/transformer/#grizzly.steps.scenario.tasks.transformer.step_task_transformer_parse--arguments","title":"Arguments","text":"Name Type Description Default <code>content</code> <code>str</code> <p>contents to parse, supports templating or a static string</p> required <code>content_type</code> <code>TransformerContentType</code> <p>MIME type of <code>contents</code></p> required <code>expression</code> <code>str</code> <p>JSON or XPath expression for specific value in <code>contents</code></p> required <code>variable</code> <code>str</code> <p>name of variable to save value to, must have been initialized</p> required"},{"location":"framework/usage/steps/scenario/tasks/until/","title":"Until","text":"<p>Module contains step implementations for the Until task.</p>"},{"location":"framework/usage/steps/scenario/tasks/until/#grizzly.steps.scenario.tasks.until.step_task_client_get_endpoint_until","title":"Client get endpoint until","text":"<p>Create an instance of a client task, actual implementation of the task is determined based on the URL scheme specified in <code>endpoint</code>.</p> <p>Gets information, repeated from another host or endpoint than the scenario is load testing until the response matches <code>expression</code>.</p> <p>See client task documentation for more information about client tasks.</p>"},{"location":"framework/usage/steps/scenario/tasks/until/#grizzly.steps.scenario.tasks.until.step_task_client_get_endpoint_until--example","title":"Example","text":"<pre><code>Then get from \"https://www.example.org/example.json\" with name \"example-1\" until \"$.response[status='Success']\nThen get from \"http://{{ endpoint }}\" with name \"example-2\" until \"//*[@status='Success']\"\n</code></pre>"},{"location":"framework/usage/steps/scenario/tasks/until/#grizzly.steps.scenario.tasks.until.step_task_client_get_endpoint_until--arguments","title":"Arguments","text":"Name Type Description Default <code>endpoint</code> <code>str</code> <p>information about where to get information, see the specific getter task implementations for more information</p> required <code>name</code> <code>str</code> <p>name of the request, used in request statistics</p> required <code>condition</code> <code>str</code> <p>JSON or XPath expression for specific value in response payload</p> required"},{"location":"framework/usage/steps/scenario/tasks/until/#grizzly.steps.scenario.tasks.until.step_task_request_with_name_endpoint_until","title":"Request with name endpoint until","text":"<p>Create an instance of the Until task to be executed by the load user.</p> <p>See Until task documentation for more information.</p>"},{"location":"framework/usage/steps/scenario/tasks/until/#grizzly.steps.scenario.tasks.until.step_task_request_with_name_endpoint_until--example","title":"Example","text":"<pre><code>Then get request with name \"test-get\" from endpoint \"/api/test | content_type=json\" until \"$.`this`[?success==true]\"\nThen receive request with name \"test-receive\" from endpoint \"queue:receive-queue | content_type=xml\" until \"/header/success[. == 'True']\"\n</code></pre>"},{"location":"framework/usage/steps/scenario/tasks/until/#grizzly.steps.scenario.tasks.until.step_task_request_with_name_endpoint_until--arguments","title":"Arguments","text":"Name Type Description Default <code>method</code> <code>Method</code> <p>type of \"from\" request</p> required <code>name</code> <code>str</code> <p>name of the requests in logs, can contain variables</p> required <code>endpoint</code> <code>str</code> <p>URI relative to <code>host</code> in the scenario, can contain variables and in certain cases <code>user_class_name</code> specific parameters</p> required <code>condition</code> <code>str</code> <p>JSON or XPath expression for specific value in response payload</p> required"},{"location":"framework/usage/steps/scenario/tasks/wait_between/","title":"Wait Between","text":"<p>Module contains step implementations for the Wait between task.</p>"},{"location":"framework/usage/steps/scenario/tasks/wait_between/#grizzly.steps.scenario.tasks.wait_between.step_task_wait_between_constant","title":"Constant","text":"<p>Create an instance of the Wait between task.</p> <p>Set number of, constant, seconds the load user will wait between executing each task.</p> <p>See Wait between task documentation for more information.</p>"},{"location":"framework/usage/steps/scenario/tasks/wait_between/#grizzly.steps.scenario.tasks.wait_between.step_task_wait_between_constant--example","title":"Example","text":"<pre><code>And value of variable \"delay_time\" is \"1.3\"\nAnd wait \"1.4\" seconds between tasks\n# wait 1.4 seconds\nThen get request with name \"test-get-1\" from endpoint \"...\"\n# wait 1.4 seconds\nThen get request with name \"test-get-2\" from endpoint \"...\"\n# wait 1.4 seconds\nAnd wait \"0.1\" seconds between tasks\n# wait 0.1 seconds\nThen get request with name \"test-get-3\" from endpoint \"...\"\n# wait 0.1 seconds\nAnd wait \"{{ delay_time }}\" seconds between tasks\n# wait 1.3 seconds\n...\n</code></pre>"},{"location":"framework/usage/steps/scenario/tasks/wait_between/#grizzly.steps.scenario.tasks.wait_between.step_task_wait_between_constant--arguments","title":"Arguments","text":"Name Type Description Default <code>time</code> <code>str</code> <p>static time to wait between tasks</p> required <p>Argument supports templating.</p>"},{"location":"framework/usage/steps/scenario/tasks/wait_between/#grizzly.steps.scenario.tasks.wait_between.step_task_wait_between_random","title":"Random","text":"<p>Create an instance of the Wait between task.</p> <p>Set number of, randomly, seconds the load user will wait between executing each task.</p> <p>See Wait between task documentation for more information.</p>"},{"location":"framework/usage/steps/scenario/tasks/wait_between/#grizzly.steps.scenario.tasks.wait_between.step_task_wait_between_random--example","title":"Example","text":"<pre><code>And value of variable \"delay_time\" is \"1.3\"\nAnd wait \"1.4..1.7\" seconds between tasks\n# wait between 1.4 and 1.7 seconds\nThen get request with name \"test-get-1\" from endpoint \"...\"\n# wait between 1.4 and 1.7 seconds\nThen get request with name \"test-get-2\" from endpoint \"...\"\n# wait between 1.4 and 1.7 seconds\nAnd wait \"0.1\" seconds between tasks\n# wait 0.1 seconds\nThen get request with name \"test-get-3\" from endpoint \"...\"\n# wait 0.1 seconds\nAnd wait \"{{ delay_time }}\" seconds between tasks\n# wait 1.3 seconds\n...\n</code></pre>"},{"location":"framework/usage/steps/scenario/tasks/wait_between/#grizzly.steps.scenario.tasks.wait_between.step_task_wait_between_random--arguments","title":"Arguments","text":"Name Type Description Default <code>min_time</code> <code>str</code> <p>minimum time to wait between tasks</p> required <code>max_time</code> <code>str</code> <p>maximum time to wait between tasks</p> required <p>Arguments supports templating.</p>"},{"location":"framework/usage/steps/scenario/tasks/wait_explicit/","title":"Wait Explicit","text":"<p>Module contains step implementations for the Wait explicit task.</p>"},{"location":"framework/usage/steps/scenario/tasks/wait_explicit/#grizzly.steps.scenario.tasks.wait_explicit.step_task_wait_explicit_static","title":"Static","text":"<p>Create an instace of the Wait explicit task.</p> <p>The scenario will wait the specified time (seconds) in additional to the wait time specified by Wait between task.</p> <p>See Wait explicit task documentation for more information.</p>"},{"location":"framework/usage/steps/scenario/tasks/wait_explicit/#grizzly.steps.scenario.tasks.wait_explicit.step_task_wait_explicit_static--example","title":"Example","text":"<pre><code>And ask for value of variable \"wait_time\"\nAnd wait \"1.5..2.5\" seconds between tasks\n...\nThen wait for \"1.5\" seconds\n...\nThen wait for \"{{ wait_time }}\" seconds\n</code></pre> <p>Above combinations of steps will result in a wait time between 3 and 4 seconds for the first task that is defined after the <code>Then wait for...</code>-step.</p>"},{"location":"framework/usage/steps/scenario/tasks/wait_explicit/#grizzly.steps.scenario.tasks.wait_explicit.step_task_wait_explicit_static--arguments","title":"Arguments","text":"Name Type Description Default <code>wait_time_expression</code> <code>str | float</code> <p>templating that renders to a float</p> required"},{"location":"framework/usage/steps/scenario/tasks/write_file/","title":"Write File","text":"<p>Module contains step implementations for the Write file task.</p>"},{"location":"framework/usage/steps/scenario/tasks/write_file/#grizzly.steps.scenario.tasks.write_file.step_task_write_file_create_or_append","title":"Create or append","text":"<p>Create an instance of the Write file task.</p> <p>Writes content into specified file (adds new line after), if the file already exist the content will be appended. Useful for traceability or observability during a test.</p> <p>Both content and file name support templating.</p> <p>See Write file task documentation for more information.</p>"},{"location":"framework/usage/steps/scenario/tasks/write_file/#grizzly.steps.scenario.tasks.write_file.step_task_write_file_create_or_append--example","title":"Example","text":"<pre><code>Then write \"{{ payload }}\" in file \"debug/request_response.log\"\nThen write \"hello world!\" in file \"debug/request_response.log\"\n</code></pre>"},{"location":"framework/usage/steps/scenario/tasks/write_file/#grizzly.steps.scenario.tasks.write_file.step_task_write_file_create_or_append--arguments","title":"Arguments","text":"Name Type Description Default <code>content</code> <code>str</code> <p>what to write in the file, can be base64 encoded</p> required <code>file_name</code> <code>str</code> <p>file name, which can include non-existing directory levels (will be created)</p> required"},{"location":"framework/usage/steps/scenario/tasks/write_file/#grizzly.steps.scenario.tasks.write_file.step_task_write_file_temporary","title":"Temporary","text":"<p>Create an instance of the Write file task, which will remove the file when test is stopped.</p> <p>Writes specified content, as-is, in the specified file (no line break added), the file will be removed when the test stops. The file will be created in the first iteration, and then be a no-op task for any following iterations.</p> <p>Both content and file name support templating, and content can be base64 encoded.</p> <p>See Write file task documentation for more information.</p>"},{"location":"framework/usage/steps/scenario/tasks/write_file/#grizzly.steps.scenario.tasks.write_file.step_task_write_file_temporary--example","title":"Example","text":"<pre><code>Then write \"$env::BASE64_ENCODED_BINARY_FILE\" in temporary file \"certificate.bin\"\n</code></pre>"},{"location":"framework/usage/steps/scenario/tasks/write_file/#grizzly.steps.scenario.tasks.write_file.step_task_write_file_temporary--arguments","title":"Arguments","text":"Name Type Description Default <code>content</code> <code>str</code> <p>what to write in the file, can be base64 encoded</p> required <code>file_name</code> <code>str</code> <p>file name, which can include non-existing directory levels (will be created)</p> required"},{"location":"framework/usage/users/","title":"Load Users","text":"<p>Package contains implementation for different type of endpoints and protocols.</p> <p>These implementations are the basis for how to communicate with the system under test.</p>"},{"location":"framework/usage/users/#grizzly.users--custom","title":"Custom","text":"<p>It is possible to implement custom users, the only requirement is that they inherit <code>grizzly.users.GrizzlyUser</code>. To get them to be executed by <code>grizzly</code> the full namespace has to be specified as <code>user_class_name</code> in the scenarios user step.</p> <p>There are examples of this in the example documentation.</p>"},{"location":"framework/usage/users/blobstorage/","title":"Blobstorage","text":"<p>Perform operations towards Azure Blob (container) Storage.</p>"},{"location":"framework/usage/users/blobstorage/#grizzly.users.blobstorage--request-methods","title":"Request methods","text":"<p>Supports the following request methods:</p> <ul> <li>send</li> <li>put</li> <li>receive</li> <li>get</li> </ul>"},{"location":"framework/usage/users/blobstorage/#grizzly.users.blobstorage--format","title":"Format","text":"<p>Format of <code>host</code> is the following, when using connection strings:</p> <pre><code>[DefaultEndpointsProtocol=]https;EndpointSuffix=&lt;hostname&gt;;AccountName=&lt;account name&gt;;AccountKey=&lt;account key&gt;\n</code></pre> <p>When using credentials context variables <code>auth.tenant</code>, <code>auth.user.username</code> and <code>auth.user.passwords</code> has to be set, and the format <code>host</code> should be: <pre><code>bs://&lt;storage account name&gt;[.blob.core.windows.net]\n</code></pre></p> <p><code>endpoint</code> in the request is the name of the blob storage container. Name of the targeted file in the container is either <code>name</code> or based on the file name of <code>source</code>.</p>"},{"location":"framework/usage/users/blobstorage/#grizzly.users.blobstorage--examples","title":"Examples","text":"<p>With connection string:</p> <pre><code>Given a user of type \"BlobStorage\" load testing \"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=examplestorage;AccountKey=xxxyyyyzzz==\"\nThen send request \"test/blob.file\" to endpoint \"azure-blobstorage-container-name\"\n</code></pre> <p>With credentials:</p> <pre><code>Given a user of type \"BlobStorage\" load testing \"bs://examplestorage\"\nAnd set context variable \"auth.tenant\" to \"example.com\"\nAnd set context variable \"auth.user.username\" to \"bob@example.com\"\nAnd set context variable \"auth.user.password\" to \"secret\"\nThen send request \"test/blob.file\" to endpoint \"azure-blobstorage-container-name\"\n</code></pre>"},{"location":"framework/usage/users/dummy/","title":"Dummy","text":"<p>Does nothing (noop).</p> <p>This is useful for scenarios that collects and aggregates information from many different sources (targets) using client tasks.</p>"},{"location":"framework/usage/users/dummy/#grizzly.users.dummy--format","title":"Format","text":"<p>Format of <code>host</code> can be anything.</p>"},{"location":"framework/usage/users/dummy/#grizzly.users.dummy--examples","title":"Examples","text":"<pre><code>Given a user of type \"Dummy\" load testing \"/dev/null\"\n</code></pre>"},{"location":"framework/usage/users/iothub/","title":"IoTHub","text":"<p>Communicate with an Azure IoT hub as an IoT device.</p> <p>Warning</p> <p>Due to how Azure IoT hub devices works, you can only run one instance of this user if you rely on cloud-to-device (C2D) messages. Carefully chose to handle task errors so you do not end up with a scenario that will cause the whole feature to fail since the <code>IotHubUser</code> stopped.</p>"},{"location":"framework/usage/users/iothub/#grizzly.users.iothub--request-methods","title":"Request methods","text":"<p>Supports the following request methods:</p> <ul> <li>send</li> <li>put</li> <li>get</li> <li>receive</li> </ul>"},{"location":"framework/usage/users/iothub/#grizzly.users.iothub--metadata","title":"Metadata","text":"<p>The following properties is added to the metadata part of a message.</p> Name Type <code>custom_properties</code> <code>dict</code> <code>message_id</code> <code>str</code> <code>expiry_time_utc</code> <code>str</code> <code>correlation_id</code> <code>str</code> <code>user_id</code> <code>str</code> <code>content_type</code> <code>str</code> <code>output_name</code> <code>str</code> <code>input_name</code> <code>str</code> <code>ack</code> <code>bool</code> <code>iothub_interface_id</code> <code>str</code> <code>size</code> <code>int</code>"},{"location":"framework/usage/users/iothub/#grizzly.users.iothub--sending","title":"Sending","text":"<p>This user has support for sending IoT messages and uploading files. For device-to-cloud (D2C) messages, <code>endpoint</code> in the request must be <code>device-to-cloud</code>, otherwise it will try to upload the request as a file. See device-to-cloud communication guidance for the difference.</p>"},{"location":"framework/usage/users/iothub/#grizzly.users.iothub--receiving","title":"Receiving","text":"<p>Receiving cloud-to-device (C2D) messages is a little bit special, the <code>endpoint</code> in the in the request must be <code>cloud-to-device</code>.</p> <p>There are 3 other context variables that will control wether a message will be pushed to the internal queue or not:</p> <ul> <li> <p><code>expression.unique</code> (str), this is a JSON-path expression will extract a value from the message payload, push the whole message to the internal queue and save the value in a   \"volatile list\", if a message with the same value is received within 20 seconds, it will not be handled. This is to avoid handling duplicates of messages, which can occur   for different reasons (\"at least once\" design pattern). E.g. <code>$.body.event.id</code>.</p> </li> <li> <p><code>expression.metadata</code> (bool), this a JSON-path expression that should validate to a boolean expression, messages for which this expression does not validate to <code>True</code> will be   dropped and not pushed to the internal queue. E.g. <code>$.size&gt;=1024</code>.</p> </li> <li> <p><code>expression.payload</code> (bool), same as <code>expression.metadata</code> except it will validate against the actual message payload. E.g. <code>$.body.timestamp&gt;='2024-09-23 20:39:00</code>, which will   drop all messages having a timestamp before the specified date.</p> </li> </ul>"},{"location":"framework/usage/users/iothub/#grizzly.users.iothub--pipe-arguments","title":"Pipe arguments","text":"<p>See Request task endpoint format for standard pipe arguments, in additional to those the following are also supported:</p> <ul> <li><code>wait</code> (int), number of seconds to wait for a available message before failing request. If not specified it will wait indefinitely.</li> </ul>"},{"location":"framework/usage/users/iothub/#grizzly.users.iothub--format","title":"Format","text":"<p>Format of <code>host</code> is the following:</p> <pre><code>HostName=&lt;hostname&gt;;DeviceId=&lt;device key&gt;;SharedAccessKey=&lt;access key&gt;\n</code></pre> <p>The metadata values <code>content_type</code> and <code>content_encoding</code> can be set to gzip compress the payload before upload (see example below).</p>"},{"location":"framework/usage/users/iothub/#grizzly.users.iothub--examples","title":"Examples","text":"<p>Example of how to use it in a scenario:</p> <pre><code>Given a user of type \"IotHub\" load testing \"HostName=my_iot_host_name;DeviceId=my_device;SharedAccessKey=xxxyyyyzzz==\"\nThen send request \"test/blob.file\" to endpoint \"uploaded_blob_filename\"\n</code></pre> <p>The same example with gzip compression enabled:</p> <pre><code>Given a user of type \"IotHub\" load testing \"HostName=my_iot_host_name;DeviceId=my_device;SharedAccessKey=xxxyyyyzzz==\"\nAnd metadata \"content_encoding\" is \"gzip\"\nThen send request \"test/blob.file\" to endpoint \"uploaded_blob_filename | content_type=octet_stream_utf8\"\n</code></pre> <p>Example of how to receive unique messages from a thermometer of type <code>temperature</code> (considered that the application sets a custom property <code>message_type</code>) <pre><code>Given a user of type \"IotHub\" load testing \"HostName=my_iot_host_name;DeviceId=my_device;SharedAccessKey=xxxyyyyzzz==\"\nAnd set context variable \"expression.unique\" to \"$.device.name=='thermometer01'\"\nAnd set context variable \"expression.metadata\" to \"$.custom_properties.message_type=='temperature'\"\nAnd value for variable \"temperature\" is \"none\"\n\nThen receive request with name \"iot-get-temperature\" from endpoint \"cloud-to-device | content_type=json, wait=180\"\nThen save response payload \"$.device.temperature\" in variable \"temperature\"\n</code></pre></p>"},{"location":"framework/usage/users/messagequeue/","title":"Messagequeue","text":"<p>Get and put messages on with IBM MQ queues.</p> <p>User is based on <code>pymqi</code> for communicating with IBM MQ. However <code>pymqi</code> uses native libraries which <code>gevent</code> (used by <code>locust</code>) cannot patch, which causes any calls in <code>pymqi</code> to block the rest of <code>locust</code>. To get around this, the user implementation communicates with a stand-alone process via 0mq, which in turn communicates with IBM MQ.</p> <p><code>async-messaged</code> starts automagically when a scenario uses <code>MessageQueueUser</code> and <code>pymqi</code> dependencies are installed.</p>"},{"location":"framework/usage/users/messagequeue/#grizzly.users.messagequeue--request-methods","title":"Request methods","text":"<p>Supports the following request methods:</p> <ul> <li>send</li> <li>put</li> <li>get</li> <li>receive</li> </ul>"},{"location":"framework/usage/users/messagequeue/#grizzly.users.messagequeue--format","title":"Format","text":"<p>Format of <code>host</code> is the following:</p> <pre><code>mq://&lt;hostname&gt;:&lt;port&gt;/?QueueManager=&lt;queue manager name&gt;&amp;Channel=&lt;channel name&gt;\n</code></pre> <p><code>endpoint</code> in the request is the name of an MQ queue. This can also be combined with an expression, if a specific message is to be retrieved from the queue. The format of endpoint is:</p> <pre><code>queue:&lt;queue_name&gt;[, expression:&lt;expression&gt;][, max_message_size:&lt;max_message_size&gt;]\n</code></pre> <p><code>&lt;expression&gt;</code> can be a XPath or jsonpath expression, depending on the specified content type, see Get message with expression example.</p> <p><code>&lt;max_message_size&gt;</code> is the maximum number of bytes a message can be for being able to accept it. If not set, the client will reject the message with <code>MQRC_TRUNCATED_MSG_FAILED</code>, adjust the message buffer and try again. If set, and the message is bigger than the specified size, the message will be rejected by the client and will eventually fail.</p>"},{"location":"framework/usage/users/messagequeue/#grizzly.users.messagequeue--examples","title":"Examples","text":"<p>Example of how to use it in a scenario:</p> <pre><code>Given a user of type \"MessageQueue\" load testing \"mq://mq.example.com/?QueueManager=QM01&amp;Channel=SRVCONN01\"\nThen put request \"test/queue-message.j2.json\" with name \"queue-message\" to endpoint \"queue:INCOMING.MESSAGES\"\n</code></pre>"},{"location":"framework/usage/users/messagequeue/#grizzly.users.messagequeue--get-message","title":"Get message","text":"<p>Default behavior is to fail directly if there is no message on the queue. If the request should wait until a message is available, set the time it should wait with <code>message.wait</code> (seconds) context variable.</p> <p>To keep the connection alive during longer waiting periods, a heartbeat interval can be configured using the <code>connection.heartbeat_interval</code> (seconds) context variable (default 300).</p> <pre><code>Given a user of type \"MessageQueue\" load testing \"mq://mq.example.com/?QueueManager=QM01&amp;Channel=SRVCONN01\"\nAnd set context variable \"message.wait\" to \"5\"\nThen get request with name \"get-queue-message\" from endpoint \"queue:INCOMING.MESSAGES\"\n</code></pre> <p>In this example, the request will not fail if there is a message on queue within 5 seconds.</p>"},{"location":"framework/usage/users/messagequeue/#grizzly.users.messagequeue--get-message-with-expression","title":"Get message with expression","text":"<p>When specifying an expression, the messages on the queue are first browsed. If any message matches the expression, it is later consumed from the queue. If no matching message was found during browsing, it is repeated again after a slight delay, up until the specified <code>message.wait</code> seconds has elapsed. To use expressions, a content type must be specified for the get request, e.g. <code>application/xml</code>:</p> <pre><code>Given a user of type \"MessageQueue\" load testing \"mq://mq.example.com/?QueueManager=QM01&amp;Channel=SRVCONN01\"\nAnd set context variable \"message.wait\" to \"5\"\nThen get request with name \"get-specific-queue-message\" from endpoint \"queue:INCOMING.MESSAGES, expression: //document[@id='abc123']\"\nAnd set response content type to \"application/xml\"\n</code></pre>"},{"location":"framework/usage/users/messagequeue/#grizzly.users.messagequeue--authentication","title":"Authentication","text":""},{"location":"framework/usage/users/messagequeue/#grizzly.users.messagequeue--username-and-password","title":"Username and password","text":"<pre><code>Given a user of type \"MessageQueue\" load testing \"mq://mqm:admin@mq.example.com/?QueueManager=QM01&amp;Channel=SRVCONN01\"\nAnd set context variable \"auth.username\" to \"&lt;username&gt;\"\nAnd set context variable \"auth.password\" to \"&lt;password&gt;\"\n</code></pre>"},{"location":"framework/usage/users/messagequeue/#grizzly.users.messagequeue--with-tls","title":"With TLS","text":"<p>A key repository (<code>.kdb</code> and <code>.sth</code>) for the user is needed, and is specified with <code>auth.key_file</code> excluding the file extension.</p> <pre><code>Given a user of type \"MessageQueue\" load testing \"mq://mqm:admin@mq.example.com/?QueueManager=QM01&amp;Channel=SRVCONN01\"\nAnd set context variable \"auth.username\" to \"&lt;username&gt;\"\nAnd set context variable \"auth.password\" to \"&lt;password&gt;\"\nAnd set context variable \"auth.key_file\" to \"&lt;path to key file, excl. file extension&gt;\"\n</code></pre> <p>Default SSL cipher is <code>ECDHE_RSA_AES_256_GCM_SHA384</code>, change it by setting <code>auth.ssl_cipher</code> context variable.</p> <p>Default certificate label is set to <code>auth.username</code>, change it by setting <code>auth.cert_label</code> context variable.</p>"},{"location":"framework/usage/users/messagequeue/#grizzly.users.messagequeue--header-type","title":"Header type","text":"<p>Basic support exist for RFH2, and communicating with MQ using gzip compressed messages. When receiving messages, the RFH2 is automatically detected and (somewhat) supported. If RFH2 should be added when sending messages, with gzip compression, the context variable <code>message.header_type</code> should be set to <code>RFH2</code>:</p> <pre><code>Given a user of type \"MessageQueue\" load testing \"mq://mq.example.com/?QueueManager=QM01&amp;Channel=SRVCONN01\"\nAnd set context variable \"message.header_type\" to \"rfh2\"\nThen put request \"test/queue-message.j2.json\" with name \"gzipped-message\" to endpoint \"queue:GZIPPED.MESSAGES\"\n</code></pre> <p>Default header type is none, i.e. no header is added to the sent messages. To use no header, either set <code>message.header_type</code> to <code>None</code> or omit setting the context variable at all.</p> <p>To set a user value in the RFH2 header of the message, set <code>metadata</code> after the request, e.g.:</p> <pre><code>Then put request \"test/queue-message.j2.json\" with name \"gzipped-message\" to endpoint \"queue:GZIPPED.MESSAGES\"\nAnd metadata \"filename\" is \"my_filename\"\n</code></pre>"},{"location":"framework/usage/users/restapi/","title":"RestAPI","text":"<p>Communicates with HTTP and HTTPS, with built-in support for Azure token authenticated endpoints.</p>"},{"location":"framework/usage/users/restapi/#grizzly.users.restapi--request-methods","title":"Request methods","text":"<p>Supports the following request methods:</p> <ul> <li>get</li> <li>put</li> <li>post</li> </ul>"},{"location":"framework/usage/users/restapi/#grizzly.users.restapi--format","title":"Format","text":"<p>Format of <code>host</code> is the following:</p> <pre><code>http[s]://&lt;hostname&gt;\n</code></pre>"},{"location":"framework/usage/users/restapi/#grizzly.users.restapi--examples","title":"Examples","text":"<p>Example on how to use it in a scenario:</p> <pre><code>Given a user of type \"RestApi\" load testing \"https://api.example.com\"\nThen post request \"test/request.j2.json\" to endpoint \"/api/test\"\nThen get request from endpoint \"/api/test\"\n</code></pre> <p>To change how often the token should be refreshed, default is 3000 seconds: <pre><code>And set context variable \"auth.refresh_time\" to \"3500\"\n</code></pre></p>"},{"location":"framework/usage/users/restapi/#grizzly.users.restapi--authentication","title":"Authentication","text":"<p>See AAD for more information.</p> <p>It is possible to change authenticated user during runtime by using Set context variable step expressions inbetween other tasks. To change user both <code>auth.user.username</code> and <code>auth.user.password</code> has to be changed (even though maybe only one of them changes value).</p> <p>This will then cache the <code>Authorization</code> token for the current user, and if changed back to that user there is no need to re-authenticate again, unless <code>refresh_time</code> for the first login expires.</p> <pre><code>Given a user of type \"RestApi\" load testing \"https://api.example.com\"\nAnd repeat for \"2\" iterations\nAnd set context variable \"auth.user.username\" to \"bob\"\nAnd set context variable \"auth.user.password\" to \"foobar\"\n\nThen get request from endpoint \"/api/test\"\n\nGiven set context variable \"auth.user.username\" to \"alice\"\nAnd set context variable \"auth.user.password\" to \"hello world\"\n\nThen get request from endpoint \"/api/test\"\n\nGiven set context variable \"auth.user.username\" to \"bob\"\nAnd set context variable \"auth.user.password\" to \"foobar\"\n</code></pre> <p>In the above, hypotetical scenario, there will 2 \"AAD OAuth2 user token\" requests, once for user \"bob\" and one for user \"alice\", both done in the first iteration. The second iteration the cached authentication tokens will be re-used.</p>"},{"location":"framework/usage/users/restapi/#grizzly.users.restapi--mtls","title":"mTLS","text":"<p>It is possible to use mTLS by specifying the client certificate and key with <code>auth.client.cert_file</code> and <code>auth.client.key_file</code>, this will then make it possible for the server to authenticate the user / client with a certificate.</p> <pre><code>Given a user of type \"RestApi\" load testing \"https://api.example.com\"\nAnd repeat for \"2\" iterations\nAnd set context variable \"auth.client.cert_file\" to \"certificates/bob.crt\"\nAnd set context variable \"auth.client.key_file\" to \"certificates/bob.key\"\n\nThen get request from endpoint \"/api/test\"\n</code></pre> <p>For now the key file can not be password protected. Path to the files needs to be relative to <code>GRIZZLY_CONTEXT_ROOT</code>, which in most cases means relative to the directory where <code>environment.py</code> resides.</p>"},{"location":"framework/usage/users/restapi/#grizzly.users.restapi--multipart-form-data","title":"Multipart form-data","text":"<p>RestApi supports posting of <code>multipart/form-data</code> content-type, and in that case additional arguments needs to be passed with the request:</p> <ul> <li> <p><code>multipart_form_data_name</code> str - the name of the input form</p> </li> <li> <p><code>multipart_form_data_filename</code> str - the filename</p> </li> </ul> <p>Example: <pre><code>Then post request \"path/my_template.j2.xml\" with name \"FormPost\" to endpoint \"example.url.com | content_type=multipart/form-data, multipart_form_data_filename=my_filename, multipart_form_data_name=form_name\"\n</code></pre></p>"},{"location":"framework/usage/users/servicebus/","title":"Servicebus","text":"<p>Send and receive messages on Azure Service Bus queues and topics.</p> <p>Warning</p> <p>If <code>message.wait</code> is not set, <code>azure.servicebus</code> will wait until there is a message available, and hence block the scenario.</p> <p>Danger</p> <p>Do not use <code>expression</code> to filter messages unless you do not care about the messages that does not match the expression.</p> <p>If you do care about them, you should setup a subscription to do the filtering in Azure.</p> <p>User is based on <code>azure.servicebus</code> for communicating with Azure Service Bus. But creating a connection and session towards a queue or a topic is a costly operation, and caching of the session was causing problems with <code>gevent</code> due to the sockets blocking and hence grizzly was blocking when finished.</p> <p>To get around this, the user implementation communicates with a stand-alone process via 0mq, which in turn communicates with Azure Service Bus. <code>async-messaged</code> starts automagically when a scenario uses the <code>ServiceBusUser</code>.</p>"},{"location":"framework/usage/users/servicebus/#grizzly.users.servicebus--request-methods","title":"Request methods","text":"<p>Supports the following request methods:</p> <ul> <li>send</li> <li>receive</li> </ul>"},{"location":"framework/usage/users/servicebus/#grizzly.users.servicebus--format","title":"Format","text":"<p>Format of <code>host</code> is the following, when using connection strings:</p> <pre><code>[Endpoint=]sb://&lt;hostname&gt;/;SharedAccessKeyName=&lt;shared key name&gt;;SharedAccessKey=&lt;shared key&gt;\n</code></pre> <p>When using credentials context variables <code>auth.tenant</code>, <code>auth.user.username</code> and <code>auth.user.password</code> has to be set, and the format of <code>host</code> should be: <pre><code>sb://&lt;qualified namespace&gt;[.servicebus.windows.net]\n</code></pre></p> <p><code>endpoint</code> in the request must have the prefix <code>queue:</code> or <code>topic:</code> followed by the name of the targeted type. When receiving messages from a topic, the argument <code>subscription:</code> is mandatory. The format of endpoint is:</p> <pre><code>[queue|topic]:&lt;endpoint name&gt;[, subscription:&lt;subscription name&gt;][, expression:&lt;expression&gt;]\n</code></pre> <p>Where <code>&lt;expression&gt;</code> can be a XPath or jsonpath expression, depending on the specified content type. This argument is only allowed when receiving messages. See example below.</p> <p>The <code>endpoint</code> also has support for the following arguments:</p> Name Type Description Default <code>verbose</code> <code>bool</code> all request related to this request is logged with <code>DEBUG</code> log level <code>False</code> <code>consume</code> <code>bool</code> if messages not matching <code>expression</code> should be consumed or abandoned, either way they are not not returned to test case <code>False</code> <code>forward</code> <code>bool</code> if subscriptions should be configured to forward to a queue, and messages is consumed from the queue <code>False</code> <p>These arguments are specified in <code>endpoint</code> as such:</p> <pre><code>&lt;endpoint&gt; | &lt;argument&gt;=&lt;value&gt;[, &lt;argument&gt;=&lt;value&gt;]\n</code></pre>"},{"location":"framework/usage/users/servicebus/#grizzly.users.servicebus--examples","title":"Examples","text":"<p>Example of how to use it in a scenario:</p> <pre><code>Given a user of type \"ServiceBus\" load testing \"sb://sb.example.com/;SharedAccessKeyName=authorization-key;SharedAccessKey=c2VjcmV0LXN0dWZm\"\nAnd set context variable \"message.wait\" to \"5\"\nThen send request \"queue-send\" to endpoint \"queue:shared-queue\"\nThen send request \"topic-send\" to endpoint \"topic:shared-topic\"\nThen receive request \"queue-recv\" from endpoint \"queue:shared-queue\"\nThen receive request \"topic-recv\" from endpoint \"topic:shared-topic, subscription:my-subscription\"\n</code></pre>"},{"location":"framework/usage/users/servicebus/#grizzly.users.servicebus--get-message-with-expression","title":"Get message with expression","text":"<p>When specifying an expression, the messages on the endpoint is first peeked on. If any message matches the expression, it is later consumed from the endpoint. If no matching messages was found when peeking, it is repeated again after a slight delay, up until the specified <code>message.wait</code> seconds has elapsed. To use expressions, a content type must be specified for the request, e.g. <code>application/xml</code>.</p> <pre><code>Given a user of type \"ServiceBus\" load testing \"sb://my-sbns\"\nAnd set context variable \"message.wait\" to \"5\"\nAnd set context variable \"auth.tenant\" to \"example.com\"\nAnd set context variable \"auth.user.username\" to \"bob@example.com\"\nAnd set context variable \"auth.user.password\" to \"secret\"\nThen receive request \"queue-recv\" from endpoint \"queue:shared-queue, expression:$.document[?(@.name=='TPM report')].id\"\nAnd set response content type to \"application/json\"\nThen receive request \"topic-recv\" from endpoint \"topic:shared-topic, subscription:my-subscription, expression:/documents/document[@name='TPM Report']/id/text()\"\nAnd set response content type to \"application/xml\"\n</code></pre>"}]}